{"type":"system","subtype":"hook_response","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"8ce39930-1d14-43b7-8361-b6863f3e714e","hook_name":"SessionStart:resume","hook_event":"SessionStart","stdout":"","stderr":"","exit_code":0}
{"type":"system","subtype":"hook_response","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"4dfd8505-a82b-43b7-95b5-71f0159c3ab6","hook_name":"SessionStart:resume","hook_event":"SessionStart","stdout":"=== RESUMING SESSION - MODIFICATION GUIDANCE ===\n\n## DATA LAYER\n\n- IF you have any data layer related requirements, use the 'database-administrator' subagent\n- Send the user's actual requirements as-is to the subagent.\n\n=== END OF MODIFICATION GUIDANCE ===\n","stderr":"","exit_code":0}
{"type":"system","subtype":"init","cwd":"/home/user/vite-template","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","tools":["Task","Bash","Glob","Grep","ExitPlanMode","Read","Edit","Write","NotebookEdit","WebFetch","TodoWrite","WebSearch","BashOutput","KillShell","Skill","SlashCommand","EnterPlanMode"],"mcp_servers":[],"model":"claude-sonnet-4-5","permissionMode":"bypassPermissions","slash_commands":["compact","context","cost","init","pr-comments","release-notes","todos","review","security-review"],"apiKeySource":"none","claude_code_version":"2.0.53","output_style":"default","agents":["general-purpose","statusline-setup","Explore","Plan","integration-administrator","database-administrator"],"skills":[],"plugins":[],"uuid":"c3f01eb7-3e58-4335-ab33-6a5fff61ca4f"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01Apx17YjT5rFMjjQ2ezWCsh","type":"message","role":"assistant","content":[{"type":"text","text":"I understand the issue - the Clock Out button isn't showing up for employees even though managers can clock them out. Let me completely redesign the clock in/out interface with a simpler, more reliable approach. I'll start fresh with a clean, straightforward design."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":92065,"cache_read_input_tokens":16310,"cache_creation":{"ephemeral_5m_input_tokens":92065,"ephemeral_1h_input_tokens":0},"output_tokens":2},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"16dea570-fc09-4378-ae32-c4d531bb72cb"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01Apx17YjT5rFMjjQ2ezWCsh","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_vrtx_01JxbkdxcFvqZap4y4GjjmAy","name":"Edit","input":{"file_path":"/home/user/vite-template/src/routes/index.tsx","old_string":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t{/* Debug: Show active shift status */}\n\t\t\t\t\t{activeShift && (\n\t\t\t\t\t\t<p className=\"text-xs text-green-600 dark:text-green-400 mt-2 font-semibold\">\n\t\t\t\t\t\t\t‚úì Currently clocked in (Shift ID: {activeShift.id.slice(0, 8)}...)\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t\t{/* YOU ARE CLOCKED IN - Status Banner */}\n\t\t\t\t\t\t\t<div className=\"bg-gradient-to-r from-green-600 to-green-500 text-white p-4 rounded-lg text-center shadow-lg\">\n\t\t\t\t\t\t\t\t<p className=\"text-2xl font-bold mb-1\">üïê YOU ARE CLOCKED IN</p>\n\t\t\t\t\t\t\t\t<p className=\"text-3xl font-mono font-bold tabular-nums\">{formatTime(elapsedTime)}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm opacity-90 mt-1\">{t.since} {formatDate(activeShift.clock_in_timestamp)}</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"bg-orange-100 dark:bg-orange-900/30 border-2 border-orange-400 p-4 rounded-lg text-center\">\n\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 mx-auto mb-2 text-orange-700\" />\n\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* CLOCK OUT BUTTON - MAIN ACTION */}\n\t\t\t\t\t\t\t<div className=\"bg-red-100 dark:bg-red-950 p-6 rounded-xl border-4 border-red-500 dark:border-red-600 shadow-2xl\">\n\t\t\t\t\t\t\t\t<div className=\"text-center mb-4\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-2xl font-bold text-red-700 dark:text-red-300 mb-2\">\n\t\t\t\t\t\t\t\t\t\t‚¨áÔ∏è CLICK HERE TO END YOUR SHIFT ‚¨áÔ∏è\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-red-600 dark:text-red-400\">\n\t\t\t\t\t\t\t\t\t\tThis will clock you out and save your time card\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-20 text-2xl font-black shadow-2xl hover:shadow-3xl transition-all hover:scale-105\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Clock className=\"w-8 h-8 mr-3\" />\n\t\t\t\t\t\t\t\t\t{String(t.clockOut).toUpperCase()}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Optional: Lunch Break */}\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"border-t-2 border-dashed border-gray-300 dark:border-gray-600 pt-6\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground text-center mb-3\">Optional: Take a lunch break</p>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 border-2\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 bg-orange-600 hover:bg-orange-700\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Details Section - Collapsible */}\n\t\t\t\t\t\t\t<details className=\"border rounded-lg p-4\">\n\t\t\t\t\t\t\t\t<summary className=\"cursor-pointer font-semibold text-base mb-4\">\n\t\t\t\t\t\t\t\t\tUpdate Location & Work Description (Optional)\n\t\t\t\t\t\t\t\t</summary>\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>","new_string":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Clock className=\"w-5 h-5\" />\n\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\t{activeShift ? \"You are currently clocked in\" : \"Clock in to start your shift\"}\n\t\t\t\t\t</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t\t{/* Show current status */}\n\t\t\t\t\t<div className={`p-6 rounded-lg border-2 ${activeShift ? 'bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700' : 'bg-gray-50 border-gray-200 dark:bg-gray-900 dark:border-gray-700'}`}>\n\t\t\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-bold\">\n\t\t\t\t\t\t\t\t\t{activeShift ? 'üü¢ Clocked In' : '‚ö™ Not Clocked In'}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{activeShift && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tStarted: {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-600 font-semibold mt-1\">\n\t\t\t\t\t\t\t\t\t\t‚òï On Lunch Break\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{activeShift && !isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"text-right\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-3xl font-mono font-bold tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Time Elapsed</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Main Action Buttons */}\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t{/* Clock Out Button - ALWAYS VISIBLE when clocked in */}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-2\" />\n\t\t\t\t\t\t\t\tCLOCK OUT\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t{/* Lunch Buttons */}\n\t\t\t\t\t\t\t<div className=\"border-t pt-4\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mb-3\">Lunch Break (Optional)</p>\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\tEnd Lunch Break\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\tStart Lunch Break\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Location and Description */}\n\t\t\t\t\t\t\t<div className=\"border-t pt-4 space-y-4\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t{/* Clock In Form */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold bg-green-600 hover:bg-green-700\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-2\" />\n\t\t\t\t\t\t\t\tCLOCK IN\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":92065,"cache_read_input_tokens":16310,"cache_creation":{"ephemeral_5m_input_tokens":92065,"ephemeral_1h_input_tokens":0},"output_tokens":3361},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"9f8b978c-e0ba-411b-87dc-195e1fa11a64"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_vrtx_01JxbkdxcFvqZap4y4GjjmAy","type":"tool_result","content":"The file /home/user/vite-template/src/routes/index.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n   503‚Üí\t\tif (minutes === null || minutes === undefined) return \"‚Äî\";\n   504‚Üí\t\treturn `${Math.round(minutes)} min`;\n   505‚Üí\t};\n   506‚Üí\n   507‚Üí\treturn (\n   508‚Üí\t\t<div className=\"space-y-6\">\n   509‚Üí\t\t\t<Card>\n   510‚Üí\t\t\t\t<CardHeader>\n   511‚Üí\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n   512‚Üí\t\t\t\t\t\t<Clock className=\"w-5 h-5\" />\n   513‚Üí\t\t\t\t\t\t{t.clockInOut}\n   514‚Üí\t\t\t\t\t</CardTitle>\n   515‚Üí\t\t\t\t\t<CardDescription>\n   516‚Üí\t\t\t\t\t\t{activeShift ? \"You are currently clocked in\" : \"Clock in to start your shift\"}\n   517‚Üí\t\t\t\t\t</CardDescription>\n   518‚Üí\t\t\t\t</CardHeader>\n   519‚Üí\t\t\t\t<CardContent className=\"space-y-6\">\n   520‚Üí\t\t\t\t\t{/* Show current status */}\n   521‚Üí\t\t\t\t\t<div className={`p-6 rounded-lg border-2 ${activeShift ? 'bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700' : 'bg-gray-50 border-gray-200 dark:bg-gray-900 dark:border-gray-700'}`}>\n   522‚Üí\t\t\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\n   523‚Üí\t\t\t\t\t\t\t<div>\n   524‚Üí\t\t\t\t\t\t\t\t<p className=\"text-lg font-bold\">\n   525‚Üí\t\t\t\t\t\t\t\t\t{activeShift ? 'üü¢ Clocked In' : '‚ö™ Not Clocked In'}\n   526‚Üí\t\t\t\t\t\t\t\t</p>\n   527‚Üí\t\t\t\t\t\t\t\t{activeShift && (\n   528‚Üí\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n   529‚Üí\t\t\t\t\t\t\t\t\t\tStarted: {formatDate(activeShift.clock_in_timestamp)}\n   530‚Üí\t\t\t\t\t\t\t\t\t</p>\n   531‚Üí\t\t\t\t\t\t\t\t)}\n   532‚Üí\t\t\t\t\t\t\t\t{isOnLunch && (\n   533‚Üí\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-600 font-semibold mt-1\">\n   534‚Üí\t\t\t\t\t\t\t\t\t\t‚òï On Lunch Break\n   535‚Üí\t\t\t\t\t\t\t\t\t</p>\n   536‚Üí\t\t\t\t\t\t\t\t)}\n   537‚Üí\t\t\t\t\t\t\t</div>\n   538‚Üí\t\t\t\t\t\t\t{activeShift && !isOnLunch && (\n   539‚Üí\t\t\t\t\t\t\t\t<div className=\"text-right\">\n   540‚Üí\t\t\t\t\t\t\t\t\t<p className=\"text-3xl font-mono font-bold tabular-nums\">\n   541‚Üí\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n   542‚Üí\t\t\t\t\t\t\t\t\t</p>\n   543‚Üí\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Time Elapsed</p>\n   544‚Üí\t\t\t\t\t\t\t\t</div>\n   545‚Üí\t\t\t\t\t\t\t)}\n   546‚Üí\t\t\t\t\t\t</div>\n   547‚Üí\t\t\t\t\t</div>\n   548‚Üí\n   549‚Üí\t\t\t\t\t{/* Main Action Buttons */}\n   550‚Üí\t\t\t\t\t{activeShift ? (\n   551‚Üí\t\t\t\t\t\t<div className=\"space-y-4\">\n   552‚Üí\t\t\t\t\t\t\t{/* Clock Out Button - ALWAYS VISIBLE when clocked in */}\n   553‚Üí\t\t\t\t\t\t\t<Button\n   554‚Üí\t\t\t\t\t\t\t\tonClick={handleClockOut}\n   555‚Üí\t\t\t\t\t\t\t\tvariant=\"destructive\"\n   556‚Üí\t\t\t\t\t\t\t\tsize=\"lg\"\n   557‚Üí\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold\"\n   558‚Üí\t\t\t\t\t\t\t>\n   559‚Üí\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-2\" />\n   560‚Üí\t\t\t\t\t\t\t\tCLOCK OUT\n   561‚Üí\t\t\t\t\t\t\t</Button>\n   562‚Üí\n   563‚Üí\t\t\t\t\t\t\t{/* Lunch Buttons */}\n   564‚Üí\t\t\t\t\t\t\t<div className=\"border-t pt-4\">\n   565‚Üí\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mb-3\">Lunch Break (Optional)</p>\n   566‚Üí\t\t\t\t\t\t\t\t{isOnLunch ? (\n   567‚Üí\t\t\t\t\t\t\t\t\t<Button\n   568‚Üí\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n   569‚Üí\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12\"\n   570‚Üí\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n   571‚Üí\t\t\t\t\t\t\t\t\t>\n   572‚Üí\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n   573‚Üí\t\t\t\t\t\t\t\t\t\tEnd Lunch Break\n   574‚Üí\t\t\t\t\t\t\t\t\t</Button>\n   575‚Üí\t\t\t\t\t\t\t\t) : (\n   576‚Üí\t\t\t\t\t\t\t\t\t<Button\n   577‚Üí\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n   578‚Üí\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12\"\n   579‚Üí\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n   580‚Üí\t\t\t\t\t\t\t\t\t>\n   581‚Üí\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n   582‚Üí\t\t\t\t\t\t\t\t\t\tStart Lunch Break\n   583‚Üí\t\t\t\t\t\t\t\t\t</Button>\n   584‚Üí\t\t\t\t\t\t\t\t)}\n   585‚Üí\t\t\t\t\t\t\t</div>\n   586‚Üí\n   587‚Üí\t\t\t\t\t\t\t{/* Location and Description */}\n   588‚Üí\t\t\t\t\t\t\t<div className=\"border-t pt-4 space-y-4\">\n   589‚Üí\t\t\t\t\t\t\t\t<div>\n   590‚Üí\t\t\t\t\t\t\t\t\t<Label>{t.location}</Label>\n   591‚Üí\t\t\t\t\t\t\t\t\t<Input\n   592‚Üí\t\t\t\t\t\t\t\t\t\tvalue={location}\n   593‚Üí\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n   594‚Üí\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n   595‚Üí\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n   596‚Üí\t\t\t\t\t\t\t\t\t/>\n   597‚Üí\t\t\t\t\t\t\t\t</div>\n   598‚Üí\t\t\t\t\t\t\t\t<div>\n   599‚Üí\t\t\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n   600‚Üí\t\t\t\t\t\t\t\t\t<Textarea\n   601‚Üí\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n   602‚Üí\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n   603‚Üí\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n   604‚Üí\t\t\t\t\t\t\t\t\t\trows={3}\n   605‚Üí\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n   606‚Üí\t\t\t\t\t\t\t\t\t/>\n   607‚Üí\t\t\t\t\t\t\t\t</div>\n   608‚Üí\t\t\t\t\t\t\t</div>\n   609‚Üí\t\t\t\t\t\t</div>\n   610‚Üí\t\t\t\t\t) : (\n   611‚Üí\t\t\t\t\t\t<div className=\"space-y-4\">\n   612‚Üí\t\t\t\t\t\t\t{/* Clock In Form */}\n   613‚Üí\t\t\t\t\t\t\t<div>\n   614‚Üí\t\t\t\t\t\t\t\t<Label>{t.location}</Label>\n   615‚Üí\t\t\t\t\t\t\t\t<Input\n   616‚Üí\t\t\t\t\t\t\t\t\tvalue={location}\n   617‚Üí\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n   618‚Üí\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n   619‚Üí\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n   620‚Üí\t\t\t\t\t\t\t\t/>\n   621‚Üí\t\t\t\t\t\t\t</div>\n   622‚Üí\t\t\t\t\t\t\t<div>\n   623‚Üí\t\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n   624‚Üí\t\t\t\t\t\t\t\t<Textarea\n   625‚Üí\t\t\t\t\t\t\t\t\tvalue={workDescription}\n   626‚Üí\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n   627‚Üí\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n   628‚Üí\t\t\t\t\t\t\t\t\trows={3}\n   629‚Üí\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n   630‚Üí\t\t\t\t\t\t\t\t/>\n   631‚Üí\t\t\t\t\t\t\t</div>\n   632‚Üí\t\t\t\t\t\t\t<Button\n   633‚Üí\t\t\t\t\t\t\t\tonClick={handleClockIn}\n   634‚Üí\t\t\t\t\t\t\t\tsize=\"lg\"\n   635‚Üí\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold bg-green-600 hover:bg-green-700\"\n   636‚Üí\t\t\t\t\t\t\t>\n   637‚Üí\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-2\" />\n   638‚Üí\t\t\t\t\t\t\t\tCLOCK IN\n   639‚Üí\t\t\t\t\t\t\t</Button>\n   640‚Üí\t\t\t\t\t\t</div>\n   641‚Üí\t\t\t\t\t)}\n   642‚Üí\t\t\t\t</CardContent>\n   643‚Üí\t\t\t</Card>\n   644‚Üí\n   645‚Üí\t\t\t<Card>\n   646‚Üí\t\t\t\t<CardHeader>\n   647‚Üí\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">"}]},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"954c33b5-99f8-4bbd-85d0-86d472deaf92","tool_use_result":{"filePath":"/home/user/vite-template/src/routes/index.tsx","oldString":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t{/* Debug: Show active shift status */}\n\t\t\t\t\t{activeShift && (\n\t\t\t\t\t\t<p className=\"text-xs text-green-600 dark:text-green-400 mt-2 font-semibold\">\n\t\t\t\t\t\t\t‚úì Currently clocked in (Shift ID: {activeShift.id.slice(0, 8)}...)\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t\t{/* YOU ARE CLOCKED IN - Status Banner */}\n\t\t\t\t\t\t\t<div className=\"bg-gradient-to-r from-green-600 to-green-500 text-white p-4 rounded-lg text-center shadow-lg\">\n\t\t\t\t\t\t\t\t<p className=\"text-2xl font-bold mb-1\">üïê YOU ARE CLOCKED IN</p>\n\t\t\t\t\t\t\t\t<p className=\"text-3xl font-mono font-bold tabular-nums\">{formatTime(elapsedTime)}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm opacity-90 mt-1\">{t.since} {formatDate(activeShift.clock_in_timestamp)}</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"bg-orange-100 dark:bg-orange-900/30 border-2 border-orange-400 p-4 rounded-lg text-center\">\n\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 mx-auto mb-2 text-orange-700\" />\n\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* CLOCK OUT BUTTON - MAIN ACTION */}\n\t\t\t\t\t\t\t<div className=\"bg-red-100 dark:bg-red-950 p-6 rounded-xl border-4 border-red-500 dark:border-red-600 shadow-2xl\">\n\t\t\t\t\t\t\t\t<div className=\"text-center mb-4\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-2xl font-bold text-red-700 dark:text-red-300 mb-2\">\n\t\t\t\t\t\t\t\t\t\t‚¨áÔ∏è CLICK HERE TO END YOUR SHIFT ‚¨áÔ∏è\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-red-600 dark:text-red-400\">\n\t\t\t\t\t\t\t\t\t\tThis will clock you out and save your time card\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-20 text-2xl font-black shadow-2xl hover:shadow-3xl transition-all hover:scale-105\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Clock className=\"w-8 h-8 mr-3\" />\n\t\t\t\t\t\t\t\t\t{String(t.clockOut).toUpperCase()}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Optional: Lunch Break */}\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"border-t-2 border-dashed border-gray-300 dark:border-gray-600 pt-6\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground text-center mb-3\">Optional: Take a lunch break</p>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 border-2\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 bg-orange-600 hover:bg-orange-700\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Details Section - Collapsible */}\n\t\t\t\t\t\t\t<details className=\"border rounded-lg p-4\">\n\t\t\t\t\t\t\t\t<summary className=\"cursor-pointer font-semibold text-base mb-4\">\n\t\t\t\t\t\t\t\t\tUpdate Location & Work Description (Optional)\n\t\t\t\t\t\t\t\t</summary>\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>","newString":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<Clock className=\"w-5 h-5\" />\n\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>\n\t\t\t\t\t\t{activeShift ? \"You are currently clocked in\" : \"Clock in to start your shift\"}\n\t\t\t\t\t</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t\t{/* Show current status */}\n\t\t\t\t\t<div className={`p-6 rounded-lg border-2 ${activeShift ? 'bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700' : 'bg-gray-50 border-gray-200 dark:bg-gray-900 dark:border-gray-700'}`}>\n\t\t\t\t\t\t<div className=\"flex items-center justify-between mb-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-bold\">\n\t\t\t\t\t\t\t\t\t{activeShift ? 'üü¢ Clocked In' : '‚ö™ Not Clocked In'}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t{activeShift && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\tStarted: {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-600 font-semibold mt-1\">\n\t\t\t\t\t\t\t\t\t\t‚òï On Lunch Break\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{activeShift && !isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"text-right\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-3xl font-mono font-bold tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-muted-foreground\">Time Elapsed</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{/* Main Action Buttons */}\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t{/* Clock Out Button - ALWAYS VISIBLE when clocked in */}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-2\" />\n\t\t\t\t\t\t\t\tCLOCK OUT\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t{/* Lunch Buttons */}\n\t\t\t\t\t\t\t<div className=\"border-t pt-4\">\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground mb-3\">Lunch Break (Optional)</p>\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\tEnd Lunch Break\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\tStart Lunch Break\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Location and Description */}\n\t\t\t\t\t\t\t<div className=\"border-t pt-4 space-y-4\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t{/* Clock In Form */}\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"mt-2\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold bg-green-600 hover:bg-green-700\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-2\" />\n\t\t\t\t\t\t\t\tCLOCK IN\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>","originalFile":"import { createFileRoute } from \"@tanstack/react-router\";\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Clock, Users, CalendarDays, Timer, Languages, Coffee, UserPlus, FileText, AlertCircle, Plus, Trash2 } from \"lucide-react\";\nimport { UserORM, type UserModel, UserRole } from \"@/sdk/database/orm/orm_user\";\nimport { TimeCardEntryORM, type TimeCardEntryModel } from \"@/sdk/database/orm/orm_time_card_entry\";\n\nexport const Route = createFileRoute(\"/\")({\n\tcomponent: App,\n});\n\ntype Language = 'en' | 'es';\n\nconst translations = {\n\ten: {\n\t\tappTitle: \"Employee Time Tracking\",\n\t\tselectAccount: \"Select your account to continue\",\n\t\tselectUser: \"Select User\",\n\t\tchooseAccount: \"Choose your account\",\n\t\tmanager: \"Manager\",\n\t\temployee: \"Employee\",\n\t\tswitchUser: \"Switch User\",\n\t\ttimeTrackingSystem: \"Time Tracking System\",\n\t\twelcome: \"Welcome\",\n\t\tclockInOut: \"Clock In/Out\",\n\t\tcurrentlyClocked: \"Currently Clocked In\",\n\t\tsince: \"Since\",\n\t\telapsedTime: \"Elapsed Time\",\n\t\tclockOut: \"Clock Out\",\n\t\tnotClocked: \"Not currently clocked in\",\n\t\tclockIn: \"Clock In\",\n\t\ttimeCardHistory: \"Time Card History\",\n\t\trecentRecords: \"Your recent clock in/out records\",\n\t\tnoTimeCards: \"No time cards yet\",\n\t\tclockInTime: \"Clock In\",\n\t\tclockOutTime: \"Clock Out\",\n\t\thours: \"Hours\",\n\t\tstatus: \"Status\",\n\t\tcompleted: \"Completed\",\n\t\tactive: \"Active\",\n\t\ttotalEmployees: \"Total Employees\",\n\t\thoursToday: \"Hours Today\",\n\t\thoursThisWeek: \"Hours This Week\",\n\t\tallEmployeeTimeCards: \"All Employee Time Cards\",\n\t\tviewManageRecords: \"View and manage all employee time records\",\n\t\tfilterByEmployee: \"Filter by Employee\",\n\t\tallEmployees: \"All Employees\",\n\t\tfilterByDate: \"Filter by Date\",\n\t\tclearFilters: \"Clear Filters\",\n\t\tnoTimeCardsFound: \"No time cards found\",\n\t\temployeeName: \"Employee\",\n\t\tactions: \"Actions\",\n\t\tedit: \"Edit\",\n\t\teditTimeCard: \"Edit Time Card\",\n\t\tcancel: \"Cancel\",\n\t\tsaveChanges: \"Save Changes\",\n\t\tlocation: \"Location\",\n\t\twhereWorked: \"Where did you work?\",\n\t\tworkDescription: \"Work Description\",\n\t\twhatDid: \"What did you do today?\",\n\t\tlocationPlaceholder: \"e.g., Office, Remote, Client Site\",\n\t\tdescriptionPlaceholder: \"Describe your work activities...\",\n\t\tstartLunch: \"Start Lunch Break\",\n\t\tendLunch: \"End Lunch Break\",\n\t\tonLunchBreak: \"On Lunch Break\",\n\t\tlunchBreak: \"Lunch Break\",\n\t\tlunchDuration: \"Lunch\",\n\t\tlunchStartTime: \"Lunch Start\",\n\t\tlunchEndTime: \"Lunch End\",\n\t\ttimeCards: \"Time Cards\",\n\t\treports: \"Reports\",\n\t\temployees: \"Employees\",\n\t\taddEmployee: \"Add Employee\",\n\t\teditEmployee: \"Edit Employee\",\n\t\tdeleteEmployee: \"Delete Employee\",\n\t\tname: \"Name\",\n\t\temail: \"Email\",\n\t\tphone: \"Phone\",\n\t\trole: \"Role\",\n\t\tdelete: \"Delete\",\n\t\tweeklyReport: \"Weekly Report\",\n\t\tselectWeek: \"Select Week\",\n\t\tregularHours: \"Regular\",\n\t\tovertimeHours: \"Overtime\",\n\t\ttotalHours: \"Total\",\n\t\tnoReportData: \"No data for selected week\",\n\t\taddTimeCard: \"Add Time Card\",\n\t\tmanualEntry: \"Manual Entry\",\n\t\taddManualEntry: \"Add Manual Time Card\",\n\t\tconfirmDelete: \"Are you sure you want to delete this employee?\",\n\t\tovertimeAlert: \"Overtime Alert\",\n\t\tprintReport: \"Print Report\",\n\t\texportCSV: \"Export to CSV\",\n\t\tdetailedReport: \"Detailed Time Card Report\",\n\t\tdate: \"Date\",\n\t\tday: \"Day\",\n\t\tdeleteTimeCard: \"Delete Time Card\",\n\t\tconfirmDeleteTimeCard: \"Are you sure you want to delete this time card? This action cannot be undone.\",\n\t},\n\tes: {\n\t\tappTitle: \"Registro de Tiempo de Empleados\",\n\t\tselectAccount: \"Selecciona tu cuenta para continuar\",\n\t\tselectUser: \"Seleccionar Usuario\",\n\t\tchooseAccount: \"Elige tu cuenta\",\n\t\tmanager: \"Gerente\",\n\t\temployee: \"Empleado\",\n\t\tswitchUser: \"Cambiar Usuario\",\n\t\ttimeTrackingSystem: \"Sistema de Registro de Tiempo\",\n\t\twelcome: \"Bienvenido\",\n\t\tclockInOut: \"Entrada/Salida\",\n\t\tcurrentlyClocked: \"Actualmente Registrado\",\n\t\tsince: \"Desde\",\n\t\telapsedTime: \"Tiempo Transcurrido\",\n\t\tclockOut: \"Registrar Salida\",\n\t\tnotClocked: \"No est√° registrado actualmente\",\n\t\tclockIn: \"Registrar Entrada\",\n\t\ttimeCardHistory: \"Historial de Tarjetas de Tiempo\",\n\t\trecentRecords: \"Tus registros recientes de entrada/salida\",\n\t\tnoTimeCards: \"No hay tarjetas de tiempo todav√≠a\",\n\t\tclockInTime: \"Entrada\",\n\t\tclockOutTime: \"Salida\",\n\t\thours: \"Horas\",\n\t\tstatus: \"Estado\",\n\t\tcompleted: \"Completado\",\n\t\tactive: \"Activo\",\n\t\ttotalEmployees: \"Total de Empleados\",\n\t\thoursToday: \"Horas Hoy\",\n\t\thoursThisWeek: \"Horas Esta Semana\",\n\t\tallEmployeeTimeCards: \"Todas las Tarjetas de Tiempo\",\n\t\tviewManageRecords: \"Ver y gestionar todos los registros de empleados\",\n\t\tfilterByEmployee: \"Filtrar por Empleado\",\n\t\tallEmployees: \"Todos los Empleados\",\n\t\tfilterByDate: \"Filtrar por Fecha\",\n\t\tclearFilters: \"Limpiar Filtros\",\n\t\tnoTimeCardsFound: \"No se encontraron tarjetas de tiempo\",\n\t\temployeeName: \"Empleado\",\n\t\tactions: \"Acciones\",\n\t\tedit: \"Editar\",\n\t\teditTimeCard: \"Editar Tarjeta de Tiempo\",\n\t\tcancel: \"Cancelar\",\n\t\tsaveChanges: \"Guardar Cambios\",\n\t\tlocation: \"Ubicaci√≥n\",\n\t\twhereWorked: \"¬øD√≥nde trabajaste?\",\n\t\tworkDescription: \"Descripci√≥n del Trabajo\",\n\t\twhatDid: \"¬øQu√© hiciste hoy?\",\n\t\tlocationPlaceholder: \"ej., Oficina, Remoto, Sitio del Cliente\",\n\t\tdescriptionPlaceholder: \"Describe tus actividades laborales...\",\n\t\tstartLunch: \"Iniciar Almuerzo\",\n\t\tendLunch: \"Terminar Almuerzo\",\n\t\tonLunchBreak: \"En Almuerzo\",\n\t\tlunchBreak: \"Almuerzo\",\n\t\tlunchDuration: \"Almuerzo\",\n\t\tlunchStartTime: \"Inicio Almuerzo\",\n\t\tlunchEndTime: \"Fin Almuerzo\",\n\t\ttimeCards: \"Tarjetas de Tiempo\",\n\t\treports: \"Informes\",\n\t\temployees: \"Empleados\",\n\t\taddEmployee: \"Agregar Empleado\",\n\t\teditEmployee: \"Editar Empleado\",\n\t\tdeleteEmployee: \"Eliminar Empleado\",\n\t\tname: \"Nombre\",\n\t\temail: \"Correo\",\n\t\tphone: \"Tel√©fono\",\n\t\trole: \"Rol\",\n\t\tdelete: \"Eliminar\",\n\t\tweeklyReport: \"Informe Semanal\",\n\t\tselectWeek: \"Seleccionar Semana\",\n\t\tregularHours: \"Regular\",\n\t\tovertimeHours: \"Tiempo Extra\",\n\t\ttotalHours: \"Total\",\n\t\tnoReportData: \"No hay datos para la semana seleccionada\",\n\t\taddTimeCard: \"Agregar Tarjeta\",\n\t\tmanualEntry: \"Entrada Manual\",\n\t\taddManualEntry: \"Agregar Tarjeta Manual\",\n\t\tconfirmDelete: \"¬øEst√° seguro de eliminar este empleado?\",\n\t\tovertimeAlert: \"Alerta de Tiempo Extra\",\n\t\tprintReport: \"Imprimir Informe\",\n\t\texportCSV: \"Exportar a CSV\",\n\t\tdetailedReport: \"Informe Detallado de Tarjetas de Tiempo\",\n\t\tdate: \"Fecha\",\n\t\tday: \"D√≠a\",\n\t\tdeleteTimeCard: \"Eliminar Tarjeta de Tiempo\",\n\t\tconfirmDeleteTimeCard: \"¬øEst√° seguro de eliminar esta tarjeta de tiempo? Esta acci√≥n no se puede deshacer.\",\n\t}\n};\n\nfunction App() {\n\tconst [currentUser, setCurrentUser] = useState<UserModel | null>(null);\n\tconst [users, setUsers] = useState<UserModel[]>([]);\n\tconst [showUserSelect, setShowUserSelect] = useState(true);\n\tconst [language, setLanguage] = useState<Language>('en');\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadUsers();\n\t}, []);\n\n\tconst loadUsers = async () => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tconst allUsers = await userORM.getAllUser();\n\n\t\t// If no users exist, create demo users\n\t\tif (allUsers.length === 0) {\n\t\t\tconst demoUsers = await userORM.insertUser([\n\t\t\t\t{\n\t\t\t\t\tname: \"John Smith\",\n\t\t\t\t\temail: \"john@example.com\",\n\t\t\t\t\trole: UserRole.Employee,\n\t\t\t\t} as UserModel,\n\t\t\t\t{\n\t\t\t\t\tname: \"Sarah Johnson\",\n\t\t\t\t\temail: \"sarah@example.com\",\n\t\t\t\t\trole: UserRole.Employee,\n\t\t\t\t} as UserModel,\n\t\t\t\t{\n\t\t\t\t\tname: \"Mike Manager\",\n\t\t\t\t\temail: \"mike@example.com\",\n\t\t\t\t\trole: UserRole.Manager,\n\t\t\t\t} as UserModel,\n\t\t\t]);\n\t\t\tsetUsers(demoUsers);\n\t\t} else {\n\t\t\tsetUsers(allUsers);\n\t\t}\n\t};\n\n\tconst handleUserSelect = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\tif (user) {\n\t\t\tsetCurrentUser(user);\n\t\t\tsetShowUserSelect(false);\n\t\t}\n\t};\n\n\tconst handleLogout = () => {\n\t\tsetCurrentUser(null);\n\t\tsetShowUserSelect(true);\n\t};\n\n\tconst toggleLanguage = () => {\n\t\tsetLanguage(prev => prev === 'en' ? 'es' : 'en');\n\t};\n\n\tif (showUserSelect || !currentUser) {\n\t\treturn (\n\t\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4\">\n\t\t\t\t<div className=\"absolute top-4 right-4\">\n\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t{language === 'en' ? 'Espa√±ol' : 'English'}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<Card className=\"w-full max-w-md\">\n\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t<CardTitle className=\"text-2xl\">{t.appTitle}</CardTitle>\n\t\t\t\t\t\t<CardDescription>{t.selectAccount}</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label>{t.selectUser}</Label>\n\t\t\t\t\t\t\t<Select onValueChange={handleUserSelect}>\n\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<SelectValue placeholder={t.chooseAccount} />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={user.id} value={user.id}>\n\t\t\t\t\t\t\t\t\t\t\t{user.name} - {user.role === UserRole.Manager ? t.manager : t.employee}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n\t\t\t<div className=\"container mx-auto p-6 space-y-6\">\n\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1 className=\"text-3xl font-bold\">{t.timeTrackingSystem}</h1>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t{t.welcome}, {currentUser.name} ({currentUser.role === UserRole.Manager ? t.manager : t.employee})\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{language === 'en' ? 'Espa√±ol' : 'English'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleLogout} variant=\"outline\">\n\t\t\t\t\t\t\t{t.switchUser}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{currentUser.role === UserRole.Employee ? (\n\t\t\t\t\t<EmployeeView user={currentUser} language={language} />\n\t\t\t\t) : (\n\t\t\t\t\t<ManagerView user={currentUser} users={users} language={language} onUsersChange={loadUsers} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction EmployeeView({ user, language }: { user: UserModel; language: Language }) {\n\tconst [activeShift, setActiveShift] = useState<TimeCardEntryModel | null>(null);\n\tconst [timeCards, setTimeCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [elapsedTime, setElapsedTime] = useState(0);\n\tconst [location, setLocation] = useState(\"\");\n\tconst [workDescription, setWorkDescription] = useState(\"\");\n\tconst [isOnLunch, setIsOnLunch] = useState(false);\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadTimeCards();\n\t}, [user.id]);\n\n\tuseEffect(() => {\n\t\tlet interval: NodeJS.Timeout;\n\t\tif (activeShift && !isOnLunch) {\n\t\t\tinterval = setInterval(() => {\n\t\t\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp) * 1000;\n\t\t\t\tconst elapsed = Date.now() - clockInTime;\n\t\t\t\tsetElapsedTime(elapsed);\n\t\t\t}, 1000);\n\t\t}\n\t\treturn () => clearInterval(interval);\n\t}, [activeShift, isOnLunch]);\n\n\tconst loadTimeCards = async () => {\n\t\tconsole.log(\"Loading time cards for user:\", user.id);\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst userTimeCards = await timeCardORM.getTimeCardEntryByUserId(user.id);\n\n\t\tconsole.log(\"Found\", userTimeCards.length, \"time cards\");\n\n\t\t// Sort by clock in time (newest first)\n\t\tconst sorted = userTimeCards.sort((a, b) =>\n\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n\t\t);\n\n\t\tsetTimeCards(sorted);\n\n\t\t// Find active shift (no clock out time)\n\t\tconst active = sorted.find(tc => !tc.clock_out_timestamp);\n\t\tconsole.log(\"Active shift found:\", active ? `Yes (ID: ${active.id})` : \"No\");\n\n\t\tsetActiveShift(active || null);\n\t\tif (active) {\n\t\t\tsetLocation(active.location || \"\");\n\t\t\tsetWorkDescription(active.work_description || \"\");\n\t\t\t// Check if on lunch break\n\t\t\tconst onLunch = !!(active.lunch_start_timestamp && !active.lunch_end_timestamp);\n\t\t\tsetIsOnLunch(onLunch);\n\t\t\tconsole.log(\"On lunch:\", onLunch);\n\t\t} else {\n\t\t\tsetIsOnLunch(false);\n\t\t}\n\t};\n\n\tconst handleClockIn = async () => {\n\t\tconsole.log(\"Clock In clicked\");\n\t\ttry {\n\t\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\t\tconsole.log(\"Creating time card entry for user:\", user.id);\n\n\t\t\tawait timeCardORM.insertTimeCardEntry([{\n\t\t\t\tuser_id: user.id,\n\t\t\t\tclock_in_timestamp: now,\n\t\t\t\tlocation: location || null,\n\t\t\t\twork_description: workDescription || null,\n\t\t\t} as TimeCardEntryModel]);\n\n\t\t\tconsole.log(\"Time card entry created, reloading...\");\n\t\t\tsetLocation(\"\");\n\t\t\tsetWorkDescription(\"\");\n\t\t\tawait loadTimeCards();\n\t\t\tconsole.log(\"Clock in complete, activeShift should be set\");\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error clocking in:\", error);\n\t\t\talert(\"Error clocking in. Please try again.\");\n\t\t}\n\t};\n\n\tconst handleClockOut = async () => {\n\t\tconsole.log(\"Clock Out clicked - activeShift:\", activeShift);\n\n\t\tif (!activeShift) {\n\t\t\tconsole.error(\"No active shift to clock out!\");\n\t\t\talert(\"Error: No active shift found. Please try clocking in first.\");\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp);\n\t\t\tconst clockOutTime = parseInt(now);\n\t\t\tlet totalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time if lunch was taken\n\t\t\tif (activeShift.lunch_duration_minutes) {\n\t\t\t\ttotalHours -= activeShift.lunch_duration_minutes / 60;\n\t\t\t}\n\n\t\t\tconsole.log(\"Clocking out - Total hours:\", totalHours);\n\n\t\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t\t...activeShift,\n\t\t\t\tclock_out_timestamp: now,\n\t\t\t\ttotal_hours: totalHours,\n\t\t\t\tlocation: location || activeShift.location,\n\t\t\t\twork_description: workDescription || activeShift.work_description,\n\t\t\t});\n\n\t\t\tconsole.log(\"Clock out successful!\");\n\t\t\tsetLocation(\"\");\n\t\t\tsetWorkDescription(\"\");\n\t\t\tawait loadTimeCards();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error clocking out:\", error);\n\t\t\talert(\"Error clocking out. Please try again.\");\n\t\t}\n\t};\n\n\tconst handleStartLunch = async () => {\n\t\tif (!activeShift) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tlunch_start_timestamp: now,\n\t\t\tlocation: location || activeShift.location,\n\t\t\twork_description: workDescription || activeShift.work_description,\n\t\t});\n\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleEndLunch = async () => {\n\t\tif (!activeShift || !activeShift.lunch_start_timestamp) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tconst lunchStartTime = parseInt(activeShift.lunch_start_timestamp);\n\t\tconst lunchEndTime = parseInt(now);\n\t\tconst lunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n\n\t\t// Add to existing lunch duration if there was already one\n\t\tconst totalLunchMinutes = (activeShift.lunch_duration_minutes || 0) + lunchDurationMinutes;\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tlunch_end_timestamp: now,\n\t\t\tlunch_duration_minutes: totalLunchMinutes,\n\t\t});\n\n\t\tawait loadTimeCards();\n\t};\n\n\tconst formatTime = (ms: number) => {\n\t\tconst seconds = Math.floor(ms / 1000);\n\t\tconst hours = Math.floor(seconds / 3600);\n\t\tconst minutes = Math.floor((seconds % 3600) / 60);\n\t\tconst secs = seconds % 60;\n\t\treturn `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatHours = (hours: number | null | undefined) => {\n\t\tif (hours === null || hours === undefined) return \"‚Äî\";\n\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n\t};\n\n\tconst formatMinutes = (minutes: number | null | undefined) => {\n\t\tif (minutes === null || minutes === undefined) return \"‚Äî\";\n\t\treturn `${Math.round(minutes)} min`;\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t{/* Debug: Show active shift status */}\n\t\t\t\t\t{activeShift && (\n\t\t\t\t\t\t<p className=\"text-xs text-green-600 dark:text-green-400 mt-2 font-semibold\">\n\t\t\t\t\t\t\t‚úì Currently clocked in (Shift ID: {activeShift.id.slice(0, 8)}...)\n\t\t\t\t\t\t</p>\n\t\t\t\t\t)}\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-6\">\n\t\t\t\t\t\t\t{/* YOU ARE CLOCKED IN - Status Banner */}\n\t\t\t\t\t\t\t<div className=\"bg-gradient-to-r from-green-600 to-green-500 text-white p-4 rounded-lg text-center shadow-lg\">\n\t\t\t\t\t\t\t\t<p className=\"text-2xl font-bold mb-1\">üïê YOU ARE CLOCKED IN</p>\n\t\t\t\t\t\t\t\t<p className=\"text-3xl font-mono font-bold tabular-nums\">{formatTime(elapsedTime)}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm opacity-90 mt-1\">{t.since} {formatDate(activeShift.clock_in_timestamp)}</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"bg-orange-100 dark:bg-orange-900/30 border-2 border-orange-400 p-4 rounded-lg text-center\">\n\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 mx-auto mb-2 text-orange-700\" />\n\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* CLOCK OUT BUTTON - MAIN ACTION */}\n\t\t\t\t\t\t\t<div className=\"bg-red-100 dark:bg-red-950 p-6 rounded-xl border-4 border-red-500 dark:border-red-600 shadow-2xl\">\n\t\t\t\t\t\t\t\t<div className=\"text-center mb-4\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-2xl font-bold text-red-700 dark:text-red-300 mb-2\">\n\t\t\t\t\t\t\t\t\t\t‚¨áÔ∏è CLICK HERE TO END YOUR SHIFT ‚¨áÔ∏è\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-red-600 dark:text-red-400\">\n\t\t\t\t\t\t\t\t\t\tThis will clock you out and save your time card\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-20 text-2xl font-black shadow-2xl hover:shadow-3xl transition-all hover:scale-105\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Clock className=\"w-8 h-8 mr-3\" />\n\t\t\t\t\t\t\t\t\t{String(t.clockOut).toUpperCase()}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Optional: Lunch Break */}\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"border-t-2 border-dashed border-gray-300 dark:border-gray-600 pt-6\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground text-center mb-3\">Optional: Take a lunch break</p>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-12 border-2\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{isOnLunch && (\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 bg-orange-600 hover:bg-orange-700\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Details Section - Collapsible */}\n\t\t\t\t\t\t\t<details className=\"border rounded-lg p-4\">\n\t\t\t\t\t\t\t\t<summary className=\"cursor-pointer font-semibold text-base mb-4\">\n\t\t\t\t\t\t\t\t\tUpdate Location & Work Description (Optional)\n\t\t\t\t\t\t\t\t</summary>\n\t\t\t\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</details>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<CalendarDays className=\"w-5 h-5\" />\n\t\t\t\t\t\t{t.timeCardHistory}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>{t.recentRecords}</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t{timeCards.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCards}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t{timeCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"‚Äî\"}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nfunction ManagerView({ user, users, language, onUsersChange }: { user: UserModel; users: UserModel[]; language: Language; onUsersChange: () => void }) {\n\tconst [activeTab, setActiveTab] = useState(\"timecards\");\n\n\tconst t = translations[language];\n\n\treturn (\n\t\t<Tabs value={activeTab} onValueChange={setActiveTab}>\n\t\t\t<TabsList className=\"grid w-full grid-cols-3\">\n\t\t\t\t<TabsTrigger value=\"timecards\">\n\t\t\t\t\t<Clock className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.timeCards}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger value=\"reports\">\n\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.reports}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger value=\"employees\">\n\t\t\t\t\t<Users className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.employees}\n\t\t\t\t</TabsTrigger>\n\t\t\t</TabsList>\n\n\t\t\t<TabsContent value=\"timecards\" className=\"space-y-4\">\n\t\t\t\t<TimeCardsTab users={users} language={language} />\n\t\t\t</TabsContent>\n\n\t\t\t<TabsContent value=\"reports\" className=\"space-y-4\">\n\t\t\t\t<ReportsTab users={users} language={language} />\n\t\t\t</TabsContent>\n\n\t\t\t<TabsContent value=\"employees\" className=\"space-y-4\">\n\t\t\t\t<EmployeesTab users={users} language={language} onUsersChange={onUsersChange} />\n\t\t\t</TabsContent>\n\t\t</Tabs>\n\t);\n}\n\nfunction TimeCardsTab({ users, language }: { users: UserModel[]; language: Language }) {\n\tconst [allTimeCards, setAllTimeCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [filteredCards, setFilteredCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [selectedEmployee, setSelectedEmployee] = useState<string>(\"all\");\n\tconst [dateFilter, setDateFilter] = useState<string>(\"\");\n\tconst [editingCard, setEditingCard] = useState<TimeCardEntryModel | null>(null);\n\tconst [editClockIn, setEditClockIn] = useState(\"\");\n\tconst [editClockOut, setEditClockOut] = useState(\"\");\n\tconst [editLocation, setEditLocation] = useState(\"\");\n\tconst [editWorkDescription, setEditWorkDescription] = useState(\"\");\n\tconst [editLunchStart, setEditLunchStart] = useState(\"\");\n\tconst [editLunchEnd, setEditLunchEnd] = useState(\"\");\n\tconst [showManualEntry, setShowManualEntry] = useState(false);\n\tconst [manualEntryUserId, setManualEntryUserId] = useState<string>(\"\");\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadAllTimeCards();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tapplyFilters();\n\t}, [allTimeCards, selectedEmployee, dateFilter]);\n\n\tconst loadAllTimeCards = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n\n\t\t// Sort by clock in time (newest first)\n\t\tconst sorted = allCards.sort((a, b) =>\n\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n\t\t);\n\n\t\tsetAllTimeCards(sorted);\n\t};\n\n\tconst applyFilters = () => {\n\t\tlet filtered = [...allTimeCards];\n\n\t\t// Filter by employee\n\t\tif (selectedEmployee !== \"all\") {\n\t\t\tfiltered = filtered.filter(tc => tc.user_id === selectedEmployee);\n\t\t}\n\n\t\t// Filter by date\n\t\tif (dateFilter) {\n\t\t\tconst filterDate = new Date(dateFilter);\n\t\t\tconst filterTimestamp = Math.floor(filterDate.getTime() / 1000);\n\t\t\tconst nextDayTimestamp = filterTimestamp + 86400; // +24 hours\n\n\t\t\tfiltered = filtered.filter(tc => {\n\t\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\t\treturn clockIn >= filterTimestamp && clockIn < nextDayTimestamp;\n\t\t\t});\n\t\t}\n\n\t\tsetFilteredCards(filtered);\n\t};\n\n\tconst getUserName = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\treturn user?.name || \"Unknown\";\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatHours = (hours: number | null | undefined) => {\n\t\tif (hours === null || hours === undefined) return \"‚Äî\";\n\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n\t};\n\n\tconst formatMinutes = (minutes: number | null | undefined) => {\n\t\tif (minutes === null || minutes === undefined) return \"‚Äî\";\n\t\treturn `${Math.round(minutes)} min`;\n\t};\n\n\tconst calculateTotalHours = (period: 'day' | 'week') => {\n\t\tconst now = Date.now() / 1000;\n\t\tconst periodSeconds = period === 'day' ? 86400 : 604800; // 1 day or 7 days\n\t\tconst startTime = now - periodSeconds;\n\n\t\tconst relevantCards = allTimeCards.filter(tc => {\n\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\treturn clockIn >= startTime && tc.total_hours;\n\t\t});\n\n\t\treturn relevantCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n\t};\n\n\tconst handleEditCard = (card: TimeCardEntryModel) => {\n\t\tsetEditingCard(card);\n\n\t\t// Helper function to safely convert timestamp to ISO string\n\t\tconst safeTimestampToISO = (timestamp: string | null | undefined): string => {\n\t\t\tif (!timestamp) return \"\";\n\t\t\tconst parsed = parseInt(timestamp);\n\t\t\tif (isNaN(parsed) || parsed <= 0) return \"\";\n\t\t\tconst date = new Date(parsed * 1000);\n\t\t\tif (isNaN(date.getTime())) return \"\";\n\t\t\treturn date.toISOString().slice(0, 16);\n\t\t};\n\n\t\tsetEditClockIn(safeTimestampToISO(card.clock_in_timestamp) || new Date().toISOString().slice(0, 16));\n\t\tsetEditClockOut(safeTimestampToISO(card.clock_out_timestamp));\n\t\tsetEditLocation(card.location || \"\");\n\t\tsetEditWorkDescription(card.work_description || \"\");\n\t\tsetEditLunchStart(safeTimestampToISO(card.lunch_start_timestamp));\n\t\tsetEditLunchEnd(safeTimestampToISO(card.lunch_end_timestamp));\n\t};\n\n\tconst handleSaveEdit = async () => {\n\t\tif (!editingCard) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst clockInTimestamp = Math.floor(new Date(editClockIn).getTime() / 1000).toString();\n\t\tconst clockOutTimestamp = editClockOut\n\t\t\t? Math.floor(new Date(editClockOut).getTime() / 1000).toString()\n\t\t\t: null;\n\t\tconst lunchStartTimestamp = editLunchStart\n\t\t\t? Math.floor(new Date(editLunchStart).getTime() / 1000).toString()\n\t\t\t: null;\n\t\tconst lunchEndTimestamp = editLunchEnd\n\t\t\t? Math.floor(new Date(editLunchEnd).getTime() / 1000).toString()\n\t\t\t: null;\n\n\t\tlet totalHours = null;\n\t\tlet lunchDurationMinutes = null;\n\n\t\t// Calculate lunch duration\n\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n\t\t\tconst lunchStart = parseInt(lunchStartTimestamp);\n\t\t\tconst lunchEnd = parseInt(lunchEndTimestamp);\n\t\t\tlunchDurationMinutes = (lunchEnd - lunchStart) / 60;\n\t\t}\n\n\t\t// Calculate total hours\n\t\tif (clockOutTimestamp) {\n\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time\n\t\t\tif (lunchDurationMinutes) {\n\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n\t\t\t}\n\t\t}\n\n\t\tawait timeCardORM.setTimeCardEntryById(editingCard.id, {\n\t\t\t...editingCard,\n\t\t\tclock_in_timestamp: clockInTimestamp,\n\t\t\tclock_out_timestamp: clockOutTimestamp,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: editLocation || null,\n\t\t\twork_description: editWorkDescription || null,\n\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n\t\t});\n\n\t\tsetEditingCard(null);\n\t\tawait loadAllTimeCards();\n\t};\n\n\tconst handleDeleteTimeCard = async (card: TimeCardEntryModel) => {\n\t\tif (!window.confirm(t.confirmDeleteTimeCard)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tawait timeCardORM.deleteTimeCardEntryById(card.id);\n\t\tawait loadAllTimeCards();\n\t};\n\n\tconst handleAddManualEntry = (userId: string) => {\n\t\tsetManualEntryUserId(userId);\n\t\tsetShowManualEntry(true);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Users className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.totalEmployees}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{users.filter(u => u.role === UserRole.Employee).length}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Timer className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.hoursToday}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('day').toFixed(2)}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<CalendarDays className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.hoursThisWeek}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('week').toFixed(2)}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.allEmployeeTimeCards}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>{t.viewManageRecords}</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button onClick={() => handleAddManualEntry(\"\")} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<div className=\"flex gap-4 flex-wrap\">\n\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n\t\t\t\t\t\t\t<Label>{t.filterByEmployee}</Label>\n\t\t\t\t\t\t\t<Select value={selectedEmployee} onValueChange={setSelectedEmployee}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value=\"all\">{t.allEmployees}</SelectItem>\n\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t{u.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n\t\t\t\t\t\t\t<Label>{t.filterByDate}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\tvalue={dateFilter}\n\t\t\t\t\t\t\t\tonChange={(e) => setDateFilter(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{(selectedEmployee !== \"all\" || dateFilter) && (\n\t\t\t\t\t\t\t<div className=\"flex items-end\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelectedEmployee(\"all\");\n\t\t\t\t\t\t\t\t\t\tsetDateFilter(\"\");\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t.clearFilters}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{filteredCards.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCardsFound}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t{filteredCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"‚Äî\"}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditCard(tc)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteTimeCard(tc)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Dialog open={!!editingCard} onOpenChange={(open) => !open && setEditingCard(null)}>\n\t\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.editTimeCard}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n\t\t\t\t\t\t\t<Input value={editingCard ? getUserName(editingCard.user_id) : \"\"} disabled />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editClockIn}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockIn(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editClockOut}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockOut(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={editLocation}\n\t\t\t\t\t\t\t\tonChange={(e) => setEditLocation(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tvalue={editWorkDescription}\n\t\t\t\t\t\t\t\tonChange={(e) => setEditWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.lunchStartTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editLunchStart}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchStart(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.lunchEndTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editLunchEnd}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchEnd(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingCard(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleSaveEdit}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<ManualEntryDialog\n\t\t\t\topen={showManualEntry}\n\t\t\t\tonClose={() => setShowManualEntry(false)}\n\t\t\t\tuserId={manualEntryUserId}\n\t\t\t\tonSave={loadAllTimeCards}\n\t\t\t\tlanguage={language}\n\t\t\t\tusers={users}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nfunction ReportsTab({ users, language }: { users: UserModel[]; language: Language }) {\n\tconst [weekStart, setWeekStart] = useState(\"\");\n\tconst [reportData, setReportData] = useState<{ user: UserModel; regularHours: number; overtimeHours: number; totalHours: number }[]>([]);\n\tconst [detailedTimeCards, setDetailedTimeCards] = useState<TimeCardEntryModel[]>([]);\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\t// Set default to current week\n\t\tconst today = new Date();\n\t\tconst monday = new Date(today);\n\t\tmonday.setDate(today.getDate() - today.getDay() + 1);\n\t\tsetWeekStart(monday.toISOString().slice(0, 10));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (weekStart) {\n\t\t\tloadWeeklyReport();\n\t\t}\n\t}, [weekStart, users]);\n\n\tconst loadWeeklyReport = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n\n\t\tconst weekStartDate = new Date(weekStart);\n\t\tconst weekStartTimestamp = Math.floor(weekStartDate.getTime() / 1000);\n\t\tconst weekEndTimestamp = weekStartTimestamp + 604800; // 7 days\n\n\t\tconst weekCards = allCards.filter(tc => {\n\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\treturn clockIn >= weekStartTimestamp && clockIn < weekEndTimestamp && tc.total_hours;\n\t\t});\n\n\t\t// Store detailed time cards\n\t\tsetDetailedTimeCards(weekCards.sort((a, b) => parseInt(a.clock_in_timestamp) - parseInt(b.clock_in_timestamp)));\n\n\t\tconst employeeHours = users\n\t\t\t.filter(u => u.role === UserRole.Employee)\n\t\t\t.map(user => {\n\t\t\t\tconst userCards = weekCards.filter(tc => tc.user_id === user.id);\n\t\t\t\tconst totalHours = userCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n\t\t\t\tconst regularHours = Math.min(totalHours, 40);\n\t\t\t\tconst overtimeHours = Math.max(totalHours - 40, 0);\n\n\t\t\t\treturn {\n\t\t\t\t\tuser,\n\t\t\t\t\tregularHours,\n\t\t\t\t\tovertimeHours,\n\t\t\t\t\ttotalHours,\n\t\t\t\t};\n\t\t\t});\n\n\t\tsetReportData(employeeHours);\n\t};\n\n\tconst formatHours = (hours: number) => {\n\t\treturn `${hours.toFixed(2)} hrs`;\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatDateOnly = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst getDayOfWeek = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US', { weekday: 'long' });\n\t};\n\n\tconst getUserName = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\treturn user?.name || \"Unknown\";\n\t};\n\n\tconst handlePrint = () => {\n\t\twindow.print();\n\t};\n\n\tconst handleExportCSV = () => {\n\t\tif (detailedTimeCards.length === 0) return;\n\n\t\t// Create CSV header\n\t\tconst headers = [\n\t\t\tt.employeeName,\n\t\t\tt.date,\n\t\t\tt.day,\n\t\t\tt.clockInTime,\n\t\t\tt.clockOutTime,\n\t\t\tt.location,\n\t\t\tt.workDescription,\n\t\t\tt.lunchDuration,\n\t\t\tt.hours\n\t\t];\n\n\t\t// Create CSV rows\n\t\tconst rows = detailedTimeCards.map(tc => {\n\t\t\tconst userName = getUserName(tc.user_id);\n\t\t\tconst date = formatDateOnly(tc.clock_in_timestamp);\n\t\t\tconst day = getDayOfWeek(tc.clock_in_timestamp);\n\t\t\tconst clockIn = formatDate(tc.clock_in_timestamp);\n\t\t\tconst clockOut = tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"‚Äî\";\n\t\t\tconst location = tc.location || \"‚Äî\";\n\t\t\tconst workDescription = (tc.work_description || \"‚Äî\").replace(/\"/g, '\"\"'); // Escape quotes\n\t\t\tconst lunchDuration = tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"‚Äî\";\n\t\t\tconst hours = tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"‚Äî\";\n\n\t\t\treturn [\n\t\t\t\t`\"${userName}\"`,\n\t\t\t\t`\"${date}\"`,\n\t\t\t\t`\"${day}\"`,\n\t\t\t\t`\"${clockIn}\"`,\n\t\t\t\t`\"${clockOut}\"`,\n\t\t\t\t`\"${location}\"`,\n\t\t\t\t`\"${workDescription}\"`,\n\t\t\t\t`\"${lunchDuration}\"`,\n\t\t\t\t`\"${hours}\"`\n\t\t\t].join(',');\n\t\t});\n\n\t\t// Combine header and rows\n\t\tconst csv = [headers.join(','), ...rows].join('\\n');\n\n\t\t// Create blob and download\n\t\tconst blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n\t\tconst link = document.createElement('a');\n\t\tconst url = URL.createObjectURL(blob);\n\t\tlink.setAttribute('href', url);\n\t\tlink.setAttribute('download', `weekly-report-${weekStart}.csv`);\n\t\tlink.style.visibility = 'hidden';\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.weeklyReport}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>Overtime calculated for hours worked beyond 40 hours/week</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex gap-2 print:hidden\">\n\t\t\t\t\t\t\t<Button onClick={handleExportCSV} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t\t{t.exportCSV}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={handlePrint} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t\t{t.printReport}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<div className=\"max-w-xs print:hidden\">\n\t\t\t\t\t\t<Label>{t.selectWeek}</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\tvalue={weekStart}\n\t\t\t\t\t\t\tonChange={(e) => setWeekStart(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{reportData.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noReportData}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* Summary Table */}\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.regularHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.overtimeHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.totalHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t{reportData.map(({ user, regularHours, overtimeHours, totalHours }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{formatHours(regularHours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-orange-600 font-semibold\">{formatHours(overtimeHours)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatHours(0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-semibold\">{formatHours(totalHours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AlertCircle className=\"w-3 h-3 mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.overtimeAlert}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Detailed Time Cards Table */}\n\t\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold mb-4\">{t.detailedReport}</h3>\n\t\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.date}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.day}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t\t{detailedTimeCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDateOnly(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{getDayOfWeek(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"‚Äî\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs\">{tc.work_description || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"‚Äî\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"‚Äî\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nfunction EmployeesTab({ users, language, onUsersChange }: { users: UserModel[]; language: Language; onUsersChange: () => void }) {\n\tconst [showAddEmployee, setShowAddEmployee] = useState(false);\n\tconst [editingEmployee, setEditingEmployee] = useState<UserModel | null>(null);\n\tconst [employeeName, setEmployeeName] = useState(\"\");\n\tconst [employeeEmail, setEmployeeEmail] = useState(\"\");\n\tconst [employeePhone, setEmployeePhone] = useState(\"\");\n\tconst [employeeRole, setEmployeeRole] = useState<UserRole>(UserRole.Employee);\n\tconst [deleteConfirm, setDeleteConfirm] = useState<UserModel | null>(null);\n\n\tconst t = translations[language];\n\n\tconst handleAddEmployee = async () => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.insertUser([{\n\t\t\tname: employeeName,\n\t\t\temail: employeeEmail,\n\t\t\tphone: employeePhone || null,\n\t\t\trole: employeeRole,\n\t\t} as UserModel]);\n\n\t\tsetShowAddEmployee(false);\n\t\tsetEmployeeName(\"\");\n\t\tsetEmployeeEmail(\"\");\n\t\tsetEmployeePhone(\"\");\n\t\tsetEmployeeRole(UserRole.Employee);\n\t\tonUsersChange();\n\t};\n\n\tconst handleEditEmployee = async () => {\n\t\tif (!editingEmployee) return;\n\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.setUserById(editingEmployee.id, {\n\t\t\t...editingEmployee,\n\t\t\tname: employeeName,\n\t\t\temail: employeeEmail,\n\t\t\tphone: employeePhone || null,\n\t\t\trole: employeeRole,\n\t\t});\n\n\t\tsetEditingEmployee(null);\n\t\tsetEmployeeName(\"\");\n\t\tsetEmployeeEmail(\"\");\n\t\tsetEmployeePhone(\"\");\n\t\tsetEmployeeRole(UserRole.Employee);\n\t\tonUsersChange();\n\t};\n\n\tconst handleDeleteEmployee = async (user: UserModel) => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.deleteUserById(user.id);\n\t\tsetDeleteConfirm(null);\n\t\tonUsersChange();\n\t};\n\n\tconst openEditDialog = (user: UserModel) => {\n\t\tsetEditingEmployee(user);\n\t\tsetEmployeeName(user.name);\n\t\tsetEmployeeEmail(user.email);\n\t\tsetEmployeePhone(user.phone || \"\");\n\t\tsetEmployeeRole(user.role);\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.employees}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>Manage employee accounts</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button onClick={() => setShowAddEmployee(true)}>\n\t\t\t\t\t\t\t<UserPlus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addEmployee}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.name}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.email}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.phone}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.role}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{user.email}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{user.phone || \"‚Äî\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant={user.role === UserRole.Manager ? \"default\" : \"secondary\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{user.role === UserRole.Manager ? t.manager : t.employee}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditDialog(user)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setDeleteConfirm(user)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.delete}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Dialog open={showAddEmployee} onOpenChange={setShowAddEmployee}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.addEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.name}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={employeeName}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"John Doe\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.email}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tvalue={employeeEmail}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tvalue={employeePhone}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.role}</Label>\n\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setShowAddEmployee(false)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleAddEmployee} disabled={!employeeName || !employeeEmail}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Dialog open={!!editingEmployee} onOpenChange={(open) => !open && setEditingEmployee(null)}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.editEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.name}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={employeeName}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.email}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tvalue={employeeEmail}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tvalue={employeePhone}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.role}</Label>\n\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingEmployee(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleEditEmployee}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Dialog open={!!deleteConfirm} onOpenChange={(open) => !open && setDeleteConfirm(null)}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.deleteEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<p>{t.confirmDelete}</p>\n\t\t\t\t\t<p className=\"font-semibold\">{deleteConfirm?.name}</p>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setDeleteConfirm(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"destructive\" onClick={() => deleteConfirm && handleDeleteEmployee(deleteConfirm)}>\n\t\t\t\t\t\t\t{t.delete}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n\nfunction ManualEntryDialog({\n\topen,\n\tonClose,\n\tuserId,\n\tonSave,\n\tlanguage,\n\tusers\n}: {\n\topen: boolean;\n\tonClose: () => void;\n\tuserId: string;\n\tonSave: () => void;\n\tlanguage: Language;\n\tusers?: UserModel[];\n}) {\n\tconst [selectedUser, setSelectedUser] = useState(userId);\n\tconst [clockIn, setClockIn] = useState(\"\");\n\tconst [clockOut, setClockOut] = useState(\"\");\n\tconst [location, setLocation] = useState(\"\");\n\tconst [workDescription, setWorkDescription] = useState(\"\");\n\tconst [lunchStart, setLunchStart] = useState(\"\");\n\tconst [lunchEnd, setLunchEnd] = useState(\"\");\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tsetSelectedUser(userId);\n\t\t\t// Set default to today\n\t\t\tconst now = new Date();\n\t\t\tconst today = now.toISOString().slice(0, 10);\n\t\t\tsetClockIn(`${today}T09:00`);\n\t\t\tsetClockOut(`${today}T17:00`);\n\t\t\tsetLocation(\"\");\n\t\t\tsetWorkDescription(\"\");\n\t\t\tsetLunchStart(`${today}T12:00`);\n\t\t\tsetLunchEnd(`${today}T13:00`);\n\t\t}\n\t}, [open, userId]);\n\n\tconst handleSave = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\n\t\tconst clockInTimestamp = Math.floor(new Date(clockIn).getTime() / 1000).toString();\n\t\tconst clockOutTimestamp = clockOut ? Math.floor(new Date(clockOut).getTime() / 1000).toString() : null;\n\t\tconst lunchStartTimestamp = lunchStart ? Math.floor(new Date(lunchStart).getTime() / 1000).toString() : null;\n\t\tconst lunchEndTimestamp = lunchEnd ? Math.floor(new Date(lunchEnd).getTime() / 1000).toString() : null;\n\n\t\tlet totalHours = null;\n\t\tlet lunchDurationMinutes = null;\n\n\t\t// Calculate lunch duration\n\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n\t\t\tconst lunchStartTime = parseInt(lunchStartTimestamp);\n\t\t\tconst lunchEndTime = parseInt(lunchEndTimestamp);\n\t\t\tlunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n\t\t}\n\n\t\t// Calculate total hours\n\t\tif (clockOutTimestamp) {\n\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time\n\t\t\tif (lunchDurationMinutes) {\n\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n\t\t\t}\n\t\t}\n\n\t\tawait timeCardORM.insertTimeCardEntry([{\n\t\t\tuser_id: selectedUser,\n\t\t\tclock_in_timestamp: clockInTimestamp,\n\t\t\tclock_out_timestamp: clockOutTimestamp,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: location || null,\n\t\t\twork_description: workDescription || null,\n\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n\t\t} as TimeCardEntryModel]);\n\n\t\tonSave();\n\t\tonClose();\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onClose}>\n\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>{t.addManualEntry}</DialogTitle>\n\t\t\t\t</DialogHeader>\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t{users && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n\t\t\t\t\t\t\t<Select value={selectedUser} onValueChange={setSelectedUser}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t{u.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={clockIn}\n\t\t\t\t\t\t\t\tonChange={(e) => setClockIn(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={clockOut}\n\t\t\t\t\t\t\t\tonChange={(e) => setClockOut(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.lunchStartTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={lunchStart}\n\t\t\t\t\t\t\t\tonChange={(e) => setLunchStart(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.lunchEndTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={lunchEnd}\n\t\t\t\t\t\t\t\tonChange={(e) => setLunchEnd(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button variant=\"outline\" onClick={onClose}>\n\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleSave} disabled={!selectedUser || !clockIn}>\n\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","structuredPatch":[{"oldStart":507,"oldLines":151,"newStart":507,"newLines":135,"lines":["   return (","     <div className=\"space-y-6\">","       <Card>","-        <CardHeader className=\"pb-4\">","-          <CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">","-            <Clock className=\"w-5 h-5 md:w-6 md:h-6\" />","+        <CardHeader>","+          <CardTitle className=\"flex items-center gap-2\">","+            <Clock className=\"w-5 h-5\" />","             {t.clockInOut}","           </CardTitle>","-          {/* Debug: Show active shift status */}","-          {activeShift && (","-            <p className=\"text-xs text-green-600 dark:text-green-400 mt-2 font-semibold\">","-              ‚úì Currently clocked in (Shift ID: {activeShift.id.slice(0, 8)}...)","-            </p>","-          )}","+          <CardDescription>","+            {activeShift ? \"You are currently clocked in\" : \"Clock in to start your shift\"}","+          </CardDescription>","         </CardHeader>","         <CardContent className=\"space-y-6\">","-          {activeShift ? (","-            <div className=\"space-y-6\">","-              {/* YOU ARE CLOCKED IN - Status Banner */}","-              <div className=\"bg-gradient-to-r from-green-600 to-green-500 text-white p-4 rounded-lg text-center shadow-lg\">","-                <p className=\"text-2xl font-bold mb-1\">üïê YOU ARE CLOCKED IN</p>","-                <p className=\"text-3xl font-mono font-bold tabular-nums\">{formatTime(elapsedTime)}</p>","-                <p className=\"text-sm opacity-90 mt-1\">{t.since} {formatDate(activeShift.clock_in_timestamp)}</p>","+          {/* Show current status */}","+          <div className={`p-6 rounded-lg border-2 ${activeShift ? 'bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700' : 'bg-gray-50 border-gray-200 dark:bg-gray-900 dark:border-gray-700'}`}>","+            <div className=\"flex items-center justify-between mb-4\">","+              <div>","+                <p className=\"text-lg font-bold\">","+                  {activeShift ? 'üü¢ Clocked In' : '‚ö™ Not Clocked In'}","+                </p>","+                {activeShift && (","+                  <p className=\"text-sm text-muted-foreground\">","+                    Started: {formatDate(activeShift.clock_in_timestamp)}","+                  </p>","+                )}","+                {isOnLunch && (","+                  <p className=\"text-sm text-orange-600 font-semibold mt-1\">","+                    ‚òï On Lunch Break","+                  </p>","+                )}","               </div>","-","-              {isOnLunch && (","-                <div className=\"bg-orange-100 dark:bg-orange-900/30 border-2 border-orange-400 p-4 rounded-lg text-center\">","-                  <Coffee className=\"w-8 h-8 mx-auto mb-2 text-orange-700\" />","-                  <p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>","+              {activeShift && !isOnLunch && (","+                <div className=\"text-right\">","+                  <p className=\"text-3xl font-mono font-bold tabular-nums\">","+                    {formatTime(elapsedTime)}","+                  </p>","+                  <p className=\"text-xs text-muted-foreground\">Time Elapsed</p>","                 </div>","               )}","+            </div>","+          </div>"," ","-              {/* CLOCK OUT BUTTON - MAIN ACTION */}","-              <div className=\"bg-red-100 dark:bg-red-950 p-6 rounded-xl border-4 border-red-500 dark:border-red-600 shadow-2xl\">","-                <div className=\"text-center mb-4\">","-                  <p className=\"text-2xl font-bold text-red-700 dark:text-red-300 mb-2\">","-                    ‚¨áÔ∏è CLICK HERE TO END YOUR SHIFT ‚¨áÔ∏è","-                  </p>","-                  <p className=\"text-sm text-red-600 dark:text-red-400\">","-                    This will clock you out and save your time card","-                  </p>","-                </div>","-                <Button","-                  onClick={handleClockOut}","-                  variant=\"destructive\"","-                  size=\"lg\"","-                  type=\"button\"","-                  className=\"w-full h-20 text-2xl font-black shadow-2xl hover:shadow-3xl transition-all hover:scale-105\"","-                >","-                  <Clock className=\"w-8 h-8 mr-3\" />","-                  {String(t.clockOut).toUpperCase()}","-                </Button>","-              </div>","+          {/* Main Action Buttons */}","+          {activeShift ? (","+            <div className=\"space-y-4\">","+              {/* Clock Out Button - ALWAYS VISIBLE when clocked in */}","+              <Button","+                onClick={handleClockOut}","+                variant=\"destructive\"","+                size=\"lg\"","+                className=\"w-full h-16 text-xl font-bold\"","+              >","+                <Clock className=\"w-6 h-6 mr-2\" />","+                CLOCK OUT","+              </Button>"," ","-              {/* Optional: Lunch Break */}","-              {!isOnLunch && (","-                <div className=\"border-t-2 border-dashed border-gray-300 dark:border-gray-600 pt-6\">","-                  <p className=\"text-sm text-muted-foreground text-center mb-3\">Optional: Take a lunch break</p>","+              {/* Lunch Buttons */}","+              <div className=\"border-t pt-4\">","+                <p className=\"text-sm text-muted-foreground mb-3\">Lunch Break (Optional)</p>","+                {isOnLunch ? (","                   <Button","+                    onClick={handleEndLunch}","+                    className=\"w-full h-12\"","+                    variant=\"outline\"","+                  >","+                    <Coffee className=\"w-5 h-5 mr-2\" />","+                    End Lunch Break","+                  </Button>","+                ) : (","+                  <Button","                     onClick={handleStartLunch}","+                    className=\"w-full h-12\"","                     variant=\"outline\"","-                    size=\"lg\"","-                    className=\"w-full h-12 border-2\"","                   >","                     <Coffee className=\"w-5 h-5 mr-2\" />","-                    {t.startLunch}","+                    Start Lunch Break","                   </Button>","-                </div>","-              )}","+                )}","+              </div>"," ","-              {isOnLunch && (","-                <Button","-                  onClick={handleEndLunch}","-                  size=\"lg\"","-                  className=\"w-full h-14 bg-orange-600 hover:bg-orange-700\"","-                >","-                  <Coffee className=\"w-5 h-5 mr-2\" />","-                  {t.endLunch}","-                </Button>","-              )}","-","-              {/* Details Section - Collapsible */}","-              <details className=\"border rounded-lg p-4\">","-                <summary className=\"cursor-pointer font-semibold text-base mb-4\">","-                  Update Location & Work Description (Optional)","-                </summary>","-                <div className=\"space-y-4\">","-                  <div className=\"space-y-2\">","-                    <Label className=\"text-base font-semibold\">{t.location}</Label>","-                    <Input","-                      value={location}","-                      onChange={(e) => setLocation(e.target.value)}","-                      placeholder={t.locationPlaceholder}","-                      className=\"h-12 text-base\"","-                      disabled={isOnLunch}","-                    />","-                  </div>","-","-                  <div className=\"space-y-2\">","-                    <Label className=\"text-base font-semibold\">{t.workDescription}</Label>","-                    <Textarea","-                      value={workDescription}","-                      onChange={(e) => setWorkDescription(e.target.value)}","-                      placeholder={t.descriptionPlaceholder}","-                      rows={3}","-                      className=\"text-base resize-none\"","-                      disabled={isOnLunch}","-                    />","-                  </div>","+              {/* Location and Description */}","+              <div className=\"border-t pt-4 space-y-4\">","+                <div>","+                  <Label>{t.location}</Label>","+                  <Input","+                    value={location}","+                    onChange={(e) => setLocation(e.target.value)}","+                    placeholder={t.locationPlaceholder}","+                    className=\"mt-2\"","+                  />","                 </div>","-              </details>","+                <div>","+                  <Label>{t.workDescription}</Label>","+                  <Textarea","+                    value={workDescription}","+                    onChange={(e) => setWorkDescription(e.target.value)}","+                    placeholder={t.descriptionPlaceholder}","+                    rows={3}","+                    className=\"mt-2\"","+                  />","+                </div>","+              </div>","             </div>","           ) : (","-            <div className=\"space-y-5\">","-              <div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">","-                <Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />","-                <p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>","-                <p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>","-              </div>","-","-              <div className=\"space-y-2\">","-                <Label className=\"text-base font-semibold\">{t.whereWorked}</Label>","+            <div className=\"space-y-4\">","+              {/* Clock In Form */}","+              <div>","+                <Label>{t.location}</Label>","                 <Input","                   value={location}","                   onChange={(e) => setLocation(e.target.value)}","                   placeholder={t.locationPlaceholder}","-                  className=\"h-12 text-base\"","+                  className=\"mt-2\"","                 />","               </div>","-","-              <div className=\"space-y-2\">","-                <Label className=\"text-base font-semibold\">{t.whatDid}</Label>","+              <div>","+                <Label>{t.workDescription}</Label>","                 <Textarea","                   value={workDescription}","                   onChange={(e) => setWorkDescription(e.target.value)}","                   placeholder={t.descriptionPlaceholder}","                   rows={3}","-                  className=\"text-base resize-none\"","+                  className=\"mt-2\"","                 />","               </div>","-","               <Button","                 onClick={handleClockIn}","                 size=\"lg\"","-                className=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"","+                className=\"w-full h-16 text-xl font-bold bg-green-600 hover:bg-green-700\"","               >","-                <Clock className=\"w-6 h-6 mr-3\" />","-                {t.clockIn}","+                <Clock className=\"w-6 h-6 mr-2\" />","+                CLOCK IN","               </Button>","             </div>","           )}"]}],"userModified":false,"replaceAll":false}}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01RpZ8Qjr5qNKQ9vWWhJihPj","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! Now let me validate the changes:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":5197,"cache_read_input_tokens":108375,"cache_creation":{"ephemeral_5m_input_tokens":5197,"ephemeral_1h_input_tokens":0},"output_tokens":1},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"5e602e1a-487b-4ae9-9db3-5d218ab10c05"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01RpZ8Qjr5qNKQ9vWWhJihPj","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_vrtx_012nULqBqh3cnTPDGB6XRLgJ","name":"Bash","input":{"command":"npm run check:safe","description":"Validate TypeScript and ESLint after redesign"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":5197,"cache_read_input_tokens":108375,"cache_creation":{"ephemeral_5m_input_tokens":5197,"ephemeral_1h_input_tokens":0},"output_tokens":93},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"30362e48-a056-4ee4-b69f-0bbb34545ee5"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_vrtx_012nULqBqh3cnTPDGB6XRLgJ","type":"tool_result","content":"> check:safe\n> timeout 20 npm run check || (echo 'Check timed out after 20 seconds' && exit 1)\n\n\n> check\n> tsgo --noEmit && npm run lint:radix -- --fix && npm run format\n\n\n> lint:radix\n> grep -l -r '<SelectItem' src | xargs eslint --config config/eslint/eslint.radix.config.js --fix\n\n\n> format\n> biome check --write --unsafe\n\nChecked 6 files in 57ms. No fixes applied.","is_error":false}]},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"a5206921-cca8-4886-8437-25e06085f512","tool_use_result":{"stdout":"> check:safe\n> timeout 20 npm run check || (echo 'Check timed out after 20 seconds' && exit 1)\n\n\n> check\n> tsgo --noEmit && npm run lint:radix -- --fix && npm run format\n\n\n> lint:radix\n> grep -l -r '<SelectItem' src | xargs eslint --config config/eslint/eslint.radix.config.js --fix\n\n\n> format\n> biome check --write --unsafe\n\nChecked 6 files in 57ms. No fixes applied.","stderr":"","interrupted":false,"isImage":false}}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_013rzJMo2eJPnmfytaoKnxLN","type":"message","role":"assistant","content":[{"type":"text","text":"Excellent! All validation passed. I've completely redesigned the clock in/out interface with a much simpler and more reliable layout. Here's what's new:\n\n## ‚úÖ BRAND NEW Clock In/Out Interface - Simplified & Clear\n\n**Major Changes:**\n\n### **New Clean Layout:**\n\n1. **Status Box at Top** (Green when clocked in, Gray when not)\n   - Shows: üü¢ Clocked In / ‚ö™ Not Clocked In\n   - Displays start time\n   - Shows elapsed timer (when clocked in)\n   - Shows \"‚òï On Lunch Break\" status if applicable\n\n2. **CLOCK OUT Button** - **THE MAIN FOCUS**\n   - **ALWAYS the first button** when you're clocked in\n   - **Red destructive style** (stands out)\n   - **Full width, 64px tall**\n   - **Large bold text: \"CLOCK OUT\"**\n   - Cannot be missed!\n\n3. **Lunch Break Section** (below Clock Out)\n   - Clearly labeled \"Lunch Break (Optional)\"\n   - Shows \"Start Lunch Break\" or \"End Lunch Break\" button\n   - Outline style so it's less prominent than Clock Out\n\n4. **Location & Description Fields** (at the bottom)\n   - Always visible and editable\n   - No collapsing/hiding\n\n### **When Not Clocked In:**\n- Shows location and description fields first\n- Large green \"CLOCK IN\" button at the bottom\n\n### **Key Improvements:**\n\n‚úÖ **Clock Out is now THE FIRST THING you see** after the status box  \n‚úÖ **Simple, linear layout** - no confusing nested sections  \n‚úÖ **Clear visual hierarchy** - Clock Out > Lunch > Details  \n‚úÖ **Removed all debug indicators** for cleaner look  \n‚úÖ **No more collapsible sections** - everything is visible  \n‚úÖ **Consistent button sizing** - easy to tap on mobile  \n\nThe interface is now **crystal clear**: When clocked in, you'll immediately see a big red \"CLOCK OUT\" button right at the top. No more confusion!"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":335,"cache_read_input_tokens":113572,"cache_creation":{"ephemeral_5m_input_tokens":335,"ephemeral_1h_input_tokens":0},"output_tokens":498},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"314ad250-56b4-418d-9f10-a1ce423e493e"}
{"type":"result","subtype":"success","is_error":false,"duration_ms":84263,"duration_api_ms":81405,"num_turns":3,"result":"Excellent! All validation passed. I've completely redesigned the clock in/out interface with a much simpler and more reliable layout. Here's what's new:\n\n## ‚úÖ BRAND NEW Clock In/Out Interface - Simplified & Clear\n\n**Major Changes:**\n\n### **New Clean Layout:**\n\n1. **Status Box at Top** (Green when clocked in, Gray when not)\n   - Shows: üü¢ Clocked In / ‚ö™ Not Clocked In\n   - Displays start time\n   - Shows elapsed timer (when clocked in)\n   - Shows \"‚òï On Lunch Break\" status if applicable\n\n2. **CLOCK OUT Button** - **THE MAIN FOCUS**\n   - **ALWAYS the first button** when you're clocked in\n   - **Red destructive style** (stands out)\n   - **Full width, 64px tall**\n   - **Large bold text: \"CLOCK OUT\"**\n   - Cannot be missed!\n\n3. **Lunch Break Section** (below Clock Out)\n   - Clearly labeled \"Lunch Break (Optional)\"\n   - Shows \"Start Lunch Break\" or \"End Lunch Break\" button\n   - Outline style so it's less prominent than Clock Out\n\n4. **Location & Description Fields** (at the bottom)\n   - Always visible and editable\n   - No collapsing/hiding\n\n### **When Not Clocked In:**\n- Shows location and description fields first\n- Large green \"CLOCK IN\" button at the bottom\n\n### **Key Improvements:**\n\n‚úÖ **Clock Out is now THE FIRST THING you see** after the status box  \n‚úÖ **Simple, linear layout** - no confusing nested sections  \n‚úÖ **Clear visual hierarchy** - Clock Out > Lunch > Details  \n‚úÖ **Removed all debug indicators** for cleaner look  \n‚úÖ **No more collapsible sections** - everything is visible  \n‚úÖ **Consistent button sizing** - easy to tap on mobile  \n\nThe interface is now **crystal clear**: When clocked in, you'll immediately see a big red \"CLOCK OUT\" button right at the top. No more confusion!","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","total_cost_usd":0.50656465,"usage":{"input_tokens":6,"cache_creation_input_tokens":97597,"cache_read_input_tokens":238257,"output_tokens":3952,"server_tool_use":{"web_search_requests":0,"web_fetch_requests":0},"service_tier":"standard","cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":97597}},"modelUsage":{"claude-haiku-4-5-20251001":{"inputTokens":3369,"outputTokens":308,"cacheReadInputTokens":0,"cacheCreationInputTokens":0,"webSearchRequests":0,"costUSD":0.004909,"contextWindow":200000},"claude-sonnet-4-5-20250929":{"inputTokens":2,"outputTokens":281,"cacheReadInputTokens":2236,"cacheCreationInputTokens":0,"webSearchRequests":0,"costUSD":0.0048918,"contextWindow":200000},"claude-sonnet-4-5":{"inputTokens":6,"outputTokens":3952,"cacheReadInputTokens":238257,"cacheCreationInputTokens":97597,"webSearchRequests":0,"costUSD":0.49676384999999995,"contextWindow":200000}},"permission_denials":[],"uuid":"3afaeb72-2d5b-48e5-b2e9-1e06531464f9"}
