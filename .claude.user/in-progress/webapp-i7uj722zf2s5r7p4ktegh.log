{"type":"system","subtype":"hook_response","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"32deb2f9-3483-4e32-b89f-dfdcd952d64a","hook_name":"SessionStart:resume","hook_event":"SessionStart","stdout":"","stderr":"","exit_code":0}
{"type":"system","subtype":"hook_response","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"f31f3d1a-a2b0-4286-9f6c-0e04c2e3a09c","hook_name":"SessionStart:resume","hook_event":"SessionStart","stdout":"=== RESUMING SESSION - MODIFICATION GUIDANCE ===\n\n## DATA LAYER\n\n- IF you have any data layer related requirements, use the 'database-administrator' subagent\n- Send the user's actual requirements as-is to the subagent.\n\n=== END OF MODIFICATION GUIDANCE ===\n","stderr":"","exit_code":0}
{"type":"system","subtype":"init","cwd":"/home/user/vite-template","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","tools":["Task","Bash","Glob","Grep","ExitPlanMode","Read","Edit","Write","NotebookEdit","WebFetch","TodoWrite","WebSearch","BashOutput","KillShell","Skill","SlashCommand","EnterPlanMode"],"mcp_servers":[],"model":"claude-sonnet-4-5","permissionMode":"bypassPermissions","slash_commands":["compact","context","cost","init","pr-comments","release-notes","todos","review","security-review"],"apiKeySource":"none","claude_code_version":"2.0.53","output_style":"default","agents":["general-purpose","statusline-setup","Explore","Plan","integration-administrator","database-administrator"],"skills":[],"plugins":[],"uuid":"25f0051b-418a-4a99-a31b-c3ae9f702616"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01PhxqSfeepGvZYJVRrAeCex","type":"message","role":"assistant","content":[{"type":"text","text":"I'll review the current code and restructure the employee time card layout to include all the requested fields in the proper flow: Clock In â†’ Start Lunch (optional) â†’ End Lunch (optional) â†’ Clock Out â†’ Work Location â†’ Describe Your Work."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":5455,"cache_read_input_tokens":16310,"cache_creation":{"ephemeral_5m_input_tokens":5455,"ephemeral_1h_input_tokens":0},"output_tokens":3},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"a991ea7f-0bde-455a-9195-069a3165043b"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01PhxqSfeepGvZYJVRrAeCex","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_vrtx_01USBJmg21WLZbULFr5qGdqM","name":"Read","input":{"file_path":"/home/user/vite-template/src/routes/index.tsx"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":1,"cache_creation_input_tokens":5455,"cache_read_input_tokens":16310,"cache_creation":{"ephemeral_5m_input_tokens":5455,"ephemeral_1h_input_tokens":0},"output_tokens":123},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"f0b503c4-592a-4650-a1a7-a67be5eaeb4a"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_vrtx_01USBJmg21WLZbULFr5qGdqM","type":"tool_result","content":"     1â†’import { createFileRoute } from \"@tanstack/react-router\";\n     2â†’import { useState, useEffect } from \"react\";\n     3â†’import { Button } from \"@/components/ui/button\";\n     4â†’import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\n     5â†’import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n     6â†’import { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\n     7â†’import { Input } from \"@/components/ui/input\";\n     8â†’import { Label } from \"@/components/ui/label\";\n     9â†’import { Textarea } from \"@/components/ui/textarea\";\n    10â†’import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\n    11â†’import { Badge } from \"@/components/ui/badge\";\n    12â†’import { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\n    13â†’import { Clock, Users, CalendarDays, Timer, Languages, Coffee, UserPlus, FileText, AlertCircle, Plus, Trash2 } from \"lucide-react\";\n    14â†’import { UserORM, type UserModel, UserRole } from \"@/sdk/database/orm/orm_user\";\n    15â†’import { TimeCardEntryORM, type TimeCardEntryModel } from \"@/sdk/database/orm/orm_time_card_entry\";\n    16â†’\n    17â†’export const Route = createFileRoute(\"/\")({\n    18â†’\tcomponent: App,\n    19â†’});\n    20â†’\n    21â†’type Language = 'en' | 'es';\n    22â†’\n    23â†’const translations = {\n    24â†’\ten: {\n    25â†’\t\tappTitle: \"Employee Time Tracking\",\n    26â†’\t\tselectAccount: \"Select your account to continue\",\n    27â†’\t\tselectUser: \"Select User\",\n    28â†’\t\tchooseAccount: \"Choose your account\",\n    29â†’\t\tmanager: \"Manager\",\n    30â†’\t\temployee: \"Employee\",\n    31â†’\t\tswitchUser: \"Switch User\",\n    32â†’\t\ttimeTrackingSystem: \"Time Tracking System\",\n    33â†’\t\twelcome: \"Welcome\",\n    34â†’\t\tclockInOut: \"Clock In/Out\",\n    35â†’\t\tcurrentlyClocked: \"Currently Clocked In\",\n    36â†’\t\tsince: \"Since\",\n    37â†’\t\telapsedTime: \"Elapsed Time\",\n    38â†’\t\tclockOut: \"Clock Out\",\n    39â†’\t\tnotClocked: \"Not currently clocked in\",\n    40â†’\t\tclockIn: \"Clock In\",\n    41â†’\t\ttimeCardHistory: \"Time Card History\",\n    42â†’\t\trecentRecords: \"Your recent clock in/out records\",\n    43â†’\t\tnoTimeCards: \"No time cards yet\",\n    44â†’\t\tclockInTime: \"Clock In\",\n    45â†’\t\tclockOutTime: \"Clock Out\",\n    46â†’\t\thours: \"Hours\",\n    47â†’\t\tstatus: \"Status\",\n    48â†’\t\tcompleted: \"Completed\",\n    49â†’\t\tactive: \"Active\",\n    50â†’\t\ttotalEmployees: \"Total Employees\",\n    51â†’\t\thoursToday: \"Hours Today\",\n    52â†’\t\thoursThisWeek: \"Hours This Week\",\n    53â†’\t\tallEmployeeTimeCards: \"All Employee Time Cards\",\n    54â†’\t\tviewManageRecords: \"View and manage all employee time records\",\n    55â†’\t\tfilterByEmployee: \"Filter by Employee\",\n    56â†’\t\tallEmployees: \"All Employees\",\n    57â†’\t\tfilterByDate: \"Filter by Date\",\n    58â†’\t\tclearFilters: \"Clear Filters\",\n    59â†’\t\tnoTimeCardsFound: \"No time cards found\",\n    60â†’\t\temployeeName: \"Employee\",\n    61â†’\t\tactions: \"Actions\",\n    62â†’\t\tedit: \"Edit\",\n    63â†’\t\teditTimeCard: \"Edit Time Card\",\n    64â†’\t\tcancel: \"Cancel\",\n    65â†’\t\tsaveChanges: \"Save Changes\",\n    66â†’\t\tlocation: \"Location\",\n    67â†’\t\twhereWorked: \"Where did you work?\",\n    68â†’\t\tworkDescription: \"Work Description\",\n    69â†’\t\twhatDid: \"What did you do today?\",\n    70â†’\t\tlocationPlaceholder: \"e.g., Office, Remote, Client Site\",\n    71â†’\t\tdescriptionPlaceholder: \"Describe your work activities...\",\n    72â†’\t\tstartLunch: \"Start Lunch Break\",\n    73â†’\t\tendLunch: \"End Lunch Break\",\n    74â†’\t\tonLunchBreak: \"On Lunch Break\",\n    75â†’\t\tlunchBreak: \"Lunch Break\",\n    76â†’\t\tlunchDuration: \"Lunch\",\n    77â†’\t\tlunchStartTime: \"Lunch Start\",\n    78â†’\t\tlunchEndTime: \"Lunch End\",\n    79â†’\t\ttimeCards: \"Time Cards\",\n    80â†’\t\treports: \"Reports\",\n    81â†’\t\temployees: \"Employees\",\n    82â†’\t\taddEmployee: \"Add Employee\",\n    83â†’\t\teditEmployee: \"Edit Employee\",\n    84â†’\t\tdeleteEmployee: \"Delete Employee\",\n    85â†’\t\tname: \"Name\",\n    86â†’\t\temail: \"Email\",\n    87â†’\t\tphone: \"Phone\",\n    88â†’\t\trole: \"Role\",\n    89â†’\t\tdelete: \"Delete\",\n    90â†’\t\tweeklyReport: \"Weekly Report\",\n    91â†’\t\tselectWeek: \"Select Week\",\n    92â†’\t\tregularHours: \"Regular\",\n    93â†’\t\tovertimeHours: \"Overtime\",\n    94â†’\t\ttotalHours: \"Total\",\n    95â†’\t\tnoReportData: \"No data for selected week\",\n    96â†’\t\taddTimeCard: \"Add Time Card\",\n    97â†’\t\tmanualEntry: \"Manual Entry\",\n    98â†’\t\taddManualEntry: \"Add Manual Time Card\",\n    99â†’\t\tconfirmDelete: \"Are you sure you want to delete this employee?\",\n   100â†’\t\tovertimeAlert: \"Overtime Alert\",\n   101â†’\t\tprintReport: \"Print Report\",\n   102â†’\t\texportCSV: \"Export to CSV\",\n   103â†’\t\tdetailedReport: \"Detailed Time Card Report\",\n   104â†’\t\tdate: \"Date\",\n   105â†’\t\tday: \"Day\",\n   106â†’\t\tdeleteTimeCard: \"Delete Time Card\",\n   107â†’\t\tconfirmDeleteTimeCard: \"Are you sure you want to delete this time card? This action cannot be undone.\",\n   108â†’\t},\n   109â†’\tes: {\n   110â†’\t\tappTitle: \"Registro de Tiempo de Empleados\",\n   111â†’\t\tselectAccount: \"Selecciona tu cuenta para continuar\",\n   112â†’\t\tselectUser: \"Seleccionar Usuario\",\n   113â†’\t\tchooseAccount: \"Elige tu cuenta\",\n   114â†’\t\tmanager: \"Gerente\",\n   115â†’\t\temployee: \"Empleado\",\n   116â†’\t\tswitchUser: \"Cambiar Usuario\",\n   117â†’\t\ttimeTrackingSystem: \"Sistema de Registro de Tiempo\",\n   118â†’\t\twelcome: \"Bienvenido\",\n   119â†’\t\tclockInOut: \"Entrada/Salida\",\n   120â†’\t\tcurrentlyClocked: \"Actualmente Registrado\",\n   121â†’\t\tsince: \"Desde\",\n   122â†’\t\telapsedTime: \"Tiempo Transcurrido\",\n   123â†’\t\tclockOut: \"Registrar Salida\",\n   124â†’\t\tnotClocked: \"No estÃ¡ registrado actualmente\",\n   125â†’\t\tclockIn: \"Registrar Entrada\",\n   126â†’\t\ttimeCardHistory: \"Historial de Tarjetas de Tiempo\",\n   127â†’\t\trecentRecords: \"Tus registros recientes de entrada/salida\",\n   128â†’\t\tnoTimeCards: \"No hay tarjetas de tiempo todavÃ­a\",\n   129â†’\t\tclockInTime: \"Entrada\",\n   130â†’\t\tclockOutTime: \"Salida\",\n   131â†’\t\thours: \"Horas\",\n   132â†’\t\tstatus: \"Estado\",\n   133â†’\t\tcompleted: \"Completado\",\n   134â†’\t\tactive: \"Activo\",\n   135â†’\t\ttotalEmployees: \"Total de Empleados\",\n   136â†’\t\thoursToday: \"Horas Hoy\",\n   137â†’\t\thoursThisWeek: \"Horas Esta Semana\",\n   138â†’\t\tallEmployeeTimeCards: \"Todas las Tarjetas de Tiempo\",\n   139â†’\t\tviewManageRecords: \"Ver y gestionar todos los registros de empleados\",\n   140â†’\t\tfilterByEmployee: \"Filtrar por Empleado\",\n   141â†’\t\tallEmployees: \"Todos los Empleados\",\n   142â†’\t\tfilterByDate: \"Filtrar por Fecha\",\n   143â†’\t\tclearFilters: \"Limpiar Filtros\",\n   144â†’\t\tnoTimeCardsFound: \"No se encontraron tarjetas de tiempo\",\n   145â†’\t\temployeeName: \"Empleado\",\n   146â†’\t\tactions: \"Acciones\",\n   147â†’\t\tedit: \"Editar\",\n   148â†’\t\teditTimeCard: \"Editar Tarjeta de Tiempo\",\n   149â†’\t\tcancel: \"Cancelar\",\n   150â†’\t\tsaveChanges: \"Guardar Cambios\",\n   151â†’\t\tlocation: \"UbicaciÃ³n\",\n   152â†’\t\twhereWorked: \"Â¿DÃ³nde trabajaste?\",\n   153â†’\t\tworkDescription: \"DescripciÃ³n del Trabajo\",\n   154â†’\t\twhatDid: \"Â¿QuÃ© hiciste hoy?\",\n   155â†’\t\tlocationPlaceholder: \"ej., Oficina, Remoto, Sitio del Cliente\",\n   156â†’\t\tdescriptionPlaceholder: \"Describe tus actividades laborales...\",\n   157â†’\t\tstartLunch: \"Iniciar Almuerzo\",\n   158â†’\t\tendLunch: \"Terminar Almuerzo\",\n   159â†’\t\tonLunchBreak: \"En Almuerzo\",\n   160â†’\t\tlunchBreak: \"Almuerzo\",\n   161â†’\t\tlunchDuration: \"Almuerzo\",\n   162â†’\t\tlunchStartTime: \"Inicio Almuerzo\",\n   163â†’\t\tlunchEndTime: \"Fin Almuerzo\",\n   164â†’\t\ttimeCards: \"Tarjetas de Tiempo\",\n   165â†’\t\treports: \"Informes\",\n   166â†’\t\temployees: \"Empleados\",\n   167â†’\t\taddEmployee: \"Agregar Empleado\",\n   168â†’\t\teditEmployee: \"Editar Empleado\",\n   169â†’\t\tdeleteEmployee: \"Eliminar Empleado\",\n   170â†’\t\tname: \"Nombre\",\n   171â†’\t\temail: \"Correo\",\n   172â†’\t\tphone: \"TelÃ©fono\",\n   173â†’\t\trole: \"Rol\",\n   174â†’\t\tdelete: \"Eliminar\",\n   175â†’\t\tweeklyReport: \"Informe Semanal\",\n   176â†’\t\tselectWeek: \"Seleccionar Semana\",\n   177â†’\t\tregularHours: \"Regular\",\n   178â†’\t\tovertimeHours: \"Tiempo Extra\",\n   179â†’\t\ttotalHours: \"Total\",\n   180â†’\t\tnoReportData: \"No hay datos para la semana seleccionada\",\n   181â†’\t\taddTimeCard: \"Agregar Tarjeta\",\n   182â†’\t\tmanualEntry: \"Entrada Manual\",\n   183â†’\t\taddManualEntry: \"Agregar Tarjeta Manual\",\n   184â†’\t\tconfirmDelete: \"Â¿EstÃ¡ seguro de eliminar este empleado?\",\n   185â†’\t\tovertimeAlert: \"Alerta de Tiempo Extra\",\n   186â†’\t\tprintReport: \"Imprimir Informe\",\n   187â†’\t\texportCSV: \"Exportar a CSV\",\n   188â†’\t\tdetailedReport: \"Informe Detallado de Tarjetas de Tiempo\",\n   189â†’\t\tdate: \"Fecha\",\n   190â†’\t\tday: \"DÃ­a\",\n   191â†’\t\tdeleteTimeCard: \"Eliminar Tarjeta de Tiempo\",\n   192â†’\t\tconfirmDeleteTimeCard: \"Â¿EstÃ¡ seguro de eliminar esta tarjeta de tiempo? Esta acciÃ³n no se puede deshacer.\",\n   193â†’\t}\n   194â†’};\n   195â†’\n   196â†’function App() {\n   197â†’\tconst [currentUser, setCurrentUser] = useState<UserModel | null>(null);\n   198â†’\tconst [users, setUsers] = useState<UserModel[]>([]);\n   199â†’\tconst [showUserSelect, setShowUserSelect] = useState(true);\n   200â†’\tconst [language, setLanguage] = useState<Language>('en');\n   201â†’\n   202â†’\tconst t = translations[language];\n   203â†’\n   204â†’\tuseEffect(() => {\n   205â†’\t\tloadUsers();\n   206â†’\t}, []);\n   207â†’\n   208â†’\tconst loadUsers = async () => {\n   209â†’\t\tconst userORM = UserORM.getInstance();\n   210â†’\t\tconst allUsers = await userORM.getAllUser();\n   211â†’\n   212â†’\t\t// If no users exist, create demo users\n   213â†’\t\tif (allUsers.length === 0) {\n   214â†’\t\t\tconst demoUsers = await userORM.insertUser([\n   215â†’\t\t\t\t{\n   216â†’\t\t\t\t\tname: \"John Smith\",\n   217â†’\t\t\t\t\temail: \"john@example.com\",\n   218â†’\t\t\t\t\trole: UserRole.Employee,\n   219â†’\t\t\t\t} as UserModel,\n   220â†’\t\t\t\t{\n   221â†’\t\t\t\t\tname: \"Sarah Johnson\",\n   222â†’\t\t\t\t\temail: \"sarah@example.com\",\n   223â†’\t\t\t\t\trole: UserRole.Employee,\n   224â†’\t\t\t\t} as UserModel,\n   225â†’\t\t\t\t{\n   226â†’\t\t\t\t\tname: \"Mike Manager\",\n   227â†’\t\t\t\t\temail: \"mike@example.com\",\n   228â†’\t\t\t\t\trole: UserRole.Manager,\n   229â†’\t\t\t\t} as UserModel,\n   230â†’\t\t\t]);\n   231â†’\t\t\tsetUsers(demoUsers);\n   232â†’\t\t} else {\n   233â†’\t\t\tsetUsers(allUsers);\n   234â†’\t\t}\n   235â†’\t};\n   236â†’\n   237â†’\tconst handleUserSelect = (userId: string) => {\n   238â†’\t\tconst user = users.find(u => u.id === userId);\n   239â†’\t\tif (user) {\n   240â†’\t\t\tsetCurrentUser(user);\n   241â†’\t\t\tsetShowUserSelect(false);\n   242â†’\t\t}\n   243â†’\t};\n   244â†’\n   245â†’\tconst handleLogout = () => {\n   246â†’\t\tsetCurrentUser(null);\n   247â†’\t\tsetShowUserSelect(true);\n   248â†’\t};\n   249â†’\n   250â†’\tconst toggleLanguage = () => {\n   251â†’\t\tsetLanguage(prev => prev === 'en' ? 'es' : 'en');\n   252â†’\t};\n   253â†’\n   254â†’\tif (showUserSelect || !currentUser) {\n   255â†’\t\treturn (\n   256â†’\t\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4\">\n   257â†’\t\t\t\t<div className=\"absolute top-4 right-4\">\n   258â†’\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n   259â†’\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n   260â†’\t\t\t\t\t\t{language === 'en' ? 'EspaÃ±ol' : 'English'}\n   261â†’\t\t\t\t\t</Button>\n   262â†’\t\t\t\t</div>\n   263â†’\t\t\t\t<Card className=\"w-full max-w-md\">\n   264â†’\t\t\t\t\t<CardHeader>\n   265â†’\t\t\t\t\t\t<CardTitle className=\"text-2xl\">{t.appTitle}</CardTitle>\n   266â†’\t\t\t\t\t\t<CardDescription>{t.selectAccount}</CardDescription>\n   267â†’\t\t\t\t\t</CardHeader>\n   268â†’\t\t\t\t\t<CardContent className=\"space-y-4\">\n   269â†’\t\t\t\t\t\t<div className=\"space-y-2\">\n   270â†’\t\t\t\t\t\t\t<Label>{t.selectUser}</Label>\n   271â†’\t\t\t\t\t\t\t<Select onValueChange={handleUserSelect}>\n   272â†’\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-full\">\n   273â†’\t\t\t\t\t\t\t\t\t<SelectValue placeholder={t.chooseAccount} />\n   274â†’\t\t\t\t\t\t\t\t</SelectTrigger>\n   275â†’\t\t\t\t\t\t\t\t<SelectContent>\n   276â†’\t\t\t\t\t\t\t\t\t{users.map((user) => (\n   277â†’\t\t\t\t\t\t\t\t\t\t<SelectItem key={user.id} value={user.id}>\n   278â†’\t\t\t\t\t\t\t\t\t\t\t{user.name} - {user.role === UserRole.Manager ? t.manager : t.employee}\n   279â†’\t\t\t\t\t\t\t\t\t\t</SelectItem>\n   280â†’\t\t\t\t\t\t\t\t\t))}\n   281â†’\t\t\t\t\t\t\t\t</SelectContent>\n   282â†’\t\t\t\t\t\t\t</Select>\n   283â†’\t\t\t\t\t\t</div>\n   284â†’\t\t\t\t\t</CardContent>\n   285â†’\t\t\t\t</Card>\n   286â†’\t\t\t</div>\n   287â†’\t\t);\n   288â†’\t}\n   289â†’\n   290â†’\treturn (\n   291â†’\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n   292â†’\t\t\t<div className=\"container mx-auto p-6 space-y-6\">\n   293â†’\t\t\t\t<div className=\"flex justify-between items-center\">\n   294â†’\t\t\t\t\t<div>\n   295â†’\t\t\t\t\t\t<h1 className=\"text-3xl font-bold\">{t.timeTrackingSystem}</h1>\n   296â†’\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n   297â†’\t\t\t\t\t\t\t{t.welcome}, {currentUser.name} ({currentUser.role === UserRole.Manager ? t.manager : t.employee})\n   298â†’\t\t\t\t\t\t</p>\n   299â†’\t\t\t\t\t</div>\n   300â†’\t\t\t\t\t<div className=\"flex gap-2\">\n   301â†’\t\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n   302â†’\t\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n   303â†’\t\t\t\t\t\t\t{language === 'en' ? 'EspaÃ±ol' : 'English'}\n   304â†’\t\t\t\t\t\t</Button>\n   305â†’\t\t\t\t\t\t<Button onClick={handleLogout} variant=\"outline\">\n   306â†’\t\t\t\t\t\t\t{t.switchUser}\n   307â†’\t\t\t\t\t\t</Button>\n   308â†’\t\t\t\t\t</div>\n   309â†’\t\t\t\t</div>\n   310â†’\n   311â†’\t\t\t\t{currentUser.role === UserRole.Employee ? (\n   312â†’\t\t\t\t\t<EmployeeView user={currentUser} language={language} />\n   313â†’\t\t\t\t) : (\n   314â†’\t\t\t\t\t<ManagerView user={currentUser} users={users} language={language} onUsersChange={loadUsers} />\n   315â†’\t\t\t\t)}\n   316â†’\t\t\t</div>\n   317â†’\t\t</div>\n   318â†’\t);\n   319â†’}\n   320â†’\n   321â†’function EmployeeView({ user, language }: { user: UserModel; language: Language }) {\n   322â†’\tconst [activeShift, setActiveShift] = useState<TimeCardEntryModel | null>(null);\n   323â†’\tconst [timeCards, setTimeCards] = useState<TimeCardEntryModel[]>([]);\n   324â†’\tconst [elapsedTime, setElapsedTime] = useState(0);\n   325â†’\tconst [location, setLocation] = useState(\"\");\n   326â†’\tconst [workDescription, setWorkDescription] = useState(\"\");\n   327â†’\tconst [isOnLunch, setIsOnLunch] = useState(false);\n   328â†’\tconst [showManualEntry, setShowManualEntry] = useState(false);\n   329â†’\n   330â†’\tconst t = translations[language];\n   331â†’\n   332â†’\tuseEffect(() => {\n   333â†’\t\tloadTimeCards();\n   334â†’\t}, [user.id]);\n   335â†’\n   336â†’\tuseEffect(() => {\n   337â†’\t\tlet interval: NodeJS.Timeout;\n   338â†’\t\tif (activeShift && !isOnLunch) {\n   339â†’\t\t\tinterval = setInterval(() => {\n   340â†’\t\t\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp) * 1000;\n   341â†’\t\t\t\tconst elapsed = Date.now() - clockInTime;\n   342â†’\t\t\t\tsetElapsedTime(elapsed);\n   343â†’\t\t\t}, 1000);\n   344â†’\t\t}\n   345â†’\t\treturn () => clearInterval(interval);\n   346â†’\t}, [activeShift, isOnLunch]);\n   347â†’\n   348â†’\tconst loadTimeCards = async () => {\n   349â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   350â†’\t\tconst userTimeCards = await timeCardORM.getTimeCardEntryByUserId(user.id);\n   351â†’\n   352â†’\t\t// Sort by clock in time (newest first)\n   353â†’\t\tconst sorted = userTimeCards.sort((a, b) =>\n   354â†’\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n   355â†’\t\t);\n   356â†’\n   357â†’\t\tsetTimeCards(sorted);\n   358â†’\n   359â†’\t\t// Find active shift (no clock out time)\n   360â†’\t\tconst active = sorted.find(tc => !tc.clock_out_timestamp);\n   361â†’\t\tsetActiveShift(active || null);\n   362â†’\t\tif (active) {\n   363â†’\t\t\tsetLocation(active.location || \"\");\n   364â†’\t\t\tsetWorkDescription(active.work_description || \"\");\n   365â†’\t\t\t// Check if on lunch break\n   366â†’\t\t\tsetIsOnLunch(!!(active.lunch_start_timestamp && !active.lunch_end_timestamp));\n   367â†’\t\t} else {\n   368â†’\t\t\tsetIsOnLunch(false);\n   369â†’\t\t}\n   370â†’\t};\n   371â†’\n   372â†’\tconst handleClockIn = async () => {\n   373â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   374â†’\t\tconst now = Math.floor(Date.now() / 1000).toString();\n   375â†’\n   376â†’\t\tawait timeCardORM.insertTimeCardEntry([{\n   377â†’\t\t\tuser_id: user.id,\n   378â†’\t\t\tclock_in_timestamp: now,\n   379â†’\t\t\tlocation: location || null,\n   380â†’\t\t\twork_description: workDescription || null,\n   381â†’\t\t} as TimeCardEntryModel]);\n   382â†’\n   383â†’\t\tsetLocation(\"\");\n   384â†’\t\tsetWorkDescription(\"\");\n   385â†’\t\tawait loadTimeCards();\n   386â†’\t};\n   387â†’\n   388â†’\tconst handleClockOut = async () => {\n   389â†’\t\tif (!activeShift) return;\n   390â†’\n   391â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   392â†’\t\tconst now = Math.floor(Date.now() / 1000).toString();\n   393â†’\n   394â†’\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp);\n   395â†’\t\tconst clockOutTime = parseInt(now);\n   396â†’\t\tlet totalHours = (clockOutTime - clockInTime) / 3600;\n   397â†’\n   398â†’\t\t// Deduct lunch time if lunch was taken\n   399â†’\t\tif (activeShift.lunch_duration_minutes) {\n   400â†’\t\t\ttotalHours -= activeShift.lunch_duration_minutes / 60;\n   401â†’\t\t}\n   402â†’\n   403â†’\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n   404â†’\t\t\t...activeShift,\n   405â†’\t\t\tclock_out_timestamp: now,\n   406â†’\t\t\ttotal_hours: totalHours,\n   407â†’\t\t\tlocation: location || activeShift.location,\n   408â†’\t\t\twork_description: workDescription || activeShift.work_description,\n   409â†’\t\t});\n   410â†’\n   411â†’\t\tsetLocation(\"\");\n   412â†’\t\tsetWorkDescription(\"\");\n   413â†’\t\tawait loadTimeCards();\n   414â†’\t};\n   415â†’\n   416â†’\tconst handleStartLunch = async () => {\n   417â†’\t\tif (!activeShift) return;\n   418â†’\n   419â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   420â†’\t\tconst now = Math.floor(Date.now() / 1000).toString();\n   421â†’\n   422â†’\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n   423â†’\t\t\t...activeShift,\n   424â†’\t\t\tlunch_start_timestamp: now,\n   425â†’\t\t\tlocation: location || activeShift.location,\n   426â†’\t\t\twork_description: workDescription || activeShift.work_description,\n   427â†’\t\t});\n   428â†’\n   429â†’\t\tawait loadTimeCards();\n   430â†’\t};\n   431â†’\n   432â†’\tconst handleEndLunch = async () => {\n   433â†’\t\tif (!activeShift || !activeShift.lunch_start_timestamp) return;\n   434â†’\n   435â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   436â†’\t\tconst now = Math.floor(Date.now() / 1000).toString();\n   437â†’\n   438â†’\t\tconst lunchStartTime = parseInt(activeShift.lunch_start_timestamp);\n   439â†’\t\tconst lunchEndTime = parseInt(now);\n   440â†’\t\tconst lunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n   441â†’\n   442â†’\t\t// Add to existing lunch duration if there was already one\n   443â†’\t\tconst totalLunchMinutes = (activeShift.lunch_duration_minutes || 0) + lunchDurationMinutes;\n   444â†’\n   445â†’\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n   446â†’\t\t\t...activeShift,\n   447â†’\t\t\tlunch_end_timestamp: now,\n   448â†’\t\t\tlunch_duration_minutes: totalLunchMinutes,\n   449â†’\t\t});\n   450â†’\n   451â†’\t\tawait loadTimeCards();\n   452â†’\t};\n   453â†’\n   454â†’\tconst formatTime = (ms: number) => {\n   455â†’\t\tconst seconds = Math.floor(ms / 1000);\n   456â†’\t\tconst hours = Math.floor(seconds / 3600);\n   457â†’\t\tconst minutes = Math.floor((seconds % 3600) / 60);\n   458â†’\t\tconst secs = seconds % 60;\n   459â†’\t\treturn `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n   460â†’\t};\n   461â†’\n   462â†’\tconst formatDate = (timestamp: string) => {\n   463â†’\t\tconst date = new Date(parseInt(timestamp) * 1000);\n   464â†’\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n   465â†’\t};\n   466â†’\n   467â†’\tconst formatHours = (hours: number | null | undefined) => {\n   468â†’\t\tif (hours === null || hours === undefined) return \"â€”\";\n   469â†’\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n   470â†’\t};\n   471â†’\n   472â†’\tconst formatMinutes = (minutes: number | null | undefined) => {\n   473â†’\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n   474â†’\t\treturn `${Math.round(minutes)} min`;\n   475â†’\t};\n   476â†’\n   477â†’\treturn (\n   478â†’\t\t<div className=\"space-y-6\">\n   479â†’\t\t\t<Card>\n   480â†’\t\t\t\t<CardHeader className=\"pb-4\">\n   481â†’\t\t\t\t\t<div className=\"flex justify-between items-center\">\n   482â†’\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n   483â†’\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n   484â†’\t\t\t\t\t\t\t{t.clockInOut}\n   485â†’\t\t\t\t\t\t</CardTitle>\n   486â†’\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n   487â†’\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n   488â†’\t\t\t\t\t\t\t{t.addTimeCard}\n   489â†’\t\t\t\t\t\t</Button>\n   490â†’\t\t\t\t\t</div>\n   491â†’\t\t\t\t</CardHeader>\n   492â†’\t\t\t\t<CardContent className=\"space-y-4 md:space-y-6\">\n   493â†’\t\t\t\t\t{activeShift ? (\n   494â†’\t\t\t\t\t\t<div className=\"space-y-4 md:space-y-6\">\n   495â†’\t\t\t\t\t\t\t{isOnLunch ? (\n   496â†’\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n   497â†’\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n   498â†’\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n   499â†’\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n   500â†’\t\t\t\t\t\t\t\t\t\t</div>\n   501â†’\t\t\t\t\t\t\t\t\t\t<div>\n   502â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n   503â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n   504â†’\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n   505â†’\t\t\t\t\t\t\t\t\t\t\t</p>\n   506â†’\t\t\t\t\t\t\t\t\t\t</div>\n   507â†’\t\t\t\t\t\t\t\t\t</div>\n   508â†’\t\t\t\t\t\t\t\t</div>\n   509â†’\t\t\t\t\t\t\t) : (\n   510â†’\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n   511â†’\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n   512â†’\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n   513â†’\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n   514â†’\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n   515â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n   516â†’\t\t\t\t\t\t\t\t\t\t\t\t</div>\n   517â†’\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n   518â†’\t\t\t\t\t\t\t\t\t\t\t</div>\n   519â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n   520â†’\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n   521â†’\t\t\t\t\t\t\t\t\t\t\t</p>\n   522â†’\t\t\t\t\t\t\t\t\t\t\t{activeShift.location && (\n   523â†’\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n   524â†’\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ“ {activeShift.location}\n   525â†’\t\t\t\t\t\t\t\t\t\t\t\t</p>\n   526â†’\t\t\t\t\t\t\t\t\t\t\t)}\n   527â†’\t\t\t\t\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && (\n   528â†’\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n   529â†’\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ½ï¸ {formatMinutes(activeShift.lunch_duration_minutes)}\n   530â†’\t\t\t\t\t\t\t\t\t\t\t\t</p>\n   531â†’\t\t\t\t\t\t\t\t\t\t\t)}\n   532â†’\t\t\t\t\t\t\t\t\t\t</div>\n   533â†’\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n   534â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n   535â†’\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n   536â†’\t\t\t\t\t\t\t\t\t\t\t</p>\n   537â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n   538â†’\t\t\t\t\t\t\t\t\t\t</div>\n   539â†’\t\t\t\t\t\t\t\t\t</div>\n   540â†’\t\t\t\t\t\t\t\t</div>\n   541â†’\t\t\t\t\t\t\t)}\n   542â†’\n   543â†’\t\t\t\t\t\t\t{!isOnLunch && (\n   544â†’\t\t\t\t\t\t\t\t<>\n   545â†’\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   546â†’\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n   547â†’\t\t\t\t\t\t\t\t\t\t<Input\n   548â†’\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n   549â†’\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n   550â†’\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n   551â†’\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n   552â†’\t\t\t\t\t\t\t\t\t\t/>\n   553â†’\t\t\t\t\t\t\t\t\t</div>\n   554â†’\n   555â†’\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   556â†’\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n   557â†’\t\t\t\t\t\t\t\t\t\t<Textarea\n   558â†’\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n   559â†’\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n   560â†’\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n   561â†’\t\t\t\t\t\t\t\t\t\t\trows={3}\n   562â†’\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n   563â†’\t\t\t\t\t\t\t\t\t\t/>\n   564â†’\t\t\t\t\t\t\t\t\t</div>\n   565â†’\t\t\t\t\t\t\t\t</>\n   566â†’\t\t\t\t\t\t\t)}\n   567â†’\n   568â†’\t\t\t\t\t\t\t<div className=\"flex flex-col sm:grid sm:grid-cols-2 gap-3\">\n   569â†’\t\t\t\t\t\t\t\t{isOnLunch ? (\n   570â†’\t\t\t\t\t\t\t\t\t<Button\n   571â†’\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n   572â†’\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n   573â†’\t\t\t\t\t\t\t\t\t\tclassName=\"sm:col-span-2 h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n   574â†’\t\t\t\t\t\t\t\t\t>\n   575â†’\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n   576â†’\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n   577â†’\t\t\t\t\t\t\t\t\t</Button>\n   578â†’\t\t\t\t\t\t\t\t) : (\n   579â†’\t\t\t\t\t\t\t\t\t<>\n   580â†’\t\t\t\t\t\t\t\t\t\t<Button\n   581â†’\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n   582â†’\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n   583â†’\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n   584â†’\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold border-2 shadow-sm hover:shadow-md transition-shadow\"\n   585â†’\t\t\t\t\t\t\t\t\t\t>\n   586â†’\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n   587â†’\t\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n   588â†’\t\t\t\t\t\t\t\t\t\t</Button>\n   589â†’\t\t\t\t\t\t\t\t\t\t<Button\n   590â†’\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n   591â†’\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n   592â†’\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n   593â†’\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n   594â†’\t\t\t\t\t\t\t\t\t\t>\n   595â†’\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n   596â†’\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n   597â†’\t\t\t\t\t\t\t\t\t\t</Button>\n   598â†’\t\t\t\t\t\t\t\t\t</>\n   599â†’\t\t\t\t\t\t\t\t)}\n   600â†’\t\t\t\t\t\t\t</div>\n   601â†’\t\t\t\t\t\t</div>\n   602â†’\t\t\t\t\t) : (\n   603â†’\t\t\t\t\t\t<div className=\"space-y-5\">\n   604â†’\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n   605â†’\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n   606â†’\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n   607â†’\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n   608â†’\t\t\t\t\t\t\t</div>\n   609â†’\n   610â†’\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   611â†’\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n   612â†’\t\t\t\t\t\t\t\t<Input\n   613â†’\t\t\t\t\t\t\t\t\tvalue={location}\n   614â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n   615â†’\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n   616â†’\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n   617â†’\t\t\t\t\t\t\t\t/>\n   618â†’\t\t\t\t\t\t\t</div>\n   619â†’\n   620â†’\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   621â†’\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n   622â†’\t\t\t\t\t\t\t\t<Textarea\n   623â†’\t\t\t\t\t\t\t\t\tvalue={workDescription}\n   624â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n   625â†’\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n   626â†’\t\t\t\t\t\t\t\t\trows={3}\n   627â†’\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n   628â†’\t\t\t\t\t\t\t\t/>\n   629â†’\t\t\t\t\t\t\t</div>\n   630â†’\n   631â†’\t\t\t\t\t\t\t<Button\n   632â†’\t\t\t\t\t\t\t\tonClick={handleClockIn}\n   633â†’\t\t\t\t\t\t\t\tsize=\"lg\"\n   634â†’\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n   635â†’\t\t\t\t\t\t\t>\n   636â†’\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n   637â†’\t\t\t\t\t\t\t\t{t.clockIn}\n   638â†’\t\t\t\t\t\t\t</Button>\n   639â†’\t\t\t\t\t\t</div>\n   640â†’\t\t\t\t\t)}\n   641â†’\t\t\t\t</CardContent>\n   642â†’\t\t\t</Card>\n   643â†’\n   644â†’\t\t\t<Card>\n   645â†’\t\t\t\t<CardHeader>\n   646â†’\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n   647â†’\t\t\t\t\t\t<CalendarDays className=\"w-5 h-5\" />\n   648â†’\t\t\t\t\t\t{t.timeCardHistory}\n   649â†’\t\t\t\t\t</CardTitle>\n   650â†’\t\t\t\t\t<CardDescription>{t.recentRecords}</CardDescription>\n   651â†’\t\t\t\t</CardHeader>\n   652â†’\t\t\t\t<CardContent>\n   653â†’\t\t\t\t\t{timeCards.length === 0 ? (\n   654â†’\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCards}</p>\n   655â†’\t\t\t\t\t) : (\n   656â†’\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n   657â†’\t\t\t\t\t\t\t<Table>\n   658â†’\t\t\t\t\t\t\t\t<TableHeader>\n   659â†’\t\t\t\t\t\t\t\t\t<TableRow>\n   660â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n   661â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n   662â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n   663â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n   664â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n   665â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n   666â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n   667â†’\t\t\t\t\t\t\t\t\t</TableRow>\n   668â†’\t\t\t\t\t\t\t\t</TableHeader>\n   669â†’\t\t\t\t\t\t\t\t<TableBody>\n   670â†’\t\t\t\t\t\t\t\t\t{timeCards.map((tc) => (\n   671â†’\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n   672â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n   673â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n   674â†’\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n   675â†’\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n   676â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n   677â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"â€”\"}</TableCell>\n   678â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n   679â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n   680â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n   681â†’\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n   682â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n   683â†’\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n   684â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n   685â†’\t\t\t\t\t\t\t\t\t\t\t\t) : (\n   686â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n   687â†’\t\t\t\t\t\t\t\t\t\t\t\t)}\n   688â†’\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n   689â†’\t\t\t\t\t\t\t\t\t\t</TableRow>\n   690â†’\t\t\t\t\t\t\t\t\t))}\n   691â†’\t\t\t\t\t\t\t\t</TableBody>\n   692â†’\t\t\t\t\t\t\t</Table>\n   693â†’\t\t\t\t\t\t</div>\n   694â†’\t\t\t\t\t)}\n   695â†’\t\t\t\t</CardContent>\n   696â†’\t\t\t</Card>\n   697â†’\n   698â†’\t\t\t<ManualEntryDialog\n   699â†’\t\t\t\topen={showManualEntry}\n   700â†’\t\t\t\tonClose={() => setShowManualEntry(false)}\n   701â†’\t\t\t\tuserId={user.id}\n   702â†’\t\t\t\tonSave={loadTimeCards}\n   703â†’\t\t\t\tlanguage={language}\n   704â†’\t\t\t/>\n   705â†’\t\t</div>\n   706â†’\t);\n   707â†’}\n   708â†’\n   709â†’function ManagerView({ user, users, language, onUsersChange }: { user: UserModel; users: UserModel[]; language: Language; onUsersChange: () => void }) {\n   710â†’\tconst [activeTab, setActiveTab] = useState(\"timecards\");\n   711â†’\n   712â†’\tconst t = translations[language];\n   713â†’\n   714â†’\treturn (\n   715â†’\t\t<Tabs value={activeTab} onValueChange={setActiveTab}>\n   716â†’\t\t\t<TabsList className=\"grid w-full grid-cols-3\">\n   717â†’\t\t\t\t<TabsTrigger value=\"timecards\">\n   718â†’\t\t\t\t\t<Clock className=\"w-4 h-4 mr-2\" />\n   719â†’\t\t\t\t\t{t.timeCards}\n   720â†’\t\t\t\t</TabsTrigger>\n   721â†’\t\t\t\t<TabsTrigger value=\"reports\">\n   722â†’\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n   723â†’\t\t\t\t\t{t.reports}\n   724â†’\t\t\t\t</TabsTrigger>\n   725â†’\t\t\t\t<TabsTrigger value=\"employees\">\n   726â†’\t\t\t\t\t<Users className=\"w-4 h-4 mr-2\" />\n   727â†’\t\t\t\t\t{t.employees}\n   728â†’\t\t\t\t</TabsTrigger>\n   729â†’\t\t\t</TabsList>\n   730â†’\n   731â†’\t\t\t<TabsContent value=\"timecards\" className=\"space-y-4\">\n   732â†’\t\t\t\t<TimeCardsTab users={users} language={language} />\n   733â†’\t\t\t</TabsContent>\n   734â†’\n   735â†’\t\t\t<TabsContent value=\"reports\" className=\"space-y-4\">\n   736â†’\t\t\t\t<ReportsTab users={users} language={language} />\n   737â†’\t\t\t</TabsContent>\n   738â†’\n   739â†’\t\t\t<TabsContent value=\"employees\" className=\"space-y-4\">\n   740â†’\t\t\t\t<EmployeesTab users={users} language={language} onUsersChange={onUsersChange} />\n   741â†’\t\t\t</TabsContent>\n   742â†’\t\t</Tabs>\n   743â†’\t);\n   744â†’}\n   745â†’\n   746â†’function TimeCardsTab({ users, language }: { users: UserModel[]; language: Language }) {\n   747â†’\tconst [allTimeCards, setAllTimeCards] = useState<TimeCardEntryModel[]>([]);\n   748â†’\tconst [filteredCards, setFilteredCards] = useState<TimeCardEntryModel[]>([]);\n   749â†’\tconst [selectedEmployee, setSelectedEmployee] = useState<string>(\"all\");\n   750â†’\tconst [dateFilter, setDateFilter] = useState<string>(\"\");\n   751â†’\tconst [editingCard, setEditingCard] = useState<TimeCardEntryModel | null>(null);\n   752â†’\tconst [editClockIn, setEditClockIn] = useState(\"\");\n   753â†’\tconst [editClockOut, setEditClockOut] = useState(\"\");\n   754â†’\tconst [editLocation, setEditLocation] = useState(\"\");\n   755â†’\tconst [editWorkDescription, setEditWorkDescription] = useState(\"\");\n   756â†’\tconst [editLunchStart, setEditLunchStart] = useState(\"\");\n   757â†’\tconst [editLunchEnd, setEditLunchEnd] = useState(\"\");\n   758â†’\tconst [showManualEntry, setShowManualEntry] = useState(false);\n   759â†’\tconst [manualEntryUserId, setManualEntryUserId] = useState<string>(\"\");\n   760â†’\n   761â†’\tconst t = translations[language];\n   762â†’\n   763â†’\tuseEffect(() => {\n   764â†’\t\tloadAllTimeCards();\n   765â†’\t}, []);\n   766â†’\n   767â†’\tuseEffect(() => {\n   768â†’\t\tapplyFilters();\n   769â†’\t}, [allTimeCards, selectedEmployee, dateFilter]);\n   770â†’\n   771â†’\tconst loadAllTimeCards = async () => {\n   772â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   773â†’\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n   774â†’\n   775â†’\t\t// Sort by clock in time (newest first)\n   776â†’\t\tconst sorted = allCards.sort((a, b) =>\n   777â†’\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n   778â†’\t\t);\n   779â†’\n   780â†’\t\tsetAllTimeCards(sorted);\n   781â†’\t};\n   782â†’\n   783â†’\tconst applyFilters = () => {\n   784â†’\t\tlet filtered = [...allTimeCards];\n   785â†’\n   786â†’\t\t// Filter by employee\n   787â†’\t\tif (selectedEmployee !== \"all\") {\n   788â†’\t\t\tfiltered = filtered.filter(tc => tc.user_id === selectedEmployee);\n   789â†’\t\t}\n   790â†’\n   791â†’\t\t// Filter by date\n   792â†’\t\tif (dateFilter) {\n   793â†’\t\t\tconst filterDate = new Date(dateFilter);\n   794â†’\t\t\tconst filterTimestamp = Math.floor(filterDate.getTime() / 1000);\n   795â†’\t\t\tconst nextDayTimestamp = filterTimestamp + 86400; // +24 hours\n   796â†’\n   797â†’\t\t\tfiltered = filtered.filter(tc => {\n   798â†’\t\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n   799â†’\t\t\t\treturn clockIn >= filterTimestamp && clockIn < nextDayTimestamp;\n   800â†’\t\t\t});\n   801â†’\t\t}\n   802â†’\n   803â†’\t\tsetFilteredCards(filtered);\n   804â†’\t};\n   805â†’\n   806â†’\tconst getUserName = (userId: string) => {\n   807â†’\t\tconst user = users.find(u => u.id === userId);\n   808â†’\t\treturn user?.name || \"Unknown\";\n   809â†’\t};\n   810â†’\n   811â†’\tconst formatDate = (timestamp: string) => {\n   812â†’\t\tconst date = new Date(parseInt(timestamp) * 1000);\n   813â†’\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n   814â†’\t};\n   815â†’\n   816â†’\tconst formatHours = (hours: number | null | undefined) => {\n   817â†’\t\tif (hours === null || hours === undefined) return \"â€”\";\n   818â†’\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n   819â†’\t};\n   820â†’\n   821â†’\tconst formatMinutes = (minutes: number | null | undefined) => {\n   822â†’\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n   823â†’\t\treturn `${Math.round(minutes)} min`;\n   824â†’\t};\n   825â†’\n   826â†’\tconst calculateTotalHours = (period: 'day' | 'week') => {\n   827â†’\t\tconst now = Date.now() / 1000;\n   828â†’\t\tconst periodSeconds = period === 'day' ? 86400 : 604800; // 1 day or 7 days\n   829â†’\t\tconst startTime = now - periodSeconds;\n   830â†’\n   831â†’\t\tconst relevantCards = allTimeCards.filter(tc => {\n   832â†’\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n   833â†’\t\t\treturn clockIn >= startTime && tc.total_hours;\n   834â†’\t\t});\n   835â†’\n   836â†’\t\treturn relevantCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n   837â†’\t};\n   838â†’\n   839â†’\tconst handleEditCard = (card: TimeCardEntryModel) => {\n   840â†’\t\tsetEditingCard(card);\n   841â†’\t\tsetEditClockIn(new Date(parseInt(card.clock_in_timestamp) * 1000).toISOString().slice(0, 16));\n   842â†’\t\tsetEditClockOut(\n   843â†’\t\t\tcard.clock_out_timestamp\n   844â†’\t\t\t\t? new Date(parseInt(card.clock_out_timestamp) * 1000).toISOString().slice(0, 16)\n   845â†’\t\t\t\t: \"\"\n   846â†’\t\t);\n   847â†’\t\tsetEditLocation(card.location || \"\");\n   848â†’\t\tsetEditWorkDescription(card.work_description || \"\");\n   849â†’\t\tsetEditLunchStart(\n   850â†’\t\t\tcard.lunch_start_timestamp\n   851â†’\t\t\t\t? new Date(parseInt(card.lunch_start_timestamp) * 1000).toISOString().slice(0, 16)\n   852â†’\t\t\t\t: \"\"\n   853â†’\t\t);\n   854â†’\t\tsetEditLunchEnd(\n   855â†’\t\t\tcard.lunch_end_timestamp\n   856â†’\t\t\t\t? new Date(parseInt(card.lunch_end_timestamp) * 1000).toISOString().slice(0, 16)\n   857â†’\t\t\t\t: \"\"\n   858â†’\t\t);\n   859â†’\t};\n   860â†’\n   861â†’\tconst handleSaveEdit = async () => {\n   862â†’\t\tif (!editingCard) return;\n   863â†’\n   864â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   865â†’\t\tconst clockInTimestamp = Math.floor(new Date(editClockIn).getTime() / 1000).toString();\n   866â†’\t\tconst clockOutTimestamp = editClockOut\n   867â†’\t\t\t? Math.floor(new Date(editClockOut).getTime() / 1000).toString()\n   868â†’\t\t\t: null;\n   869â†’\t\tconst lunchStartTimestamp = editLunchStart\n   870â†’\t\t\t? Math.floor(new Date(editLunchStart).getTime() / 1000).toString()\n   871â†’\t\t\t: null;\n   872â†’\t\tconst lunchEndTimestamp = editLunchEnd\n   873â†’\t\t\t? Math.floor(new Date(editLunchEnd).getTime() / 1000).toString()\n   874â†’\t\t\t: null;\n   875â†’\n   876â†’\t\tlet totalHours = null;\n   877â†’\t\tlet lunchDurationMinutes = null;\n   878â†’\n   879â†’\t\t// Calculate lunch duration\n   880â†’\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n   881â†’\t\t\tconst lunchStart = parseInt(lunchStartTimestamp);\n   882â†’\t\t\tconst lunchEnd = parseInt(lunchEndTimestamp);\n   883â†’\t\t\tlunchDurationMinutes = (lunchEnd - lunchStart) / 60;\n   884â†’\t\t}\n   885â†’\n   886â†’\t\t// Calculate total hours\n   887â†’\t\tif (clockOutTimestamp) {\n   888â†’\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n   889â†’\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n   890â†’\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n   891â†’\n   892â†’\t\t\t// Deduct lunch time\n   893â†’\t\t\tif (lunchDurationMinutes) {\n   894â†’\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n   895â†’\t\t\t}\n   896â†’\t\t}\n   897â†’\n   898â†’\t\tawait timeCardORM.setTimeCardEntryById(editingCard.id, {\n   899â†’\t\t\t...editingCard,\n   900â†’\t\t\tclock_in_timestamp: clockInTimestamp,\n   901â†’\t\t\tclock_out_timestamp: clockOutTimestamp,\n   902â†’\t\t\ttotal_hours: totalHours,\n   903â†’\t\t\tlocation: editLocation || null,\n   904â†’\t\t\twork_description: editWorkDescription || null,\n   905â†’\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n   906â†’\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n   907â†’\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n   908â†’\t\t});\n   909â†’\n   910â†’\t\tsetEditingCard(null);\n   911â†’\t\tawait loadAllTimeCards();\n   912â†’\t};\n   913â†’\n   914â†’\tconst handleDeleteTimeCard = async (card: TimeCardEntryModel) => {\n   915â†’\t\tif (!window.confirm(t.confirmDeleteTimeCard)) {\n   916â†’\t\t\treturn;\n   917â†’\t\t}\n   918â†’\n   919â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n   920â†’\t\tawait timeCardORM.deleteTimeCardEntryById(card.id);\n   921â†’\t\tawait loadAllTimeCards();\n   922â†’\t};\n   923â†’\n   924â†’\tconst handleAddManualEntry = (userId: string) => {\n   925â†’\t\tsetManualEntryUserId(userId);\n   926â†’\t\tsetShowManualEntry(true);\n   927â†’\t};\n   928â†’\n   929â†’\treturn (\n   930â†’\t\t<>\n   931â†’\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n   932â†’\t\t\t\t<Card>\n   933â†’\t\t\t\t\t<CardHeader className=\"pb-3\">\n   934â†’\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n   935â†’\t\t\t\t\t\t\t<Users className=\"w-4 h-4\" />\n   936â†’\t\t\t\t\t\t\t{t.totalEmployees}\n   937â†’\t\t\t\t\t\t</CardTitle>\n   938â†’\t\t\t\t\t</CardHeader>\n   939â†’\t\t\t\t\t<CardContent>\n   940â†’\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{users.filter(u => u.role === UserRole.Employee).length}</div>\n   941â†’\t\t\t\t\t</CardContent>\n   942â†’\t\t\t\t</Card>\n   943â†’\n   944â†’\t\t\t\t<Card>\n   945â†’\t\t\t\t\t<CardHeader className=\"pb-3\">\n   946â†’\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n   947â†’\t\t\t\t\t\t\t<Timer className=\"w-4 h-4\" />\n   948â†’\t\t\t\t\t\t\t{t.hoursToday}\n   949â†’\t\t\t\t\t\t</CardTitle>\n   950â†’\t\t\t\t\t</CardHeader>\n   951â†’\t\t\t\t\t<CardContent>\n   952â†’\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('day').toFixed(2)}</div>\n   953â†’\t\t\t\t\t</CardContent>\n   954â†’\t\t\t\t</Card>\n   955â†’\n   956â†’\t\t\t\t<Card>\n   957â†’\t\t\t\t\t<CardHeader className=\"pb-3\">\n   958â†’\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n   959â†’\t\t\t\t\t\t\t<CalendarDays className=\"w-4 h-4\" />\n   960â†’\t\t\t\t\t\t\t{t.hoursThisWeek}\n   961â†’\t\t\t\t\t\t</CardTitle>\n   962â†’\t\t\t\t\t</CardHeader>\n   963â†’\t\t\t\t\t<CardContent>\n   964â†’\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('week').toFixed(2)}</div>\n   965â†’\t\t\t\t\t</CardContent>\n   966â†’\t\t\t\t</Card>\n   967â†’\t\t\t</div>\n   968â†’\n   969â†’\t\t\t<Card>\n   970â†’\t\t\t\t<CardHeader>\n   971â†’\t\t\t\t\t<div className=\"flex justify-between items-center\">\n   972â†’\t\t\t\t\t\t<div>\n   973â†’\t\t\t\t\t\t\t<CardTitle>{t.allEmployeeTimeCards}</CardTitle>\n   974â†’\t\t\t\t\t\t\t<CardDescription>{t.viewManageRecords}</CardDescription>\n   975â†’\t\t\t\t\t\t</div>\n   976â†’\t\t\t\t\t\t<Button onClick={() => handleAddManualEntry(\"\")} variant=\"outline\" size=\"sm\">\n   977â†’\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n   978â†’\t\t\t\t\t\t\t{t.addTimeCard}\n   979â†’\t\t\t\t\t\t</Button>\n   980â†’\t\t\t\t\t</div>\n   981â†’\t\t\t\t</CardHeader>\n   982â†’\t\t\t\t<CardContent className=\"space-y-4\">\n   983â†’\t\t\t\t\t<div className=\"flex gap-4 flex-wrap\">\n   984â†’\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n   985â†’\t\t\t\t\t\t\t<Label>{t.filterByEmployee}</Label>\n   986â†’\t\t\t\t\t\t\t<Select value={selectedEmployee} onValueChange={setSelectedEmployee}>\n   987â†’\t\t\t\t\t\t\t\t<SelectTrigger>\n   988â†’\t\t\t\t\t\t\t\t\t<SelectValue />\n   989â†’\t\t\t\t\t\t\t\t</SelectTrigger>\n   990â†’\t\t\t\t\t\t\t\t<SelectContent>\n   991â†’\t\t\t\t\t\t\t\t\t<SelectItem value=\"all\">{t.allEmployees}</SelectItem>\n   992â†’\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n   993â†’\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n   994â†’\t\t\t\t\t\t\t\t\t\t\t{u.name}\n   995â†’\t\t\t\t\t\t\t\t\t\t</SelectItem>\n   996â†’\t\t\t\t\t\t\t\t\t))}\n   997â†’\t\t\t\t\t\t\t\t</SelectContent>\n   998â†’\t\t\t\t\t\t\t</Select>\n   999â†’\t\t\t\t\t\t</div>\n  1000â†’\n  1001â†’\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n  1002â†’\t\t\t\t\t\t\t<Label>{t.filterByDate}</Label>\n  1003â†’\t\t\t\t\t\t\t<Input\n  1004â†’\t\t\t\t\t\t\t\ttype=\"date\"\n  1005â†’\t\t\t\t\t\t\t\tvalue={dateFilter}\n  1006â†’\t\t\t\t\t\t\t\tonChange={(e) => setDateFilter(e.target.value)}\n  1007â†’\t\t\t\t\t\t\t/>\n  1008â†’\t\t\t\t\t\t</div>\n  1009â†’\n  1010â†’\t\t\t\t\t\t{(selectedEmployee !== \"all\" || dateFilter) && (\n  1011â†’\t\t\t\t\t\t\t<div className=\"flex items-end\">\n  1012â†’\t\t\t\t\t\t\t\t<Button\n  1013â†’\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n  1014â†’\t\t\t\t\t\t\t\t\tonClick={() => {\n  1015â†’\t\t\t\t\t\t\t\t\t\tsetSelectedEmployee(\"all\");\n  1016â†’\t\t\t\t\t\t\t\t\t\tsetDateFilter(\"\");\n  1017â†’\t\t\t\t\t\t\t\t\t}}\n  1018â†’\t\t\t\t\t\t\t\t>\n  1019â†’\t\t\t\t\t\t\t\t\t{t.clearFilters}\n  1020â†’\t\t\t\t\t\t\t\t</Button>\n  1021â†’\t\t\t\t\t\t\t</div>\n  1022â†’\t\t\t\t\t\t)}\n  1023â†’\t\t\t\t\t</div>\n  1024â†’\n  1025â†’\t\t\t\t\t{filteredCards.length === 0 ? (\n  1026â†’\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCardsFound}</p>\n  1027â†’\t\t\t\t\t) : (\n  1028â†’\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n  1029â†’\t\t\t\t\t\t\t<Table>\n  1030â†’\t\t\t\t\t\t\t\t<TableHeader>\n  1031â†’\t\t\t\t\t\t\t\t\t<TableRow>\n  1032â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n  1033â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n  1034â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n  1035â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n  1036â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n  1037â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n  1038â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n  1039â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n  1040â†’\t\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n  1041â†’\t\t\t\t\t\t\t\t\t</TableRow>\n  1042â†’\t\t\t\t\t\t\t\t</TableHeader>\n  1043â†’\t\t\t\t\t\t\t\t<TableBody>\n  1044â†’\t\t\t\t\t\t\t\t\t{filteredCards.map((tc) => (\n  1045â†’\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n  1046â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n  1047â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n  1048â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n  1049â†’\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n  1050â†’\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1051â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n  1052â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"â€”\"}</TableCell>\n  1053â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n  1054â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n  1055â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n  1056â†’\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n  1057â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n  1058â†’\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n  1059â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n  1060â†’\t\t\t\t\t\t\t\t\t\t\t\t) : (\n  1061â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n  1062â†’\t\t\t\t\t\t\t\t\t\t\t\t)}\n  1063â†’\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1064â†’\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n  1065â†’\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n  1066â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n  1067â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n  1068â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n  1069â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditCard(tc)}\n  1070â†’\t\t\t\t\t\t\t\t\t\t\t\t\t>\n  1071â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n  1072â†’\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n  1073â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n  1074â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n  1075â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n  1076â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteTimeCard(tc)}\n  1077â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n  1078â†’\t\t\t\t\t\t\t\t\t\t\t\t\t>\n  1079â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"w-4 h-4\" />\n  1080â†’\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n  1081â†’\t\t\t\t\t\t\t\t\t\t\t\t</div>\n  1082â†’\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1083â†’\t\t\t\t\t\t\t\t\t\t</TableRow>\n  1084â†’\t\t\t\t\t\t\t\t\t))}\n  1085â†’\t\t\t\t\t\t\t\t</TableBody>\n  1086â†’\t\t\t\t\t\t\t</Table>\n  1087â†’\t\t\t\t\t\t</div>\n  1088â†’\t\t\t\t\t)}\n  1089â†’\t\t\t\t</CardContent>\n  1090â†’\t\t\t</Card>\n  1091â†’\n  1092â†’\t\t\t<Dialog open={!!editingCard} onOpenChange={(open) => !open && setEditingCard(null)}>\n  1093â†’\t\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n  1094â†’\t\t\t\t\t<DialogHeader>\n  1095â†’\t\t\t\t\t\t<DialogTitle>{t.editTimeCard}</DialogTitle>\n  1096â†’\t\t\t\t\t</DialogHeader>\n  1097â†’\t\t\t\t\t<div className=\"space-y-4\">\n  1098â†’\t\t\t\t\t\t<div>\n  1099â†’\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n  1100â†’\t\t\t\t\t\t\t<Input value={editingCard ? getUserName(editingCard.user_id) : \"\"} disabled />\n  1101â†’\t\t\t\t\t\t</div>\n  1102â†’\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n  1103â†’\t\t\t\t\t\t\t<div>\n  1104â†’\t\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n  1105â†’\t\t\t\t\t\t\t\t<Input\n  1106â†’\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1107â†’\t\t\t\t\t\t\t\t\tvalue={editClockIn}\n  1108â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockIn(e.target.value)}\n  1109â†’\t\t\t\t\t\t\t\t/>\n  1110â†’\t\t\t\t\t\t\t</div>\n  1111â†’\t\t\t\t\t\t\t<div>\n  1112â†’\t\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n  1113â†’\t\t\t\t\t\t\t\t<Input\n  1114â†’\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1115â†’\t\t\t\t\t\t\t\t\tvalue={editClockOut}\n  1116â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockOut(e.target.value)}\n  1117â†’\t\t\t\t\t\t\t\t/>\n  1118â†’\t\t\t\t\t\t\t</div>\n  1119â†’\t\t\t\t\t\t</div>\n  1120â†’\t\t\t\t\t\t<div>\n  1121â†’\t\t\t\t\t\t\t<Label>{t.location}</Label>\n  1122â†’\t\t\t\t\t\t\t<Input\n  1123â†’\t\t\t\t\t\t\t\tvalue={editLocation}\n  1124â†’\t\t\t\t\t\t\t\tonChange={(e) => setEditLocation(e.target.value)}\n  1125â†’\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n  1126â†’\t\t\t\t\t\t\t/>\n  1127â†’\t\t\t\t\t\t</div>\n  1128â†’\t\t\t\t\t\t<div>\n  1129â†’\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n  1130â†’\t\t\t\t\t\t\t<Textarea\n  1131â†’\t\t\t\t\t\t\t\tvalue={editWorkDescription}\n  1132â†’\t\t\t\t\t\t\t\tonChange={(e) => setEditWorkDescription(e.target.value)}\n  1133â†’\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n  1134â†’\t\t\t\t\t\t\t\trows={4}\n  1135â†’\t\t\t\t\t\t\t/>\n  1136â†’\t\t\t\t\t\t</div>\n  1137â†’\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n  1138â†’\t\t\t\t\t\t\t<div>\n  1139â†’\t\t\t\t\t\t\t\t<Label>{t.lunchStartTime}</Label>\n  1140â†’\t\t\t\t\t\t\t\t<Input\n  1141â†’\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1142â†’\t\t\t\t\t\t\t\t\tvalue={editLunchStart}\n  1143â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchStart(e.target.value)}\n  1144â†’\t\t\t\t\t\t\t\t/>\n  1145â†’\t\t\t\t\t\t\t</div>\n  1146â†’\t\t\t\t\t\t\t<div>\n  1147â†’\t\t\t\t\t\t\t\t<Label>{t.lunchEndTime}</Label>\n  1148â†’\t\t\t\t\t\t\t\t<Input\n  1149â†’\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1150â†’\t\t\t\t\t\t\t\t\tvalue={editLunchEnd}\n  1151â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchEnd(e.target.value)}\n  1152â†’\t\t\t\t\t\t\t\t/>\n  1153â†’\t\t\t\t\t\t\t</div>\n  1154â†’\t\t\t\t\t\t</div>\n  1155â†’\t\t\t\t\t</div>\n  1156â†’\t\t\t\t\t<DialogFooter>\n  1157â†’\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingCard(null)}>\n  1158â†’\t\t\t\t\t\t\t{t.cancel}\n  1159â†’\t\t\t\t\t\t</Button>\n  1160â†’\t\t\t\t\t\t<Button onClick={handleSaveEdit}>\n  1161â†’\t\t\t\t\t\t\t{t.saveChanges}\n  1162â†’\t\t\t\t\t\t</Button>\n  1163â†’\t\t\t\t\t</DialogFooter>\n  1164â†’\t\t\t\t</DialogContent>\n  1165â†’\t\t\t</Dialog>\n  1166â†’\n  1167â†’\t\t\t<ManualEntryDialog\n  1168â†’\t\t\t\topen={showManualEntry}\n  1169â†’\t\t\t\tonClose={() => setShowManualEntry(false)}\n  1170â†’\t\t\t\tuserId={manualEntryUserId}\n  1171â†’\t\t\t\tonSave={loadAllTimeCards}\n  1172â†’\t\t\t\tlanguage={language}\n  1173â†’\t\t\t\tusers={users}\n  1174â†’\t\t\t/>\n  1175â†’\t\t</>\n  1176â†’\t);\n  1177â†’}\n  1178â†’\n  1179â†’function ReportsTab({ users, language }: { users: UserModel[]; language: Language }) {\n  1180â†’\tconst [weekStart, setWeekStart] = useState(\"\");\n  1181â†’\tconst [reportData, setReportData] = useState<{ user: UserModel; regularHours: number; overtimeHours: number; totalHours: number }[]>([]);\n  1182â†’\tconst [detailedTimeCards, setDetailedTimeCards] = useState<TimeCardEntryModel[]>([]);\n  1183â†’\n  1184â†’\tconst t = translations[language];\n  1185â†’\n  1186â†’\tuseEffect(() => {\n  1187â†’\t\t// Set default to current week\n  1188â†’\t\tconst today = new Date();\n  1189â†’\t\tconst monday = new Date(today);\n  1190â†’\t\tmonday.setDate(today.getDate() - today.getDay() + 1);\n  1191â†’\t\tsetWeekStart(monday.toISOString().slice(0, 10));\n  1192â†’\t}, []);\n  1193â†’\n  1194â†’\tuseEffect(() => {\n  1195â†’\t\tif (weekStart) {\n  1196â†’\t\t\tloadWeeklyReport();\n  1197â†’\t\t}\n  1198â†’\t}, [weekStart, users]);\n  1199â†’\n  1200â†’\tconst loadWeeklyReport = async () => {\n  1201â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n  1202â†’\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n  1203â†’\n  1204â†’\t\tconst weekStartDate = new Date(weekStart);\n  1205â†’\t\tconst weekStartTimestamp = Math.floor(weekStartDate.getTime() / 1000);\n  1206â†’\t\tconst weekEndTimestamp = weekStartTimestamp + 604800; // 7 days\n  1207â†’\n  1208â†’\t\tconst weekCards = allCards.filter(tc => {\n  1209â†’\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n  1210â†’\t\t\treturn clockIn >= weekStartTimestamp && clockIn < weekEndTimestamp && tc.total_hours;\n  1211â†’\t\t});\n  1212â†’\n  1213â†’\t\t// Store detailed time cards\n  1214â†’\t\tsetDetailedTimeCards(weekCards.sort((a, b) => parseInt(a.clock_in_timestamp) - parseInt(b.clock_in_timestamp)));\n  1215â†’\n  1216â†’\t\tconst employeeHours = users\n  1217â†’\t\t\t.filter(u => u.role === UserRole.Employee)\n  1218â†’\t\t\t.map(user => {\n  1219â†’\t\t\t\tconst userCards = weekCards.filter(tc => tc.user_id === user.id);\n  1220â†’\t\t\t\tconst totalHours = userCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n  1221â†’\t\t\t\tconst regularHours = Math.min(totalHours, 40);\n  1222â†’\t\t\t\tconst overtimeHours = Math.max(totalHours - 40, 0);\n  1223â†’\n  1224â†’\t\t\t\treturn {\n  1225â†’\t\t\t\t\tuser,\n  1226â†’\t\t\t\t\tregularHours,\n  1227â†’\t\t\t\t\tovertimeHours,\n  1228â†’\t\t\t\t\ttotalHours,\n  1229â†’\t\t\t\t};\n  1230â†’\t\t\t});\n  1231â†’\n  1232â†’\t\tsetReportData(employeeHours);\n  1233â†’\t};\n  1234â†’\n  1235â†’\tconst formatHours = (hours: number) => {\n  1236â†’\t\treturn `${hours.toFixed(2)} hrs`;\n  1237â†’\t};\n  1238â†’\n  1239â†’\tconst formatDate = (timestamp: string) => {\n  1240â†’\t\tconst date = new Date(parseInt(timestamp) * 1000);\n  1241â†’\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n  1242â†’\t};\n  1243â†’\n  1244â†’\tconst formatDateOnly = (timestamp: string) => {\n  1245â†’\t\tconst date = new Date(parseInt(timestamp) * 1000);\n  1246â†’\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US');\n  1247â†’\t};\n  1248â†’\n  1249â†’\tconst getDayOfWeek = (timestamp: string) => {\n  1250â†’\t\tconst date = new Date(parseInt(timestamp) * 1000);\n  1251â†’\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US', { weekday: 'long' });\n  1252â†’\t};\n  1253â†’\n  1254â†’\tconst getUserName = (userId: string) => {\n  1255â†’\t\tconst user = users.find(u => u.id === userId);\n  1256â†’\t\treturn user?.name || \"Unknown\";\n  1257â†’\t};\n  1258â†’\n  1259â†’\tconst handlePrint = () => {\n  1260â†’\t\twindow.print();\n  1261â†’\t};\n  1262â†’\n  1263â†’\tconst handleExportCSV = () => {\n  1264â†’\t\tif (detailedTimeCards.length === 0) return;\n  1265â†’\n  1266â†’\t\t// Create CSV header\n  1267â†’\t\tconst headers = [\n  1268â†’\t\t\tt.employeeName,\n  1269â†’\t\t\tt.date,\n  1270â†’\t\t\tt.day,\n  1271â†’\t\t\tt.clockInTime,\n  1272â†’\t\t\tt.clockOutTime,\n  1273â†’\t\t\tt.location,\n  1274â†’\t\t\tt.workDescription,\n  1275â†’\t\t\tt.lunchDuration,\n  1276â†’\t\t\tt.hours\n  1277â†’\t\t];\n  1278â†’\n  1279â†’\t\t// Create CSV rows\n  1280â†’\t\tconst rows = detailedTimeCards.map(tc => {\n  1281â†’\t\t\tconst userName = getUserName(tc.user_id);\n  1282â†’\t\t\tconst date = formatDateOnly(tc.clock_in_timestamp);\n  1283â†’\t\t\tconst day = getDayOfWeek(tc.clock_in_timestamp);\n  1284â†’\t\t\tconst clockIn = formatDate(tc.clock_in_timestamp);\n  1285â†’\t\t\tconst clockOut = tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\";\n  1286â†’\t\t\tconst location = tc.location || \"â€”\";\n  1287â†’\t\t\tconst workDescription = (tc.work_description || \"â€”\").replace(/\"/g, '\"\"'); // Escape quotes\n  1288â†’\t\t\tconst lunchDuration = tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"â€”\";\n  1289â†’\t\t\tconst hours = tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"â€”\";\n  1290â†’\n  1291â†’\t\t\treturn [\n  1292â†’\t\t\t\t`\"${userName}\"`,\n  1293â†’\t\t\t\t`\"${date}\"`,\n  1294â†’\t\t\t\t`\"${day}\"`,\n  1295â†’\t\t\t\t`\"${clockIn}\"`,\n  1296â†’\t\t\t\t`\"${clockOut}\"`,\n  1297â†’\t\t\t\t`\"${location}\"`,\n  1298â†’\t\t\t\t`\"${workDescription}\"`,\n  1299â†’\t\t\t\t`\"${lunchDuration}\"`,\n  1300â†’\t\t\t\t`\"${hours}\"`\n  1301â†’\t\t\t].join(',');\n  1302â†’\t\t});\n  1303â†’\n  1304â†’\t\t// Combine header and rows\n  1305â†’\t\tconst csv = [headers.join(','), ...rows].join('\\n');\n  1306â†’\n  1307â†’\t\t// Create blob and download\n  1308â†’\t\tconst blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  1309â†’\t\tconst link = document.createElement('a');\n  1310â†’\t\tconst url = URL.createObjectURL(blob);\n  1311â†’\t\tlink.setAttribute('href', url);\n  1312â†’\t\tlink.setAttribute('download', `weekly-report-${weekStart}.csv`);\n  1313â†’\t\tlink.style.visibility = 'hidden';\n  1314â†’\t\tdocument.body.appendChild(link);\n  1315â†’\t\tlink.click();\n  1316â†’\t\tdocument.body.removeChild(link);\n  1317â†’\t};\n  1318â†’\n  1319â†’\treturn (\n  1320â†’\t\t<div className=\"space-y-4\">\n  1321â†’\t\t\t<Card>\n  1322â†’\t\t\t\t<CardHeader>\n  1323â†’\t\t\t\t\t<div className=\"flex justify-between items-center\">\n  1324â†’\t\t\t\t\t\t<div>\n  1325â†’\t\t\t\t\t\t\t<CardTitle>{t.weeklyReport}</CardTitle>\n  1326â†’\t\t\t\t\t\t\t<CardDescription>Overtime calculated for hours worked beyond 40 hours/week</CardDescription>\n  1327â†’\t\t\t\t\t\t</div>\n  1328â†’\t\t\t\t\t\t<div className=\"flex gap-2 print:hidden\">\n  1329â†’\t\t\t\t\t\t\t<Button onClick={handleExportCSV} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n  1330â†’\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n  1331â†’\t\t\t\t\t\t\t\t{t.exportCSV}\n  1332â†’\t\t\t\t\t\t\t</Button>\n  1333â†’\t\t\t\t\t\t\t<Button onClick={handlePrint} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n  1334â†’\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n  1335â†’\t\t\t\t\t\t\t\t{t.printReport}\n  1336â†’\t\t\t\t\t\t\t</Button>\n  1337â†’\t\t\t\t\t\t</div>\n  1338â†’\t\t\t\t\t</div>\n  1339â†’\t\t\t\t</CardHeader>\n  1340â†’\t\t\t\t<CardContent className=\"space-y-4\">\n  1341â†’\t\t\t\t\t<div className=\"max-w-xs print:hidden\">\n  1342â†’\t\t\t\t\t\t<Label>{t.selectWeek}</Label>\n  1343â†’\t\t\t\t\t\t<Input\n  1344â†’\t\t\t\t\t\t\ttype=\"date\"\n  1345â†’\t\t\t\t\t\t\tvalue={weekStart}\n  1346â†’\t\t\t\t\t\t\tonChange={(e) => setWeekStart(e.target.value)}\n  1347â†’\t\t\t\t\t\t/>\n  1348â†’\t\t\t\t\t</div>\n  1349â†’\n  1350â†’\t\t\t\t\t{reportData.length === 0 ? (\n  1351â†’\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noReportData}</p>\n  1352â†’\t\t\t\t\t) : (\n  1353â†’\t\t\t\t\t\t<>\n  1354â†’\t\t\t\t\t\t\t{/* Summary Table */}\n  1355â†’\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n  1356â†’\t\t\t\t\t\t\t\t<Table>\n  1357â†’\t\t\t\t\t\t\t\t\t<TableHeader>\n  1358â†’\t\t\t\t\t\t\t\t\t\t<TableRow>\n  1359â†’\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n  1360â†’\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.regularHours}</TableHead>\n  1361â†’\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.overtimeHours}</TableHead>\n  1362â†’\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.totalHours}</TableHead>\n  1363â†’\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n  1364â†’\t\t\t\t\t\t\t\t\t\t</TableRow>\n  1365â†’\t\t\t\t\t\t\t\t\t</TableHeader>\n  1366â†’\t\t\t\t\t\t\t\t\t<TableBody>\n  1367â†’\t\t\t\t\t\t\t\t\t\t{reportData.map(({ user, regularHours, overtimeHours, totalHours }) => (\n  1368â†’\t\t\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n  1369â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n  1370â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{formatHours(regularHours)}</TableCell>\n  1371â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n  1372â†’\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 ? (\n  1373â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-orange-600 font-semibold\">{formatHours(overtimeHours)}</span>\n  1374â†’\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n  1375â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatHours(0)\n  1376â†’\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n  1377â†’\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1378â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-semibold\">{formatHours(totalHours)}</TableCell>\n  1379â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n  1380â†’\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 && (\n  1381â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">\n  1382â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AlertCircle className=\"w-3 h-3 mr-1\" />\n  1383â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.overtimeAlert}\n  1384â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n  1385â†’\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n  1386â†’\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1387â†’\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n  1388â†’\t\t\t\t\t\t\t\t\t\t))}\n  1389â†’\t\t\t\t\t\t\t\t\t</TableBody>\n  1390â†’\t\t\t\t\t\t\t\t</Table>\n  1391â†’\t\t\t\t\t\t\t</div>\n  1392â†’\n  1393â†’\t\t\t\t\t\t\t{/* Detailed Time Cards Table */}\n  1394â†’\t\t\t\t\t\t\t<div className=\"mt-8\">\n  1395â†’\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold mb-4\">{t.detailedReport}</h3>\n  1396â†’\t\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n  1397â†’\t\t\t\t\t\t\t\t\t<Table>\n  1398â†’\t\t\t\t\t\t\t\t\t\t<TableHeader>\n  1399â†’\t\t\t\t\t\t\t\t\t\t\t<TableRow>\n  1400â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n  1401â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.date}</TableHead>\n  1402â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.day}</TableHead>\n  1403â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n  1404â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n  1405â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n  1406â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n  1407â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n  1408â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n  1409â†’\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n  1410â†’\t\t\t\t\t\t\t\t\t\t</TableHeader>\n  1411â†’\t\t\t\t\t\t\t\t\t\t<TableBody>\n  1412â†’\t\t\t\t\t\t\t\t\t\t\t{detailedTimeCards.map((tc) => (\n  1413â†’\t\t\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n  1414â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n  1415â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDateOnly(tc.clock_in_timestamp)}</TableCell>\n  1416â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{getDayOfWeek(tc.clock_in_timestamp)}</TableCell>\n  1417â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n  1418â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n  1419â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n  1420â†’\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1421â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n  1422â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs\">{tc.work_description || \"â€”\"}</TableCell>\n  1423â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n  1424â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"â€”\"}\n  1425â†’\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1426â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n  1427â†’\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"â€”\"}\n  1428â†’\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1429â†’\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n  1430â†’\t\t\t\t\t\t\t\t\t\t\t))}\n  1431â†’\t\t\t\t\t\t\t\t\t\t</TableBody>\n  1432â†’\t\t\t\t\t\t\t\t\t</Table>\n  1433â†’\t\t\t\t\t\t\t\t</div>\n  1434â†’\t\t\t\t\t\t\t</div>\n  1435â†’\t\t\t\t\t\t</>\n  1436â†’\t\t\t\t\t)}\n  1437â†’\t\t\t\t</CardContent>\n  1438â†’\t\t\t</Card>\n  1439â†’\t\t</div>\n  1440â†’\t);\n  1441â†’}\n  1442â†’\n  1443â†’function EmployeesTab({ users, language, onUsersChange }: { users: UserModel[]; language: Language; onUsersChange: () => void }) {\n  1444â†’\tconst [showAddEmployee, setShowAddEmployee] = useState(false);\n  1445â†’\tconst [editingEmployee, setEditingEmployee] = useState<UserModel | null>(null);\n  1446â†’\tconst [employeeName, setEmployeeName] = useState(\"\");\n  1447â†’\tconst [employeeEmail, setEmployeeEmail] = useState(\"\");\n  1448â†’\tconst [employeePhone, setEmployeePhone] = useState(\"\");\n  1449â†’\tconst [employeeRole, setEmployeeRole] = useState<UserRole>(UserRole.Employee);\n  1450â†’\tconst [deleteConfirm, setDeleteConfirm] = useState<UserModel | null>(null);\n  1451â†’\n  1452â†’\tconst t = translations[language];\n  1453â†’\n  1454â†’\tconst handleAddEmployee = async () => {\n  1455â†’\t\tconst userORM = UserORM.getInstance();\n  1456â†’\t\tawait userORM.insertUser([{\n  1457â†’\t\t\tname: employeeName,\n  1458â†’\t\t\temail: employeeEmail,\n  1459â†’\t\t\tphone: employeePhone || null,\n  1460â†’\t\t\trole: employeeRole,\n  1461â†’\t\t} as UserModel]);\n  1462â†’\n  1463â†’\t\tsetShowAddEmployee(false);\n  1464â†’\t\tsetEmployeeName(\"\");\n  1465â†’\t\tsetEmployeeEmail(\"\");\n  1466â†’\t\tsetEmployeePhone(\"\");\n  1467â†’\t\tsetEmployeeRole(UserRole.Employee);\n  1468â†’\t\tonUsersChange();\n  1469â†’\t};\n  1470â†’\n  1471â†’\tconst handleEditEmployee = async () => {\n  1472â†’\t\tif (!editingEmployee) return;\n  1473â†’\n  1474â†’\t\tconst userORM = UserORM.getInstance();\n  1475â†’\t\tawait userORM.setUserById(editingEmployee.id, {\n  1476â†’\t\t\t...editingEmployee,\n  1477â†’\t\t\tname: employeeName,\n  1478â†’\t\t\temail: employeeEmail,\n  1479â†’\t\t\tphone: employeePhone || null,\n  1480â†’\t\t\trole: employeeRole,\n  1481â†’\t\t});\n  1482â†’\n  1483â†’\t\tsetEditingEmployee(null);\n  1484â†’\t\tsetEmployeeName(\"\");\n  1485â†’\t\tsetEmployeeEmail(\"\");\n  1486â†’\t\tsetEmployeePhone(\"\");\n  1487â†’\t\tsetEmployeeRole(UserRole.Employee);\n  1488â†’\t\tonUsersChange();\n  1489â†’\t};\n  1490â†’\n  1491â†’\tconst handleDeleteEmployee = async (user: UserModel) => {\n  1492â†’\t\tconst userORM = UserORM.getInstance();\n  1493â†’\t\tawait userORM.deleteUserById(user.id);\n  1494â†’\t\tsetDeleteConfirm(null);\n  1495â†’\t\tonUsersChange();\n  1496â†’\t};\n  1497â†’\n  1498â†’\tconst openEditDialog = (user: UserModel) => {\n  1499â†’\t\tsetEditingEmployee(user);\n  1500â†’\t\tsetEmployeeName(user.name);\n  1501â†’\t\tsetEmployeeEmail(user.email);\n  1502â†’\t\tsetEmployeePhone(user.phone || \"\");\n  1503â†’\t\tsetEmployeeRole(user.role);\n  1504â†’\t};\n  1505â†’\n  1506â†’\treturn (\n  1507â†’\t\t<div className=\"space-y-4\">\n  1508â†’\t\t\t<Card>\n  1509â†’\t\t\t\t<CardHeader>\n  1510â†’\t\t\t\t\t<div className=\"flex justify-between items-center\">\n  1511â†’\t\t\t\t\t\t<div>\n  1512â†’\t\t\t\t\t\t\t<CardTitle>{t.employees}</CardTitle>\n  1513â†’\t\t\t\t\t\t\t<CardDescription>Manage employee accounts</CardDescription>\n  1514â†’\t\t\t\t\t\t</div>\n  1515â†’\t\t\t\t\t\t<Button onClick={() => setShowAddEmployee(true)}>\n  1516â†’\t\t\t\t\t\t\t<UserPlus className=\"w-4 h-4 mr-2\" />\n  1517â†’\t\t\t\t\t\t\t{t.addEmployee}\n  1518â†’\t\t\t\t\t\t</Button>\n  1519â†’\t\t\t\t\t</div>\n  1520â†’\t\t\t\t</CardHeader>\n  1521â†’\t\t\t\t<CardContent>\n  1522â†’\t\t\t\t\t<div className=\"overflow-x-auto\">\n  1523â†’\t\t\t\t\t\t<Table>\n  1524â†’\t\t\t\t\t\t\t<TableHeader>\n  1525â†’\t\t\t\t\t\t\t\t<TableRow>\n  1526â†’\t\t\t\t\t\t\t\t\t<TableHead>{t.name}</TableHead>\n  1527â†’\t\t\t\t\t\t\t\t\t<TableHead>{t.email}</TableHead>\n  1528â†’\t\t\t\t\t\t\t\t\t<TableHead>{t.phone}</TableHead>\n  1529â†’\t\t\t\t\t\t\t\t\t<TableHead>{t.role}</TableHead>\n  1530â†’\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n  1531â†’\t\t\t\t\t\t\t\t</TableRow>\n  1532â†’\t\t\t\t\t\t\t</TableHeader>\n  1533â†’\t\t\t\t\t\t\t<TableBody>\n  1534â†’\t\t\t\t\t\t\t\t{users.map((user) => (\n  1535â†’\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n  1536â†’\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n  1537â†’\t\t\t\t\t\t\t\t\t\t<TableCell>{user.email}</TableCell>\n  1538â†’\t\t\t\t\t\t\t\t\t\t<TableCell>{user.phone || \"â€”\"}</TableCell>\n  1539â†’\t\t\t\t\t\t\t\t\t\t<TableCell>\n  1540â†’\t\t\t\t\t\t\t\t\t\t\t<Badge variant={user.role === UserRole.Manager ? \"default\" : \"secondary\"}>\n  1541â†’\t\t\t\t\t\t\t\t\t\t\t\t{user.role === UserRole.Manager ? t.manager : t.employee}\n  1542â†’\t\t\t\t\t\t\t\t\t\t\t</Badge>\n  1543â†’\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1544â†’\t\t\t\t\t\t\t\t\t\t<TableCell>\n  1545â†’\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n  1546â†’\t\t\t\t\t\t\t\t\t\t\t\t<Button\n  1547â†’\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n  1548â†’\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n  1549â†’\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditDialog(user)}\n  1550â†’\t\t\t\t\t\t\t\t\t\t\t\t>\n  1551â†’\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n  1552â†’\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n  1553â†’\t\t\t\t\t\t\t\t\t\t\t\t<Button\n  1554â†’\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n  1555â†’\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n  1556â†’\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setDeleteConfirm(user)}\n  1557â†’\t\t\t\t\t\t\t\t\t\t\t\t>\n  1558â†’\t\t\t\t\t\t\t\t\t\t\t\t\t{t.delete}\n  1559â†’\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n  1560â†’\t\t\t\t\t\t\t\t\t\t\t</div>\n  1561â†’\t\t\t\t\t\t\t\t\t\t</TableCell>\n  1562â†’\t\t\t\t\t\t\t\t\t</TableRow>\n  1563â†’\t\t\t\t\t\t\t\t))}\n  1564â†’\t\t\t\t\t\t\t</TableBody>\n  1565â†’\t\t\t\t\t\t</Table>\n  1566â†’\t\t\t\t\t</div>\n  1567â†’\t\t\t\t</CardContent>\n  1568â†’\t\t\t</Card>\n  1569â†’\n  1570â†’\t\t\t<Dialog open={showAddEmployee} onOpenChange={setShowAddEmployee}>\n  1571â†’\t\t\t\t<DialogContent>\n  1572â†’\t\t\t\t\t<DialogHeader>\n  1573â†’\t\t\t\t\t\t<DialogTitle>{t.addEmployee}</DialogTitle>\n  1574â†’\t\t\t\t\t</DialogHeader>\n  1575â†’\t\t\t\t\t<div className=\"space-y-4\">\n  1576â†’\t\t\t\t\t\t<div>\n  1577â†’\t\t\t\t\t\t\t<Label>{t.name}</Label>\n  1578â†’\t\t\t\t\t\t\t<Input\n  1579â†’\t\t\t\t\t\t\t\tvalue={employeeName}\n  1580â†’\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n  1581â†’\t\t\t\t\t\t\t\tplaceholder=\"John Doe\"\n  1582â†’\t\t\t\t\t\t\t/>\n  1583â†’\t\t\t\t\t\t</div>\n  1584â†’\t\t\t\t\t\t<div>\n  1585â†’\t\t\t\t\t\t\t<Label>{t.email}</Label>\n  1586â†’\t\t\t\t\t\t\t<Input\n  1587â†’\t\t\t\t\t\t\t\ttype=\"email\"\n  1588â†’\t\t\t\t\t\t\t\tvalue={employeeEmail}\n  1589â†’\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n  1590â†’\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\n  1591â†’\t\t\t\t\t\t\t/>\n  1592â†’\t\t\t\t\t\t</div>\n  1593â†’\t\t\t\t\t\t<div>\n  1594â†’\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n  1595â†’\t\t\t\t\t\t\t<Input\n  1596â†’\t\t\t\t\t\t\t\ttype=\"tel\"\n  1597â†’\t\t\t\t\t\t\t\tvalue={employeePhone}\n  1598â†’\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n  1599â†’\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n  1600â†’\t\t\t\t\t\t\t/>\n  1601â†’\t\t\t\t\t\t</div>\n  1602â†’\t\t\t\t\t\t<div>\n  1603â†’\t\t\t\t\t\t\t<Label>{t.role}</Label>\n  1604â†’\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n  1605â†’\t\t\t\t\t\t\t\t<SelectTrigger>\n  1606â†’\t\t\t\t\t\t\t\t\t<SelectValue />\n  1607â†’\t\t\t\t\t\t\t\t</SelectTrigger>\n  1608â†’\t\t\t\t\t\t\t\t<SelectContent>\n  1609â†’\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n  1610â†’\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n  1611â†’\t\t\t\t\t\t\t\t</SelectContent>\n  1612â†’\t\t\t\t\t\t\t</Select>\n  1613â†’\t\t\t\t\t\t</div>\n  1614â†’\t\t\t\t\t</div>\n  1615â†’\t\t\t\t\t<DialogFooter>\n  1616â†’\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setShowAddEmployee(false)}>\n  1617â†’\t\t\t\t\t\t\t{t.cancel}\n  1618â†’\t\t\t\t\t\t</Button>\n  1619â†’\t\t\t\t\t\t<Button onClick={handleAddEmployee} disabled={!employeeName || !employeeEmail}>\n  1620â†’\t\t\t\t\t\t\t{t.saveChanges}\n  1621â†’\t\t\t\t\t\t</Button>\n  1622â†’\t\t\t\t\t</DialogFooter>\n  1623â†’\t\t\t\t</DialogContent>\n  1624â†’\t\t\t</Dialog>\n  1625â†’\n  1626â†’\t\t\t<Dialog open={!!editingEmployee} onOpenChange={(open) => !open && setEditingEmployee(null)}>\n  1627â†’\t\t\t\t<DialogContent>\n  1628â†’\t\t\t\t\t<DialogHeader>\n  1629â†’\t\t\t\t\t\t<DialogTitle>{t.editEmployee}</DialogTitle>\n  1630â†’\t\t\t\t\t</DialogHeader>\n  1631â†’\t\t\t\t\t<div className=\"space-y-4\">\n  1632â†’\t\t\t\t\t\t<div>\n  1633â†’\t\t\t\t\t\t\t<Label>{t.name}</Label>\n  1634â†’\t\t\t\t\t\t\t<Input\n  1635â†’\t\t\t\t\t\t\t\tvalue={employeeName}\n  1636â†’\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n  1637â†’\t\t\t\t\t\t\t/>\n  1638â†’\t\t\t\t\t\t</div>\n  1639â†’\t\t\t\t\t\t<div>\n  1640â†’\t\t\t\t\t\t\t<Label>{t.email}</Label>\n  1641â†’\t\t\t\t\t\t\t<Input\n  1642â†’\t\t\t\t\t\t\t\ttype=\"email\"\n  1643â†’\t\t\t\t\t\t\t\tvalue={employeeEmail}\n  1644â†’\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n  1645â†’\t\t\t\t\t\t\t/>\n  1646â†’\t\t\t\t\t\t</div>\n  1647â†’\t\t\t\t\t\t<div>\n  1648â†’\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n  1649â†’\t\t\t\t\t\t\t<Input\n  1650â†’\t\t\t\t\t\t\t\ttype=\"tel\"\n  1651â†’\t\t\t\t\t\t\t\tvalue={employeePhone}\n  1652â†’\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n  1653â†’\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n  1654â†’\t\t\t\t\t\t\t/>\n  1655â†’\t\t\t\t\t\t</div>\n  1656â†’\t\t\t\t\t\t<div>\n  1657â†’\t\t\t\t\t\t\t<Label>{t.role}</Label>\n  1658â†’\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n  1659â†’\t\t\t\t\t\t\t\t<SelectTrigger>\n  1660â†’\t\t\t\t\t\t\t\t\t<SelectValue />\n  1661â†’\t\t\t\t\t\t\t\t</SelectTrigger>\n  1662â†’\t\t\t\t\t\t\t\t<SelectContent>\n  1663â†’\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n  1664â†’\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n  1665â†’\t\t\t\t\t\t\t\t</SelectContent>\n  1666â†’\t\t\t\t\t\t\t</Select>\n  1667â†’\t\t\t\t\t\t</div>\n  1668â†’\t\t\t\t\t</div>\n  1669â†’\t\t\t\t\t<DialogFooter>\n  1670â†’\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingEmployee(null)}>\n  1671â†’\t\t\t\t\t\t\t{t.cancel}\n  1672â†’\t\t\t\t\t\t</Button>\n  1673â†’\t\t\t\t\t\t<Button onClick={handleEditEmployee}>\n  1674â†’\t\t\t\t\t\t\t{t.saveChanges}\n  1675â†’\t\t\t\t\t\t</Button>\n  1676â†’\t\t\t\t\t</DialogFooter>\n  1677â†’\t\t\t\t</DialogContent>\n  1678â†’\t\t\t</Dialog>\n  1679â†’\n  1680â†’\t\t\t<Dialog open={!!deleteConfirm} onOpenChange={(open) => !open && setDeleteConfirm(null)}>\n  1681â†’\t\t\t\t<DialogContent>\n  1682â†’\t\t\t\t\t<DialogHeader>\n  1683â†’\t\t\t\t\t\t<DialogTitle>{t.deleteEmployee}</DialogTitle>\n  1684â†’\t\t\t\t\t</DialogHeader>\n  1685â†’\t\t\t\t\t<p>{t.confirmDelete}</p>\n  1686â†’\t\t\t\t\t<p className=\"font-semibold\">{deleteConfirm?.name}</p>\n  1687â†’\t\t\t\t\t<DialogFooter>\n  1688â†’\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setDeleteConfirm(null)}>\n  1689â†’\t\t\t\t\t\t\t{t.cancel}\n  1690â†’\t\t\t\t\t\t</Button>\n  1691â†’\t\t\t\t\t\t<Button variant=\"destructive\" onClick={() => deleteConfirm && handleDeleteEmployee(deleteConfirm)}>\n  1692â†’\t\t\t\t\t\t\t{t.delete}\n  1693â†’\t\t\t\t\t\t</Button>\n  1694â†’\t\t\t\t\t</DialogFooter>\n  1695â†’\t\t\t\t</DialogContent>\n  1696â†’\t\t\t</Dialog>\n  1697â†’\t\t</div>\n  1698â†’\t);\n  1699â†’}\n  1700â†’\n  1701â†’function ManualEntryDialog({\n  1702â†’\topen,\n  1703â†’\tonClose,\n  1704â†’\tuserId,\n  1705â†’\tonSave,\n  1706â†’\tlanguage,\n  1707â†’\tusers\n  1708â†’}: {\n  1709â†’\topen: boolean;\n  1710â†’\tonClose: () => void;\n  1711â†’\tuserId: string;\n  1712â†’\tonSave: () => void;\n  1713â†’\tlanguage: Language;\n  1714â†’\tusers?: UserModel[];\n  1715â†’}) {\n  1716â†’\tconst [selectedUser, setSelectedUser] = useState(userId);\n  1717â†’\tconst [clockIn, setClockIn] = useState(\"\");\n  1718â†’\tconst [clockOut, setClockOut] = useState(\"\");\n  1719â†’\tconst [location, setLocation] = useState(\"\");\n  1720â†’\tconst [workDescription, setWorkDescription] = useState(\"\");\n  1721â†’\tconst [lunchStart, setLunchStart] = useState(\"\");\n  1722â†’\tconst [lunchEnd, setLunchEnd] = useState(\"\");\n  1723â†’\n  1724â†’\tconst t = translations[language];\n  1725â†’\n  1726â†’\tuseEffect(() => {\n  1727â†’\t\tif (open) {\n  1728â†’\t\t\tsetSelectedUser(userId);\n  1729â†’\t\t\t// Set default to today\n  1730â†’\t\t\tconst now = new Date();\n  1731â†’\t\t\tconst today = now.toISOString().slice(0, 10);\n  1732â†’\t\t\tsetClockIn(`${today}T09:00`);\n  1733â†’\t\t\tsetClockOut(`${today}T17:00`);\n  1734â†’\t\t\tsetLocation(\"\");\n  1735â†’\t\t\tsetWorkDescription(\"\");\n  1736â†’\t\t\tsetLunchStart(`${today}T12:00`);\n  1737â†’\t\t\tsetLunchEnd(`${today}T13:00`);\n  1738â†’\t\t}\n  1739â†’\t}, [open, userId]);\n  1740â†’\n  1741â†’\tconst handleSave = async () => {\n  1742â†’\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n  1743â†’\n  1744â†’\t\tconst clockInTimestamp = Math.floor(new Date(clockIn).getTime() / 1000).toString();\n  1745â†’\t\tconst clockOutTimestamp = clockOut ? Math.floor(new Date(clockOut).getTime() / 1000).toString() : null;\n  1746â†’\t\tconst lunchStartTimestamp = lunchStart ? Math.floor(new Date(lunchStart).getTime() / 1000).toString() : null;\n  1747â†’\t\tconst lunchEndTimestamp = lunchEnd ? Math.floor(new Date(lunchEnd).getTime() / 1000).toString() : null;\n  1748â†’\n  1749â†’\t\tlet totalHours = null;\n  1750â†’\t\tlet lunchDurationMinutes = null;\n  1751â†’\n  1752â†’\t\t// Calculate lunch duration\n  1753â†’\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n  1754â†’\t\t\tconst lunchStartTime = parseInt(lunchStartTimestamp);\n  1755â†’\t\t\tconst lunchEndTime = parseInt(lunchEndTimestamp);\n  1756â†’\t\t\tlunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n  1757â†’\t\t}\n  1758â†’\n  1759â†’\t\t// Calculate total hours\n  1760â†’\t\tif (clockOutTimestamp) {\n  1761â†’\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n  1762â†’\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n  1763â†’\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n  1764â†’\n  1765â†’\t\t\t// Deduct lunch time\n  1766â†’\t\t\tif (lunchDurationMinutes) {\n  1767â†’\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n  1768â†’\t\t\t}\n  1769â†’\t\t}\n  1770â†’\n  1771â†’\t\tawait timeCardORM.insertTimeCardEntry([{\n  1772â†’\t\t\tuser_id: selectedUser,\n  1773â†’\t\t\tclock_in_timestamp: clockInTimestamp,\n  1774â†’\t\t\tclock_out_timestamp: clockOutTimestamp,\n  1775â†’\t\t\ttotal_hours: totalHours,\n  1776â†’\t\t\tlocation: location || null,\n  1777â†’\t\t\twork_description: workDescription || null,\n  1778â†’\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n  1779â†’\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n  1780â†’\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n  1781â†’\t\t} as TimeCardEntryModel]);\n  1782â†’\n  1783â†’\t\tonSave();\n  1784â†’\t\tonClose();\n  1785â†’\t};\n  1786â†’\n  1787â†’\treturn (\n  1788â†’\t\t<Dialog open={open} onOpenChange={onClose}>\n  1789â†’\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n  1790â†’\t\t\t\t<DialogHeader>\n  1791â†’\t\t\t\t\t<DialogTitle>{t.addManualEntry}</DialogTitle>\n  1792â†’\t\t\t\t</DialogHeader>\n  1793â†’\t\t\t\t<div className=\"space-y-4\">\n  1794â†’\t\t\t\t\t{users && (\n  1795â†’\t\t\t\t\t\t<div>\n  1796â†’\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n  1797â†’\t\t\t\t\t\t\t<Select value={selectedUser} onValueChange={setSelectedUser}>\n  1798â†’\t\t\t\t\t\t\t\t<SelectTrigger>\n  1799â†’\t\t\t\t\t\t\t\t\t<SelectValue />\n  1800â†’\t\t\t\t\t\t\t\t</SelectTrigger>\n  1801â†’\t\t\t\t\t\t\t\t<SelectContent>\n  1802â†’\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n  1803â†’\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n  1804â†’\t\t\t\t\t\t\t\t\t\t\t{u.name}\n  1805â†’\t\t\t\t\t\t\t\t\t\t</SelectItem>\n  1806â†’\t\t\t\t\t\t\t\t\t))}\n  1807â†’\t\t\t\t\t\t\t\t</SelectContent>\n  1808â†’\t\t\t\t\t\t\t</Select>\n  1809â†’\t\t\t\t\t\t</div>\n  1810â†’\t\t\t\t\t)}\n  1811â†’\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n  1812â†’\t\t\t\t\t\t<div>\n  1813â†’\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n  1814â†’\t\t\t\t\t\t\t<Input\n  1815â†’\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1816â†’\t\t\t\t\t\t\t\tvalue={clockIn}\n  1817â†’\t\t\t\t\t\t\t\tonChange={(e) => setClockIn(e.target.value)}\n  1818â†’\t\t\t\t\t\t\t/>\n  1819â†’\t\t\t\t\t\t</div>\n  1820â†’\t\t\t\t\t\t<div>\n  1821â†’\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n  1822â†’\t\t\t\t\t\t\t<Input\n  1823â†’\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1824â†’\t\t\t\t\t\t\t\tvalue={clockOut}\n  1825â†’\t\t\t\t\t\t\t\tonChange={(e) => setClockOut(e.target.value)}\n  1826â†’\t\t\t\t\t\t\t/>\n  1827â†’\t\t\t\t\t\t</div>\n  1828â†’\t\t\t\t\t</div>\n  1829â†’\t\t\t\t\t<div>\n  1830â†’\t\t\t\t\t\t<Label>{t.location}</Label>\n  1831â†’\t\t\t\t\t\t<Input\n  1832â†’\t\t\t\t\t\t\tvalue={location}\n  1833â†’\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n  1834â†’\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n  1835â†’\t\t\t\t\t\t/>\n  1836â†’\t\t\t\t\t</div>\n  1837â†’\t\t\t\t\t<div>\n  1838â†’\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n  1839â†’\t\t\t\t\t\t<Textarea\n  1840â†’\t\t\t\t\t\t\tvalue={workDescription}\n  1841â†’\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n  1842â†’\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n  1843â†’\t\t\t\t\t\t\trows={4}\n  1844â†’\t\t\t\t\t\t/>\n  1845â†’\t\t\t\t\t</div>\n  1846â†’\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n  1847â†’\t\t\t\t\t\t<div>\n  1848â†’\t\t\t\t\t\t\t<Label>{t.lunchStartTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n  1849â†’\t\t\t\t\t\t\t<Input\n  1850â†’\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1851â†’\t\t\t\t\t\t\t\tvalue={lunchStart}\n  1852â†’\t\t\t\t\t\t\t\tonChange={(e) => setLunchStart(e.target.value)}\n  1853â†’\t\t\t\t\t\t\t/>\n  1854â†’\t\t\t\t\t\t</div>\n  1855â†’\t\t\t\t\t\t<div>\n  1856â†’\t\t\t\t\t\t\t<Label>{t.lunchEndTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n  1857â†’\t\t\t\t\t\t\t<Input\n  1858â†’\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n  1859â†’\t\t\t\t\t\t\t\tvalue={lunchEnd}\n  1860â†’\t\t\t\t\t\t\t\tonChange={(e) => setLunchEnd(e.target.value)}\n  1861â†’\t\t\t\t\t\t\t/>\n  1862â†’\t\t\t\t\t\t</div>\n  1863â†’\t\t\t\t\t</div>\n  1864â†’\t\t\t\t</div>\n  1865â†’\t\t\t\t<DialogFooter>\n  1866â†’\t\t\t\t\t<Button variant=\"outline\" onClick={onClose}>\n  1867â†’\t\t\t\t\t\t{t.cancel}\n  1868â†’\t\t\t\t\t</Button>\n  1869â†’\t\t\t\t\t<Button onClick={handleSave} disabled={!selectedUser || !clockIn}>\n  1870â†’\t\t\t\t\t\t{t.saveChanges}\n  1871â†’\t\t\t\t\t</Button>\n  1872â†’\t\t\t\t</DialogFooter>\n  1873â†’\t\t\t</DialogContent>\n  1874â†’\t\t</Dialog>\n  1875â†’\t);\n  1876â†’}\n  1877â†’\n\n<system-reminder>\nWhenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.\n</system-reminder>\n"}]},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"5c8a8054-c250-4adb-acd6-655707eb0dc2","tool_use_result":{"type":"text","file":{"filePath":"/home/user/vite-template/src/routes/index.tsx","content":"import { createFileRoute } from \"@tanstack/react-router\";\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Clock, Users, CalendarDays, Timer, Languages, Coffee, UserPlus, FileText, AlertCircle, Plus, Trash2 } from \"lucide-react\";\nimport { UserORM, type UserModel, UserRole } from \"@/sdk/database/orm/orm_user\";\nimport { TimeCardEntryORM, type TimeCardEntryModel } from \"@/sdk/database/orm/orm_time_card_entry\";\n\nexport const Route = createFileRoute(\"/\")({\n\tcomponent: App,\n});\n\ntype Language = 'en' | 'es';\n\nconst translations = {\n\ten: {\n\t\tappTitle: \"Employee Time Tracking\",\n\t\tselectAccount: \"Select your account to continue\",\n\t\tselectUser: \"Select User\",\n\t\tchooseAccount: \"Choose your account\",\n\t\tmanager: \"Manager\",\n\t\temployee: \"Employee\",\n\t\tswitchUser: \"Switch User\",\n\t\ttimeTrackingSystem: \"Time Tracking System\",\n\t\twelcome: \"Welcome\",\n\t\tclockInOut: \"Clock In/Out\",\n\t\tcurrentlyClocked: \"Currently Clocked In\",\n\t\tsince: \"Since\",\n\t\telapsedTime: \"Elapsed Time\",\n\t\tclockOut: \"Clock Out\",\n\t\tnotClocked: \"Not currently clocked in\",\n\t\tclockIn: \"Clock In\",\n\t\ttimeCardHistory: \"Time Card History\",\n\t\trecentRecords: \"Your recent clock in/out records\",\n\t\tnoTimeCards: \"No time cards yet\",\n\t\tclockInTime: \"Clock In\",\n\t\tclockOutTime: \"Clock Out\",\n\t\thours: \"Hours\",\n\t\tstatus: \"Status\",\n\t\tcompleted: \"Completed\",\n\t\tactive: \"Active\",\n\t\ttotalEmployees: \"Total Employees\",\n\t\thoursToday: \"Hours Today\",\n\t\thoursThisWeek: \"Hours This Week\",\n\t\tallEmployeeTimeCards: \"All Employee Time Cards\",\n\t\tviewManageRecords: \"View and manage all employee time records\",\n\t\tfilterByEmployee: \"Filter by Employee\",\n\t\tallEmployees: \"All Employees\",\n\t\tfilterByDate: \"Filter by Date\",\n\t\tclearFilters: \"Clear Filters\",\n\t\tnoTimeCardsFound: \"No time cards found\",\n\t\temployeeName: \"Employee\",\n\t\tactions: \"Actions\",\n\t\tedit: \"Edit\",\n\t\teditTimeCard: \"Edit Time Card\",\n\t\tcancel: \"Cancel\",\n\t\tsaveChanges: \"Save Changes\",\n\t\tlocation: \"Location\",\n\t\twhereWorked: \"Where did you work?\",\n\t\tworkDescription: \"Work Description\",\n\t\twhatDid: \"What did you do today?\",\n\t\tlocationPlaceholder: \"e.g., Office, Remote, Client Site\",\n\t\tdescriptionPlaceholder: \"Describe your work activities...\",\n\t\tstartLunch: \"Start Lunch Break\",\n\t\tendLunch: \"End Lunch Break\",\n\t\tonLunchBreak: \"On Lunch Break\",\n\t\tlunchBreak: \"Lunch Break\",\n\t\tlunchDuration: \"Lunch\",\n\t\tlunchStartTime: \"Lunch Start\",\n\t\tlunchEndTime: \"Lunch End\",\n\t\ttimeCards: \"Time Cards\",\n\t\treports: \"Reports\",\n\t\temployees: \"Employees\",\n\t\taddEmployee: \"Add Employee\",\n\t\teditEmployee: \"Edit Employee\",\n\t\tdeleteEmployee: \"Delete Employee\",\n\t\tname: \"Name\",\n\t\temail: \"Email\",\n\t\tphone: \"Phone\",\n\t\trole: \"Role\",\n\t\tdelete: \"Delete\",\n\t\tweeklyReport: \"Weekly Report\",\n\t\tselectWeek: \"Select Week\",\n\t\tregularHours: \"Regular\",\n\t\tovertimeHours: \"Overtime\",\n\t\ttotalHours: \"Total\",\n\t\tnoReportData: \"No data for selected week\",\n\t\taddTimeCard: \"Add Time Card\",\n\t\tmanualEntry: \"Manual Entry\",\n\t\taddManualEntry: \"Add Manual Time Card\",\n\t\tconfirmDelete: \"Are you sure you want to delete this employee?\",\n\t\tovertimeAlert: \"Overtime Alert\",\n\t\tprintReport: \"Print Report\",\n\t\texportCSV: \"Export to CSV\",\n\t\tdetailedReport: \"Detailed Time Card Report\",\n\t\tdate: \"Date\",\n\t\tday: \"Day\",\n\t\tdeleteTimeCard: \"Delete Time Card\",\n\t\tconfirmDeleteTimeCard: \"Are you sure you want to delete this time card? This action cannot be undone.\",\n\t},\n\tes: {\n\t\tappTitle: \"Registro de Tiempo de Empleados\",\n\t\tselectAccount: \"Selecciona tu cuenta para continuar\",\n\t\tselectUser: \"Seleccionar Usuario\",\n\t\tchooseAccount: \"Elige tu cuenta\",\n\t\tmanager: \"Gerente\",\n\t\temployee: \"Empleado\",\n\t\tswitchUser: \"Cambiar Usuario\",\n\t\ttimeTrackingSystem: \"Sistema de Registro de Tiempo\",\n\t\twelcome: \"Bienvenido\",\n\t\tclockInOut: \"Entrada/Salida\",\n\t\tcurrentlyClocked: \"Actualmente Registrado\",\n\t\tsince: \"Desde\",\n\t\telapsedTime: \"Tiempo Transcurrido\",\n\t\tclockOut: \"Registrar Salida\",\n\t\tnotClocked: \"No estÃ¡ registrado actualmente\",\n\t\tclockIn: \"Registrar Entrada\",\n\t\ttimeCardHistory: \"Historial de Tarjetas de Tiempo\",\n\t\trecentRecords: \"Tus registros recientes de entrada/salida\",\n\t\tnoTimeCards: \"No hay tarjetas de tiempo todavÃ­a\",\n\t\tclockInTime: \"Entrada\",\n\t\tclockOutTime: \"Salida\",\n\t\thours: \"Horas\",\n\t\tstatus: \"Estado\",\n\t\tcompleted: \"Completado\",\n\t\tactive: \"Activo\",\n\t\ttotalEmployees: \"Total de Empleados\",\n\t\thoursToday: \"Horas Hoy\",\n\t\thoursThisWeek: \"Horas Esta Semana\",\n\t\tallEmployeeTimeCards: \"Todas las Tarjetas de Tiempo\",\n\t\tviewManageRecords: \"Ver y gestionar todos los registros de empleados\",\n\t\tfilterByEmployee: \"Filtrar por Empleado\",\n\t\tallEmployees: \"Todos los Empleados\",\n\t\tfilterByDate: \"Filtrar por Fecha\",\n\t\tclearFilters: \"Limpiar Filtros\",\n\t\tnoTimeCardsFound: \"No se encontraron tarjetas de tiempo\",\n\t\temployeeName: \"Empleado\",\n\t\tactions: \"Acciones\",\n\t\tedit: \"Editar\",\n\t\teditTimeCard: \"Editar Tarjeta de Tiempo\",\n\t\tcancel: \"Cancelar\",\n\t\tsaveChanges: \"Guardar Cambios\",\n\t\tlocation: \"UbicaciÃ³n\",\n\t\twhereWorked: \"Â¿DÃ³nde trabajaste?\",\n\t\tworkDescription: \"DescripciÃ³n del Trabajo\",\n\t\twhatDid: \"Â¿QuÃ© hiciste hoy?\",\n\t\tlocationPlaceholder: \"ej., Oficina, Remoto, Sitio del Cliente\",\n\t\tdescriptionPlaceholder: \"Describe tus actividades laborales...\",\n\t\tstartLunch: \"Iniciar Almuerzo\",\n\t\tendLunch: \"Terminar Almuerzo\",\n\t\tonLunchBreak: \"En Almuerzo\",\n\t\tlunchBreak: \"Almuerzo\",\n\t\tlunchDuration: \"Almuerzo\",\n\t\tlunchStartTime: \"Inicio Almuerzo\",\n\t\tlunchEndTime: \"Fin Almuerzo\",\n\t\ttimeCards: \"Tarjetas de Tiempo\",\n\t\treports: \"Informes\",\n\t\temployees: \"Empleados\",\n\t\taddEmployee: \"Agregar Empleado\",\n\t\teditEmployee: \"Editar Empleado\",\n\t\tdeleteEmployee: \"Eliminar Empleado\",\n\t\tname: \"Nombre\",\n\t\temail: \"Correo\",\n\t\tphone: \"TelÃ©fono\",\n\t\trole: \"Rol\",\n\t\tdelete: \"Eliminar\",\n\t\tweeklyReport: \"Informe Semanal\",\n\t\tselectWeek: \"Seleccionar Semana\",\n\t\tregularHours: \"Regular\",\n\t\tovertimeHours: \"Tiempo Extra\",\n\t\ttotalHours: \"Total\",\n\t\tnoReportData: \"No hay datos para la semana seleccionada\",\n\t\taddTimeCard: \"Agregar Tarjeta\",\n\t\tmanualEntry: \"Entrada Manual\",\n\t\taddManualEntry: \"Agregar Tarjeta Manual\",\n\t\tconfirmDelete: \"Â¿EstÃ¡ seguro de eliminar este empleado?\",\n\t\tovertimeAlert: \"Alerta de Tiempo Extra\",\n\t\tprintReport: \"Imprimir Informe\",\n\t\texportCSV: \"Exportar a CSV\",\n\t\tdetailedReport: \"Informe Detallado de Tarjetas de Tiempo\",\n\t\tdate: \"Fecha\",\n\t\tday: \"DÃ­a\",\n\t\tdeleteTimeCard: \"Eliminar Tarjeta de Tiempo\",\n\t\tconfirmDeleteTimeCard: \"Â¿EstÃ¡ seguro de eliminar esta tarjeta de tiempo? Esta acciÃ³n no se puede deshacer.\",\n\t}\n};\n\nfunction App() {\n\tconst [currentUser, setCurrentUser] = useState<UserModel | null>(null);\n\tconst [users, setUsers] = useState<UserModel[]>([]);\n\tconst [showUserSelect, setShowUserSelect] = useState(true);\n\tconst [language, setLanguage] = useState<Language>('en');\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadUsers();\n\t}, []);\n\n\tconst loadUsers = async () => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tconst allUsers = await userORM.getAllUser();\n\n\t\t// If no users exist, create demo users\n\t\tif (allUsers.length === 0) {\n\t\t\tconst demoUsers = await userORM.insertUser([\n\t\t\t\t{\n\t\t\t\t\tname: \"John Smith\",\n\t\t\t\t\temail: \"john@example.com\",\n\t\t\t\t\trole: UserRole.Employee,\n\t\t\t\t} as UserModel,\n\t\t\t\t{\n\t\t\t\t\tname: \"Sarah Johnson\",\n\t\t\t\t\temail: \"sarah@example.com\",\n\t\t\t\t\trole: UserRole.Employee,\n\t\t\t\t} as UserModel,\n\t\t\t\t{\n\t\t\t\t\tname: \"Mike Manager\",\n\t\t\t\t\temail: \"mike@example.com\",\n\t\t\t\t\trole: UserRole.Manager,\n\t\t\t\t} as UserModel,\n\t\t\t]);\n\t\t\tsetUsers(demoUsers);\n\t\t} else {\n\t\t\tsetUsers(allUsers);\n\t\t}\n\t};\n\n\tconst handleUserSelect = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\tif (user) {\n\t\t\tsetCurrentUser(user);\n\t\t\tsetShowUserSelect(false);\n\t\t}\n\t};\n\n\tconst handleLogout = () => {\n\t\tsetCurrentUser(null);\n\t\tsetShowUserSelect(true);\n\t};\n\n\tconst toggleLanguage = () => {\n\t\tsetLanguage(prev => prev === 'en' ? 'es' : 'en');\n\t};\n\n\tif (showUserSelect || !currentUser) {\n\t\treturn (\n\t\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4\">\n\t\t\t\t<div className=\"absolute top-4 right-4\">\n\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t{language === 'en' ? 'EspaÃ±ol' : 'English'}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<Card className=\"w-full max-w-md\">\n\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t<CardTitle className=\"text-2xl\">{t.appTitle}</CardTitle>\n\t\t\t\t\t\t<CardDescription>{t.selectAccount}</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label>{t.selectUser}</Label>\n\t\t\t\t\t\t\t<Select onValueChange={handleUserSelect}>\n\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<SelectValue placeholder={t.chooseAccount} />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={user.id} value={user.id}>\n\t\t\t\t\t\t\t\t\t\t\t{user.name} - {user.role === UserRole.Manager ? t.manager : t.employee}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n\t\t\t<div className=\"container mx-auto p-6 space-y-6\">\n\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1 className=\"text-3xl font-bold\">{t.timeTrackingSystem}</h1>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t{t.welcome}, {currentUser.name} ({currentUser.role === UserRole.Manager ? t.manager : t.employee})\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{language === 'en' ? 'EspaÃ±ol' : 'English'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleLogout} variant=\"outline\">\n\t\t\t\t\t\t\t{t.switchUser}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{currentUser.role === UserRole.Employee ? (\n\t\t\t\t\t<EmployeeView user={currentUser} language={language} />\n\t\t\t\t) : (\n\t\t\t\t\t<ManagerView user={currentUser} users={users} language={language} onUsersChange={loadUsers} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction EmployeeView({ user, language }: { user: UserModel; language: Language }) {\n\tconst [activeShift, setActiveShift] = useState<TimeCardEntryModel | null>(null);\n\tconst [timeCards, setTimeCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [elapsedTime, setElapsedTime] = useState(0);\n\tconst [location, setLocation] = useState(\"\");\n\tconst [workDescription, setWorkDescription] = useState(\"\");\n\tconst [isOnLunch, setIsOnLunch] = useState(false);\n\tconst [showManualEntry, setShowManualEntry] = useState(false);\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadTimeCards();\n\t}, [user.id]);\n\n\tuseEffect(() => {\n\t\tlet interval: NodeJS.Timeout;\n\t\tif (activeShift && !isOnLunch) {\n\t\t\tinterval = setInterval(() => {\n\t\t\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp) * 1000;\n\t\t\t\tconst elapsed = Date.now() - clockInTime;\n\t\t\t\tsetElapsedTime(elapsed);\n\t\t\t}, 1000);\n\t\t}\n\t\treturn () => clearInterval(interval);\n\t}, [activeShift, isOnLunch]);\n\n\tconst loadTimeCards = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst userTimeCards = await timeCardORM.getTimeCardEntryByUserId(user.id);\n\n\t\t// Sort by clock in time (newest first)\n\t\tconst sorted = userTimeCards.sort((a, b) =>\n\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n\t\t);\n\n\t\tsetTimeCards(sorted);\n\n\t\t// Find active shift (no clock out time)\n\t\tconst active = sorted.find(tc => !tc.clock_out_timestamp);\n\t\tsetActiveShift(active || null);\n\t\tif (active) {\n\t\t\tsetLocation(active.location || \"\");\n\t\t\tsetWorkDescription(active.work_description || \"\");\n\t\t\t// Check if on lunch break\n\t\t\tsetIsOnLunch(!!(active.lunch_start_timestamp && !active.lunch_end_timestamp));\n\t\t} else {\n\t\t\tsetIsOnLunch(false);\n\t\t}\n\t};\n\n\tconst handleClockIn = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tawait timeCardORM.insertTimeCardEntry([{\n\t\t\tuser_id: user.id,\n\t\t\tclock_in_timestamp: now,\n\t\t\tlocation: location || null,\n\t\t\twork_description: workDescription || null,\n\t\t} as TimeCardEntryModel]);\n\n\t\tsetLocation(\"\");\n\t\tsetWorkDescription(\"\");\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleClockOut = async () => {\n\t\tif (!activeShift) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp);\n\t\tconst clockOutTime = parseInt(now);\n\t\tlet totalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t// Deduct lunch time if lunch was taken\n\t\tif (activeShift.lunch_duration_minutes) {\n\t\t\ttotalHours -= activeShift.lunch_duration_minutes / 60;\n\t\t}\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tclock_out_timestamp: now,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: location || activeShift.location,\n\t\t\twork_description: workDescription || activeShift.work_description,\n\t\t});\n\n\t\tsetLocation(\"\");\n\t\tsetWorkDescription(\"\");\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleStartLunch = async () => {\n\t\tif (!activeShift) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tlunch_start_timestamp: now,\n\t\t\tlocation: location || activeShift.location,\n\t\t\twork_description: workDescription || activeShift.work_description,\n\t\t});\n\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleEndLunch = async () => {\n\t\tif (!activeShift || !activeShift.lunch_start_timestamp) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tconst lunchStartTime = parseInt(activeShift.lunch_start_timestamp);\n\t\tconst lunchEndTime = parseInt(now);\n\t\tconst lunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n\n\t\t// Add to existing lunch duration if there was already one\n\t\tconst totalLunchMinutes = (activeShift.lunch_duration_minutes || 0) + lunchDurationMinutes;\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tlunch_end_timestamp: now,\n\t\t\tlunch_duration_minutes: totalLunchMinutes,\n\t\t});\n\n\t\tawait loadTimeCards();\n\t};\n\n\tconst formatTime = (ms: number) => {\n\t\tconst seconds = Math.floor(ms / 1000);\n\t\tconst hours = Math.floor(seconds / 3600);\n\t\tconst minutes = Math.floor((seconds % 3600) / 60);\n\t\tconst secs = seconds % 60;\n\t\treturn `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatHours = (hours: number | null | undefined) => {\n\t\tif (hours === null || hours === undefined) return \"â€”\";\n\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n\t};\n\n\tconst formatMinutes = (minutes: number | null | undefined) => {\n\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n\t\treturn `${Math.round(minutes)} min`;\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.location && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ“ {activeShift.location}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ½ï¸ {formatMinutes(activeShift.lunch_duration_minutes)}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<div className=\"flex flex-col sm:grid sm:grid-cols-2 gap-3\">\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"sm:col-span-2 h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold border-2 shadow-sm hover:shadow-md transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<CalendarDays className=\"w-5 h-5\" />\n\t\t\t\t\t\t{t.timeCardHistory}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>{t.recentRecords}</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t{timeCards.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCards}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t{timeCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<ManualEntryDialog\n\t\t\t\topen={showManualEntry}\n\t\t\t\tonClose={() => setShowManualEntry(false)}\n\t\t\t\tuserId={user.id}\n\t\t\t\tonSave={loadTimeCards}\n\t\t\t\tlanguage={language}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction ManagerView({ user, users, language, onUsersChange }: { user: UserModel; users: UserModel[]; language: Language; onUsersChange: () => void }) {\n\tconst [activeTab, setActiveTab] = useState(\"timecards\");\n\n\tconst t = translations[language];\n\n\treturn (\n\t\t<Tabs value={activeTab} onValueChange={setActiveTab}>\n\t\t\t<TabsList className=\"grid w-full grid-cols-3\">\n\t\t\t\t<TabsTrigger value=\"timecards\">\n\t\t\t\t\t<Clock className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.timeCards}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger value=\"reports\">\n\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.reports}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger value=\"employees\">\n\t\t\t\t\t<Users className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.employees}\n\t\t\t\t</TabsTrigger>\n\t\t\t</TabsList>\n\n\t\t\t<TabsContent value=\"timecards\" className=\"space-y-4\">\n\t\t\t\t<TimeCardsTab users={users} language={language} />\n\t\t\t</TabsContent>\n\n\t\t\t<TabsContent value=\"reports\" className=\"space-y-4\">\n\t\t\t\t<ReportsTab users={users} language={language} />\n\t\t\t</TabsContent>\n\n\t\t\t<TabsContent value=\"employees\" className=\"space-y-4\">\n\t\t\t\t<EmployeesTab users={users} language={language} onUsersChange={onUsersChange} />\n\t\t\t</TabsContent>\n\t\t</Tabs>\n\t);\n}\n\nfunction TimeCardsTab({ users, language }: { users: UserModel[]; language: Language }) {\n\tconst [allTimeCards, setAllTimeCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [filteredCards, setFilteredCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [selectedEmployee, setSelectedEmployee] = useState<string>(\"all\");\n\tconst [dateFilter, setDateFilter] = useState<string>(\"\");\n\tconst [editingCard, setEditingCard] = useState<TimeCardEntryModel | null>(null);\n\tconst [editClockIn, setEditClockIn] = useState(\"\");\n\tconst [editClockOut, setEditClockOut] = useState(\"\");\n\tconst [editLocation, setEditLocation] = useState(\"\");\n\tconst [editWorkDescription, setEditWorkDescription] = useState(\"\");\n\tconst [editLunchStart, setEditLunchStart] = useState(\"\");\n\tconst [editLunchEnd, setEditLunchEnd] = useState(\"\");\n\tconst [showManualEntry, setShowManualEntry] = useState(false);\n\tconst [manualEntryUserId, setManualEntryUserId] = useState<string>(\"\");\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadAllTimeCards();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tapplyFilters();\n\t}, [allTimeCards, selectedEmployee, dateFilter]);\n\n\tconst loadAllTimeCards = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n\n\t\t// Sort by clock in time (newest first)\n\t\tconst sorted = allCards.sort((a, b) =>\n\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n\t\t);\n\n\t\tsetAllTimeCards(sorted);\n\t};\n\n\tconst applyFilters = () => {\n\t\tlet filtered = [...allTimeCards];\n\n\t\t// Filter by employee\n\t\tif (selectedEmployee !== \"all\") {\n\t\t\tfiltered = filtered.filter(tc => tc.user_id === selectedEmployee);\n\t\t}\n\n\t\t// Filter by date\n\t\tif (dateFilter) {\n\t\t\tconst filterDate = new Date(dateFilter);\n\t\t\tconst filterTimestamp = Math.floor(filterDate.getTime() / 1000);\n\t\t\tconst nextDayTimestamp = filterTimestamp + 86400; // +24 hours\n\n\t\t\tfiltered = filtered.filter(tc => {\n\t\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\t\treturn clockIn >= filterTimestamp && clockIn < nextDayTimestamp;\n\t\t\t});\n\t\t}\n\n\t\tsetFilteredCards(filtered);\n\t};\n\n\tconst getUserName = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\treturn user?.name || \"Unknown\";\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatHours = (hours: number | null | undefined) => {\n\t\tif (hours === null || hours === undefined) return \"â€”\";\n\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n\t};\n\n\tconst formatMinutes = (minutes: number | null | undefined) => {\n\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n\t\treturn `${Math.round(minutes)} min`;\n\t};\n\n\tconst calculateTotalHours = (period: 'day' | 'week') => {\n\t\tconst now = Date.now() / 1000;\n\t\tconst periodSeconds = period === 'day' ? 86400 : 604800; // 1 day or 7 days\n\t\tconst startTime = now - periodSeconds;\n\n\t\tconst relevantCards = allTimeCards.filter(tc => {\n\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\treturn clockIn >= startTime && tc.total_hours;\n\t\t});\n\n\t\treturn relevantCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n\t};\n\n\tconst handleEditCard = (card: TimeCardEntryModel) => {\n\t\tsetEditingCard(card);\n\t\tsetEditClockIn(new Date(parseInt(card.clock_in_timestamp) * 1000).toISOString().slice(0, 16));\n\t\tsetEditClockOut(\n\t\t\tcard.clock_out_timestamp\n\t\t\t\t? new Date(parseInt(card.clock_out_timestamp) * 1000).toISOString().slice(0, 16)\n\t\t\t\t: \"\"\n\t\t);\n\t\tsetEditLocation(card.location || \"\");\n\t\tsetEditWorkDescription(card.work_description || \"\");\n\t\tsetEditLunchStart(\n\t\t\tcard.lunch_start_timestamp\n\t\t\t\t? new Date(parseInt(card.lunch_start_timestamp) * 1000).toISOString().slice(0, 16)\n\t\t\t\t: \"\"\n\t\t);\n\t\tsetEditLunchEnd(\n\t\t\tcard.lunch_end_timestamp\n\t\t\t\t? new Date(parseInt(card.lunch_end_timestamp) * 1000).toISOString().slice(0, 16)\n\t\t\t\t: \"\"\n\t\t);\n\t};\n\n\tconst handleSaveEdit = async () => {\n\t\tif (!editingCard) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst clockInTimestamp = Math.floor(new Date(editClockIn).getTime() / 1000).toString();\n\t\tconst clockOutTimestamp = editClockOut\n\t\t\t? Math.floor(new Date(editClockOut).getTime() / 1000).toString()\n\t\t\t: null;\n\t\tconst lunchStartTimestamp = editLunchStart\n\t\t\t? Math.floor(new Date(editLunchStart).getTime() / 1000).toString()\n\t\t\t: null;\n\t\tconst lunchEndTimestamp = editLunchEnd\n\t\t\t? Math.floor(new Date(editLunchEnd).getTime() / 1000).toString()\n\t\t\t: null;\n\n\t\tlet totalHours = null;\n\t\tlet lunchDurationMinutes = null;\n\n\t\t// Calculate lunch duration\n\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n\t\t\tconst lunchStart = parseInt(lunchStartTimestamp);\n\t\t\tconst lunchEnd = parseInt(lunchEndTimestamp);\n\t\t\tlunchDurationMinutes = (lunchEnd - lunchStart) / 60;\n\t\t}\n\n\t\t// Calculate total hours\n\t\tif (clockOutTimestamp) {\n\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time\n\t\t\tif (lunchDurationMinutes) {\n\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n\t\t\t}\n\t\t}\n\n\t\tawait timeCardORM.setTimeCardEntryById(editingCard.id, {\n\t\t\t...editingCard,\n\t\t\tclock_in_timestamp: clockInTimestamp,\n\t\t\tclock_out_timestamp: clockOutTimestamp,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: editLocation || null,\n\t\t\twork_description: editWorkDescription || null,\n\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n\t\t});\n\n\t\tsetEditingCard(null);\n\t\tawait loadAllTimeCards();\n\t};\n\n\tconst handleDeleteTimeCard = async (card: TimeCardEntryModel) => {\n\t\tif (!window.confirm(t.confirmDeleteTimeCard)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tawait timeCardORM.deleteTimeCardEntryById(card.id);\n\t\tawait loadAllTimeCards();\n\t};\n\n\tconst handleAddManualEntry = (userId: string) => {\n\t\tsetManualEntryUserId(userId);\n\t\tsetShowManualEntry(true);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Users className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.totalEmployees}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{users.filter(u => u.role === UserRole.Employee).length}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Timer className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.hoursToday}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('day').toFixed(2)}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<CalendarDays className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.hoursThisWeek}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('week').toFixed(2)}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.allEmployeeTimeCards}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>{t.viewManageRecords}</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button onClick={() => handleAddManualEntry(\"\")} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<div className=\"flex gap-4 flex-wrap\">\n\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n\t\t\t\t\t\t\t<Label>{t.filterByEmployee}</Label>\n\t\t\t\t\t\t\t<Select value={selectedEmployee} onValueChange={setSelectedEmployee}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value=\"all\">{t.allEmployees}</SelectItem>\n\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t{u.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n\t\t\t\t\t\t\t<Label>{t.filterByDate}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\tvalue={dateFilter}\n\t\t\t\t\t\t\t\tonChange={(e) => setDateFilter(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{(selectedEmployee !== \"all\" || dateFilter) && (\n\t\t\t\t\t\t\t<div className=\"flex items-end\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelectedEmployee(\"all\");\n\t\t\t\t\t\t\t\t\t\tsetDateFilter(\"\");\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t.clearFilters}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{filteredCards.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCardsFound}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t{filteredCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditCard(tc)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteTimeCard(tc)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Dialog open={!!editingCard} onOpenChange={(open) => !open && setEditingCard(null)}>\n\t\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.editTimeCard}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n\t\t\t\t\t\t\t<Input value={editingCard ? getUserName(editingCard.user_id) : \"\"} disabled />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editClockIn}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockIn(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editClockOut}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockOut(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={editLocation}\n\t\t\t\t\t\t\t\tonChange={(e) => setEditLocation(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tvalue={editWorkDescription}\n\t\t\t\t\t\t\t\tonChange={(e) => setEditWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.lunchStartTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editLunchStart}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchStart(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.lunchEndTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editLunchEnd}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchEnd(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingCard(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleSaveEdit}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<ManualEntryDialog\n\t\t\t\topen={showManualEntry}\n\t\t\t\tonClose={() => setShowManualEntry(false)}\n\t\t\t\tuserId={manualEntryUserId}\n\t\t\t\tonSave={loadAllTimeCards}\n\t\t\t\tlanguage={language}\n\t\t\t\tusers={users}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nfunction ReportsTab({ users, language }: { users: UserModel[]; language: Language }) {\n\tconst [weekStart, setWeekStart] = useState(\"\");\n\tconst [reportData, setReportData] = useState<{ user: UserModel; regularHours: number; overtimeHours: number; totalHours: number }[]>([]);\n\tconst [detailedTimeCards, setDetailedTimeCards] = useState<TimeCardEntryModel[]>([]);\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\t// Set default to current week\n\t\tconst today = new Date();\n\t\tconst monday = new Date(today);\n\t\tmonday.setDate(today.getDate() - today.getDay() + 1);\n\t\tsetWeekStart(monday.toISOString().slice(0, 10));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (weekStart) {\n\t\t\tloadWeeklyReport();\n\t\t}\n\t}, [weekStart, users]);\n\n\tconst loadWeeklyReport = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n\n\t\tconst weekStartDate = new Date(weekStart);\n\t\tconst weekStartTimestamp = Math.floor(weekStartDate.getTime() / 1000);\n\t\tconst weekEndTimestamp = weekStartTimestamp + 604800; // 7 days\n\n\t\tconst weekCards = allCards.filter(tc => {\n\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\treturn clockIn >= weekStartTimestamp && clockIn < weekEndTimestamp && tc.total_hours;\n\t\t});\n\n\t\t// Store detailed time cards\n\t\tsetDetailedTimeCards(weekCards.sort((a, b) => parseInt(a.clock_in_timestamp) - parseInt(b.clock_in_timestamp)));\n\n\t\tconst employeeHours = users\n\t\t\t.filter(u => u.role === UserRole.Employee)\n\t\t\t.map(user => {\n\t\t\t\tconst userCards = weekCards.filter(tc => tc.user_id === user.id);\n\t\t\t\tconst totalHours = userCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n\t\t\t\tconst regularHours = Math.min(totalHours, 40);\n\t\t\t\tconst overtimeHours = Math.max(totalHours - 40, 0);\n\n\t\t\t\treturn {\n\t\t\t\t\tuser,\n\t\t\t\t\tregularHours,\n\t\t\t\t\tovertimeHours,\n\t\t\t\t\ttotalHours,\n\t\t\t\t};\n\t\t\t});\n\n\t\tsetReportData(employeeHours);\n\t};\n\n\tconst formatHours = (hours: number) => {\n\t\treturn `${hours.toFixed(2)} hrs`;\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatDateOnly = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst getDayOfWeek = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US', { weekday: 'long' });\n\t};\n\n\tconst getUserName = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\treturn user?.name || \"Unknown\";\n\t};\n\n\tconst handlePrint = () => {\n\t\twindow.print();\n\t};\n\n\tconst handleExportCSV = () => {\n\t\tif (detailedTimeCards.length === 0) return;\n\n\t\t// Create CSV header\n\t\tconst headers = [\n\t\t\tt.employeeName,\n\t\t\tt.date,\n\t\t\tt.day,\n\t\t\tt.clockInTime,\n\t\t\tt.clockOutTime,\n\t\t\tt.location,\n\t\t\tt.workDescription,\n\t\t\tt.lunchDuration,\n\t\t\tt.hours\n\t\t];\n\n\t\t// Create CSV rows\n\t\tconst rows = detailedTimeCards.map(tc => {\n\t\t\tconst userName = getUserName(tc.user_id);\n\t\t\tconst date = formatDateOnly(tc.clock_in_timestamp);\n\t\t\tconst day = getDayOfWeek(tc.clock_in_timestamp);\n\t\t\tconst clockIn = formatDate(tc.clock_in_timestamp);\n\t\t\tconst clockOut = tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\";\n\t\t\tconst location = tc.location || \"â€”\";\n\t\t\tconst workDescription = (tc.work_description || \"â€”\").replace(/\"/g, '\"\"'); // Escape quotes\n\t\t\tconst lunchDuration = tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"â€”\";\n\t\t\tconst hours = tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"â€”\";\n\n\t\t\treturn [\n\t\t\t\t`\"${userName}\"`,\n\t\t\t\t`\"${date}\"`,\n\t\t\t\t`\"${day}\"`,\n\t\t\t\t`\"${clockIn}\"`,\n\t\t\t\t`\"${clockOut}\"`,\n\t\t\t\t`\"${location}\"`,\n\t\t\t\t`\"${workDescription}\"`,\n\t\t\t\t`\"${lunchDuration}\"`,\n\t\t\t\t`\"${hours}\"`\n\t\t\t].join(',');\n\t\t});\n\n\t\t// Combine header and rows\n\t\tconst csv = [headers.join(','), ...rows].join('\\n');\n\n\t\t// Create blob and download\n\t\tconst blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n\t\tconst link = document.createElement('a');\n\t\tconst url = URL.createObjectURL(blob);\n\t\tlink.setAttribute('href', url);\n\t\tlink.setAttribute('download', `weekly-report-${weekStart}.csv`);\n\t\tlink.style.visibility = 'hidden';\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.weeklyReport}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>Overtime calculated for hours worked beyond 40 hours/week</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex gap-2 print:hidden\">\n\t\t\t\t\t\t\t<Button onClick={handleExportCSV} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t\t{t.exportCSV}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={handlePrint} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t\t{t.printReport}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<div className=\"max-w-xs print:hidden\">\n\t\t\t\t\t\t<Label>{t.selectWeek}</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\tvalue={weekStart}\n\t\t\t\t\t\t\tonChange={(e) => setWeekStart(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{reportData.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noReportData}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* Summary Table */}\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.regularHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.overtimeHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.totalHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t{reportData.map(({ user, regularHours, overtimeHours, totalHours }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{formatHours(regularHours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-orange-600 font-semibold\">{formatHours(overtimeHours)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatHours(0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-semibold\">{formatHours(totalHours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AlertCircle className=\"w-3 h-3 mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.overtimeAlert}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Detailed Time Cards Table */}\n\t\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold mb-4\">{t.detailedReport}</h3>\n\t\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.date}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.day}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t\t{detailedTimeCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDateOnly(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{getDayOfWeek(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs\">{tc.work_description || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nfunction EmployeesTab({ users, language, onUsersChange }: { users: UserModel[]; language: Language; onUsersChange: () => void }) {\n\tconst [showAddEmployee, setShowAddEmployee] = useState(false);\n\tconst [editingEmployee, setEditingEmployee] = useState<UserModel | null>(null);\n\tconst [employeeName, setEmployeeName] = useState(\"\");\n\tconst [employeeEmail, setEmployeeEmail] = useState(\"\");\n\tconst [employeePhone, setEmployeePhone] = useState(\"\");\n\tconst [employeeRole, setEmployeeRole] = useState<UserRole>(UserRole.Employee);\n\tconst [deleteConfirm, setDeleteConfirm] = useState<UserModel | null>(null);\n\n\tconst t = translations[language];\n\n\tconst handleAddEmployee = async () => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.insertUser([{\n\t\t\tname: employeeName,\n\t\t\temail: employeeEmail,\n\t\t\tphone: employeePhone || null,\n\t\t\trole: employeeRole,\n\t\t} as UserModel]);\n\n\t\tsetShowAddEmployee(false);\n\t\tsetEmployeeName(\"\");\n\t\tsetEmployeeEmail(\"\");\n\t\tsetEmployeePhone(\"\");\n\t\tsetEmployeeRole(UserRole.Employee);\n\t\tonUsersChange();\n\t};\n\n\tconst handleEditEmployee = async () => {\n\t\tif (!editingEmployee) return;\n\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.setUserById(editingEmployee.id, {\n\t\t\t...editingEmployee,\n\t\t\tname: employeeName,\n\t\t\temail: employeeEmail,\n\t\t\tphone: employeePhone || null,\n\t\t\trole: employeeRole,\n\t\t});\n\n\t\tsetEditingEmployee(null);\n\t\tsetEmployeeName(\"\");\n\t\tsetEmployeeEmail(\"\");\n\t\tsetEmployeePhone(\"\");\n\t\tsetEmployeeRole(UserRole.Employee);\n\t\tonUsersChange();\n\t};\n\n\tconst handleDeleteEmployee = async (user: UserModel) => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.deleteUserById(user.id);\n\t\tsetDeleteConfirm(null);\n\t\tonUsersChange();\n\t};\n\n\tconst openEditDialog = (user: UserModel) => {\n\t\tsetEditingEmployee(user);\n\t\tsetEmployeeName(user.name);\n\t\tsetEmployeeEmail(user.email);\n\t\tsetEmployeePhone(user.phone || \"\");\n\t\tsetEmployeeRole(user.role);\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.employees}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>Manage employee accounts</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button onClick={() => setShowAddEmployee(true)}>\n\t\t\t\t\t\t\t<UserPlus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addEmployee}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.name}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.email}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.phone}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.role}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{user.email}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{user.phone || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant={user.role === UserRole.Manager ? \"default\" : \"secondary\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{user.role === UserRole.Manager ? t.manager : t.employee}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditDialog(user)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setDeleteConfirm(user)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.delete}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Dialog open={showAddEmployee} onOpenChange={setShowAddEmployee}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.addEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.name}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={employeeName}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"John Doe\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.email}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tvalue={employeeEmail}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tvalue={employeePhone}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.role}</Label>\n\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setShowAddEmployee(false)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleAddEmployee} disabled={!employeeName || !employeeEmail}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Dialog open={!!editingEmployee} onOpenChange={(open) => !open && setEditingEmployee(null)}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.editEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.name}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={employeeName}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.email}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tvalue={employeeEmail}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tvalue={employeePhone}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.role}</Label>\n\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingEmployee(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleEditEmployee}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Dialog open={!!deleteConfirm} onOpenChange={(open) => !open && setDeleteConfirm(null)}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.deleteEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<p>{t.confirmDelete}</p>\n\t\t\t\t\t<p className=\"font-semibold\">{deleteConfirm?.name}</p>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setDeleteConfirm(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"destructive\" onClick={() => deleteConfirm && handleDeleteEmployee(deleteConfirm)}>\n\t\t\t\t\t\t\t{t.delete}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n\nfunction ManualEntryDialog({\n\topen,\n\tonClose,\n\tuserId,\n\tonSave,\n\tlanguage,\n\tusers\n}: {\n\topen: boolean;\n\tonClose: () => void;\n\tuserId: string;\n\tonSave: () => void;\n\tlanguage: Language;\n\tusers?: UserModel[];\n}) {\n\tconst [selectedUser, setSelectedUser] = useState(userId);\n\tconst [clockIn, setClockIn] = useState(\"\");\n\tconst [clockOut, setClockOut] = useState(\"\");\n\tconst [location, setLocation] = useState(\"\");\n\tconst [workDescription, setWorkDescription] = useState(\"\");\n\tconst [lunchStart, setLunchStart] = useState(\"\");\n\tconst [lunchEnd, setLunchEnd] = useState(\"\");\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tsetSelectedUser(userId);\n\t\t\t// Set default to today\n\t\t\tconst now = new Date();\n\t\t\tconst today = now.toISOString().slice(0, 10);\n\t\t\tsetClockIn(`${today}T09:00`);\n\t\t\tsetClockOut(`${today}T17:00`);\n\t\t\tsetLocation(\"\");\n\t\t\tsetWorkDescription(\"\");\n\t\t\tsetLunchStart(`${today}T12:00`);\n\t\t\tsetLunchEnd(`${today}T13:00`);\n\t\t}\n\t}, [open, userId]);\n\n\tconst handleSave = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\n\t\tconst clockInTimestamp = Math.floor(new Date(clockIn).getTime() / 1000).toString();\n\t\tconst clockOutTimestamp = clockOut ? Math.floor(new Date(clockOut).getTime() / 1000).toString() : null;\n\t\tconst lunchStartTimestamp = lunchStart ? Math.floor(new Date(lunchStart).getTime() / 1000).toString() : null;\n\t\tconst lunchEndTimestamp = lunchEnd ? Math.floor(new Date(lunchEnd).getTime() / 1000).toString() : null;\n\n\t\tlet totalHours = null;\n\t\tlet lunchDurationMinutes = null;\n\n\t\t// Calculate lunch duration\n\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n\t\t\tconst lunchStartTime = parseInt(lunchStartTimestamp);\n\t\t\tconst lunchEndTime = parseInt(lunchEndTimestamp);\n\t\t\tlunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n\t\t}\n\n\t\t// Calculate total hours\n\t\tif (clockOutTimestamp) {\n\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time\n\t\t\tif (lunchDurationMinutes) {\n\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n\t\t\t}\n\t\t}\n\n\t\tawait timeCardORM.insertTimeCardEntry([{\n\t\t\tuser_id: selectedUser,\n\t\t\tclock_in_timestamp: clockInTimestamp,\n\t\t\tclock_out_timestamp: clockOutTimestamp,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: location || null,\n\t\t\twork_description: workDescription || null,\n\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n\t\t} as TimeCardEntryModel]);\n\n\t\tonSave();\n\t\tonClose();\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onClose}>\n\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>{t.addManualEntry}</DialogTitle>\n\t\t\t\t</DialogHeader>\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t{users && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n\t\t\t\t\t\t\t<Select value={selectedUser} onValueChange={setSelectedUser}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t{u.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={clockIn}\n\t\t\t\t\t\t\t\tonChange={(e) => setClockIn(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={clockOut}\n\t\t\t\t\t\t\t\tonChange={(e) => setClockOut(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.lunchStartTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={lunchStart}\n\t\t\t\t\t\t\t\tonChange={(e) => setLunchStart(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.lunchEndTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={lunchEnd}\n\t\t\t\t\t\t\t\tonChange={(e) => setLunchEnd(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button variant=\"outline\" onClick={onClose}>\n\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleSave} disabled={!selectedUser || !clockIn}>\n\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","numLines":1877,"startLine":1,"totalLines":1877}}}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01DrzbsCCzNfGhUDkirZvdWv","type":"message","role":"assistant","content":[{"type":"text","text":"Now I'll restructure the employee clock in/out layout to follow the requested flow: Clock In â†’ Start Lunch (optional) â†’ End Lunch (optional) â†’ Clock Out â†’ Work Location â†’ Describe Your Work. I'll make the layout clearer and more intuitive."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":26659,"cache_read_input_tokens":21765,"cache_creation":{"ephemeral_5m_input_tokens":26659,"ephemeral_1h_input_tokens":0},"output_tokens":1},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"9fdd7876-c885-4818-b8d4-14a3422501cc"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_01DrzbsCCzNfGhUDkirZvdWv","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_vrtx_01QosufiY2VjtqyCCfH5oVHX","name":"Edit","input":{"file_path":"/home/user/vite-template/src/routes/index.tsx","old_string":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.location && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ“ {activeShift.location}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ½ï¸ {formatMinutes(activeShift.lunch_duration_minutes)}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<div className=\"flex flex-col sm:grid sm:grid-cols-2 gap-3\">\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"sm:col-span-2 h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold border-2 shadow-sm hover:shadow-md transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>","new_string":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-5 md:space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-5 md:space-y-6\">\n\t\t\t\t\t\t\t{/* Status Display */}\n\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Work Location */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.location}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Work Description */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.workDescription}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Action Buttons */}\n\t\t\t\t\t\t\t<div className=\"pt-2 space-y-3\">\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-lg font-semibold shadow-md hover:shadow-lg transition-all bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 text-lg font-semibold border-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-950 shadow-sm hover:shadow-md transition-all\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.startLunch} ({language === 'en' ? 'Optional' : 'Opcional'})\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-lg font-bold shadow-md hover:shadow-lg transition-all\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Lunch Summary (if taken) */}\n\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && !isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t{t.lunchDuration}: {formatMinutes(activeShift.lunch_duration_minutes)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t{/* Not Clocked In Status */}\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Complete the form below to clock in</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Work Location */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.location}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Work Description */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.workDescription}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Clock In Button */}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":4,"cache_creation_input_tokens":26659,"cache_read_input_tokens":21765,"cache_creation":{"ephemeral_5m_input_tokens":26659,"ephemeral_1h_input_tokens":0},"output_tokens":4630},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"cee1e5fd-7a9e-4552-ab49-9311dd708715"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_vrtx_01QosufiY2VjtqyCCfH5oVHX","type":"tool_result","content":"The file /home/user/vite-template/src/routes/index.tsx has been updated. Here's the result of running `cat -n` on a snippet of the edited file:\n   473â†’\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n   474â†’\t\treturn `${Math.round(minutes)} min`;\n   475â†’\t};\n   476â†’\n   477â†’\treturn (\n   478â†’\t\t<div className=\"space-y-6\">\n   479â†’\t\t\t<Card>\n   480â†’\t\t\t\t<CardHeader className=\"pb-4\">\n   481â†’\t\t\t\t\t<div className=\"flex justify-between items-center\">\n   482â†’\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n   483â†’\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n   484â†’\t\t\t\t\t\t\t{t.clockInOut}\n   485â†’\t\t\t\t\t\t</CardTitle>\n   486â†’\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n   487â†’\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n   488â†’\t\t\t\t\t\t\t{t.addTimeCard}\n   489â†’\t\t\t\t\t\t</Button>\n   490â†’\t\t\t\t\t</div>\n   491â†’\t\t\t\t</CardHeader>\n   492â†’\t\t\t\t<CardContent className=\"space-y-5 md:space-y-6\">\n   493â†’\t\t\t\t\t{activeShift ? (\n   494â†’\t\t\t\t\t\t<div className=\"space-y-5 md:space-y-6\">\n   495â†’\t\t\t\t\t\t\t{/* Status Display */}\n   496â†’\t\t\t\t\t\t\t{isOnLunch ? (\n   497â†’\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n   498â†’\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n   499â†’\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n   500â†’\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n   501â†’\t\t\t\t\t\t\t\t\t\t</div>\n   502â†’\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n   503â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n   504â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n   505â†’\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n   506â†’\t\t\t\t\t\t\t\t\t\t\t</p>\n   507â†’\t\t\t\t\t\t\t\t\t\t</div>\n   508â†’\t\t\t\t\t\t\t\t\t</div>\n   509â†’\t\t\t\t\t\t\t\t</div>\n   510â†’\t\t\t\t\t\t\t) : (\n   511â†’\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n   512â†’\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n   513â†’\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n   514â†’\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n   515â†’\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n   516â†’\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n   517â†’\t\t\t\t\t\t\t\t\t\t\t\t</div>\n   518â†’\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n   519â†’\t\t\t\t\t\t\t\t\t\t\t</div>\n   520â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n   521â†’\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n   522â†’\t\t\t\t\t\t\t\t\t\t\t</p>\n   523â†’\t\t\t\t\t\t\t\t\t\t</div>\n   524â†’\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n   525â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n   526â†’\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n   527â†’\t\t\t\t\t\t\t\t\t\t\t</p>\n   528â†’\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n   529â†’\t\t\t\t\t\t\t\t\t\t</div>\n   530â†’\t\t\t\t\t\t\t\t\t</div>\n   531â†’\t\t\t\t\t\t\t\t</div>\n   532â†’\t\t\t\t\t\t\t)}\n   533â†’\n   534â†’\t\t\t\t\t\t\t{/* Work Location */}\n   535â†’\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   536â†’\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n   537â†’\t\t\t\t\t\t\t\t\tğŸ“ {t.location}\n   538â†’\t\t\t\t\t\t\t\t</Label>\n   539â†’\t\t\t\t\t\t\t\t<Input\n   540â†’\t\t\t\t\t\t\t\t\tvalue={location}\n   541â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n   542â†’\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n   543â†’\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n   544â†’\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n   545â†’\t\t\t\t\t\t\t\t/>\n   546â†’\t\t\t\t\t\t\t</div>\n   547â†’\n   548â†’\t\t\t\t\t\t\t{/* Work Description */}\n   549â†’\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   550â†’\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n   551â†’\t\t\t\t\t\t\t\t\tğŸ“ {t.workDescription}\n   552â†’\t\t\t\t\t\t\t\t</Label>\n   553â†’\t\t\t\t\t\t\t\t<Textarea\n   554â†’\t\t\t\t\t\t\t\t\tvalue={workDescription}\n   555â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n   556â†’\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n   557â†’\t\t\t\t\t\t\t\t\trows={4}\n   558â†’\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n   559â†’\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n   560â†’\t\t\t\t\t\t\t\t/>\n   561â†’\t\t\t\t\t\t\t</div>\n   562â†’\n   563â†’\t\t\t\t\t\t\t{/* Action Buttons */}\n   564â†’\t\t\t\t\t\t\t<div className=\"pt-2 space-y-3\">\n   565â†’\t\t\t\t\t\t\t\t{isOnLunch ? (\n   566â†’\t\t\t\t\t\t\t\t\t<Button\n   567â†’\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n   568â†’\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n   569â†’\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-lg font-semibold shadow-md hover:shadow-lg transition-all bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600\"\n   570â†’\t\t\t\t\t\t\t\t\t>\n   571â†’\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n   572â†’\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n   573â†’\t\t\t\t\t\t\t\t\t</Button>\n   574â†’\t\t\t\t\t\t\t\t) : (\n   575â†’\t\t\t\t\t\t\t\t\t<>\n   576â†’\t\t\t\t\t\t\t\t\t\t<Button\n   577â†’\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n   578â†’\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n   579â†’\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n   580â†’\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 text-lg font-semibold border-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-950 shadow-sm hover:shadow-md transition-all\"\n   581â†’\t\t\t\t\t\t\t\t\t\t>\n   582â†’\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n   583â†’\t\t\t\t\t\t\t\t\t\t\t{t.startLunch} ({language === 'en' ? 'Optional' : 'Opcional'})\n   584â†’\t\t\t\t\t\t\t\t\t\t</Button>\n   585â†’\t\t\t\t\t\t\t\t\t\t<Button\n   586â†’\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n   587â†’\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n   588â†’\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n   589â†’\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-lg font-bold shadow-md hover:shadow-lg transition-all\"\n   590â†’\t\t\t\t\t\t\t\t\t\t>\n   591â†’\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n   592â†’\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n   593â†’\t\t\t\t\t\t\t\t\t\t</Button>\n   594â†’\t\t\t\t\t\t\t\t\t</>\n   595â†’\t\t\t\t\t\t\t\t)}\n   596â†’\t\t\t\t\t\t\t</div>\n   597â†’\n   598â†’\t\t\t\t\t\t\t{/* Lunch Summary (if taken) */}\n   599â†’\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && !isOnLunch && (\n   600â†’\t\t\t\t\t\t\t\t<div className=\"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n   601â†’\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground flex items-center gap-2\">\n   602â†’\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-4 h-4\" />\n   603â†’\t\t\t\t\t\t\t\t\t\t{t.lunchDuration}: {formatMinutes(activeShift.lunch_duration_minutes)}\n   604â†’\t\t\t\t\t\t\t\t\t</p>\n   605â†’\t\t\t\t\t\t\t\t</div>\n   606â†’\t\t\t\t\t\t\t)}\n   607â†’\t\t\t\t\t\t</div>\n   608â†’\t\t\t\t\t) : (\n   609â†’\t\t\t\t\t\t<div className=\"space-y-5\">\n   610â†’\t\t\t\t\t\t\t{/* Not Clocked In Status */}\n   611â†’\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n   612â†’\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n   613â†’\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n   614â†’\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Complete the form below to clock in</p>\n   615â†’\t\t\t\t\t\t\t</div>\n   616â†’\n   617â†’\t\t\t\t\t\t\t{/* Work Location */}\n   618â†’\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   619â†’\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n   620â†’\t\t\t\t\t\t\t\t\tğŸ“ {t.location}\n   621â†’\t\t\t\t\t\t\t\t</Label>\n   622â†’\t\t\t\t\t\t\t\t<Input\n   623â†’\t\t\t\t\t\t\t\t\tvalue={location}\n   624â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n   625â†’\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n   626â†’\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n   627â†’\t\t\t\t\t\t\t\t/>\n   628â†’\t\t\t\t\t\t\t</div>\n   629â†’\n   630â†’\t\t\t\t\t\t\t{/* Work Description */}\n   631â†’\t\t\t\t\t\t\t<div className=\"space-y-2\">\n   632â†’\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n   633â†’\t\t\t\t\t\t\t\t\tğŸ“ {t.workDescription}\n   634â†’\t\t\t\t\t\t\t\t</Label>\n   635â†’\t\t\t\t\t\t\t\t<Textarea\n   636â†’\t\t\t\t\t\t\t\t\tvalue={workDescription}\n   637â†’\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n   638â†’\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n   639â†’\t\t\t\t\t\t\t\t\trows={4}\n   640â†’\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n   641â†’\t\t\t\t\t\t\t\t/>\n   642â†’\t\t\t\t\t\t\t</div>\n   643â†’\n   644â†’\t\t\t\t\t\t\t{/* Clock In Button */}\n   645â†’\t\t\t\t\t\t\t<Button\n   646â†’\t\t\t\t\t\t\t\tonClick={handleClockIn}\n   647â†’\t\t\t\t\t\t\t\tsize=\"lg\"\n   648â†’\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n   649â†’\t\t\t\t\t\t\t>\n   650â†’\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n   651â†’\t\t\t\t\t\t\t\t{t.clockIn}\n   652â†’\t\t\t\t\t\t\t</Button>\n   653â†’\t\t\t\t\t\t</div>\n   654â†’\t\t\t\t\t)}\n   655â†’\t\t\t\t</CardContent>\n   656â†’\t\t\t</Card>\n   657â†’\n   658â†’\t\t\t<Card>\n   659â†’\t\t\t\t<CardHeader>\n   660â†’\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">"}]},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"980fe5fe-04c7-46c9-922a-810ad0f14394","tool_use_result":{"filePath":"/home/user/vite-template/src/routes/index.tsx","oldString":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.location && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ“ {activeShift.location}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ½ï¸ {formatMinutes(activeShift.lunch_duration_minutes)}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<div className=\"flex flex-col sm:grid sm:grid-cols-2 gap-3\">\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"sm:col-span-2 h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold border-2 shadow-sm hover:shadow-md transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>","newString":"\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-5 md:space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-5 md:space-y-6\">\n\t\t\t\t\t\t\t{/* Status Display */}\n\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{/* Work Location */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.location}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Work Description */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.workDescription}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\tdisabled={isOnLunch}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Action Buttons */}\n\t\t\t\t\t\t\t<div className=\"pt-2 space-y-3\">\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-lg font-semibold shadow-md hover:shadow-lg transition-all bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-14 text-lg font-semibold border-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-950 shadow-sm hover:shadow-md transition-all\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.startLunch} ({language === 'en' ? 'Optional' : 'Opcional'})\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-lg font-bold shadow-md hover:shadow-lg transition-all\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Lunch Summary (if taken) */}\n\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && !isOnLunch && (\n\t\t\t\t\t\t\t\t<div className=\"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">\n\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t{t.lunchDuration}: {formatMinutes(activeShift.lunch_duration_minutes)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t{/* Not Clocked In Status */}\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Complete the form below to clock in</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Work Location */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.location}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Work Description */}\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold flex items-center gap-2\">\n\t\t\t\t\t\t\t\t\tğŸ“ {t.workDescription}\n\t\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Clock In Button */}\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>","originalFile":"import { createFileRoute } from \"@tanstack/react-router\";\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from \"@/components/ui/dialog\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Clock, Users, CalendarDays, Timer, Languages, Coffee, UserPlus, FileText, AlertCircle, Plus, Trash2 } from \"lucide-react\";\nimport { UserORM, type UserModel, UserRole } from \"@/sdk/database/orm/orm_user\";\nimport { TimeCardEntryORM, type TimeCardEntryModel } from \"@/sdk/database/orm/orm_time_card_entry\";\n\nexport const Route = createFileRoute(\"/\")({\n\tcomponent: App,\n});\n\ntype Language = 'en' | 'es';\n\nconst translations = {\n\ten: {\n\t\tappTitle: \"Employee Time Tracking\",\n\t\tselectAccount: \"Select your account to continue\",\n\t\tselectUser: \"Select User\",\n\t\tchooseAccount: \"Choose your account\",\n\t\tmanager: \"Manager\",\n\t\temployee: \"Employee\",\n\t\tswitchUser: \"Switch User\",\n\t\ttimeTrackingSystem: \"Time Tracking System\",\n\t\twelcome: \"Welcome\",\n\t\tclockInOut: \"Clock In/Out\",\n\t\tcurrentlyClocked: \"Currently Clocked In\",\n\t\tsince: \"Since\",\n\t\telapsedTime: \"Elapsed Time\",\n\t\tclockOut: \"Clock Out\",\n\t\tnotClocked: \"Not currently clocked in\",\n\t\tclockIn: \"Clock In\",\n\t\ttimeCardHistory: \"Time Card History\",\n\t\trecentRecords: \"Your recent clock in/out records\",\n\t\tnoTimeCards: \"No time cards yet\",\n\t\tclockInTime: \"Clock In\",\n\t\tclockOutTime: \"Clock Out\",\n\t\thours: \"Hours\",\n\t\tstatus: \"Status\",\n\t\tcompleted: \"Completed\",\n\t\tactive: \"Active\",\n\t\ttotalEmployees: \"Total Employees\",\n\t\thoursToday: \"Hours Today\",\n\t\thoursThisWeek: \"Hours This Week\",\n\t\tallEmployeeTimeCards: \"All Employee Time Cards\",\n\t\tviewManageRecords: \"View and manage all employee time records\",\n\t\tfilterByEmployee: \"Filter by Employee\",\n\t\tallEmployees: \"All Employees\",\n\t\tfilterByDate: \"Filter by Date\",\n\t\tclearFilters: \"Clear Filters\",\n\t\tnoTimeCardsFound: \"No time cards found\",\n\t\temployeeName: \"Employee\",\n\t\tactions: \"Actions\",\n\t\tedit: \"Edit\",\n\t\teditTimeCard: \"Edit Time Card\",\n\t\tcancel: \"Cancel\",\n\t\tsaveChanges: \"Save Changes\",\n\t\tlocation: \"Location\",\n\t\twhereWorked: \"Where did you work?\",\n\t\tworkDescription: \"Work Description\",\n\t\twhatDid: \"What did you do today?\",\n\t\tlocationPlaceholder: \"e.g., Office, Remote, Client Site\",\n\t\tdescriptionPlaceholder: \"Describe your work activities...\",\n\t\tstartLunch: \"Start Lunch Break\",\n\t\tendLunch: \"End Lunch Break\",\n\t\tonLunchBreak: \"On Lunch Break\",\n\t\tlunchBreak: \"Lunch Break\",\n\t\tlunchDuration: \"Lunch\",\n\t\tlunchStartTime: \"Lunch Start\",\n\t\tlunchEndTime: \"Lunch End\",\n\t\ttimeCards: \"Time Cards\",\n\t\treports: \"Reports\",\n\t\temployees: \"Employees\",\n\t\taddEmployee: \"Add Employee\",\n\t\teditEmployee: \"Edit Employee\",\n\t\tdeleteEmployee: \"Delete Employee\",\n\t\tname: \"Name\",\n\t\temail: \"Email\",\n\t\tphone: \"Phone\",\n\t\trole: \"Role\",\n\t\tdelete: \"Delete\",\n\t\tweeklyReport: \"Weekly Report\",\n\t\tselectWeek: \"Select Week\",\n\t\tregularHours: \"Regular\",\n\t\tovertimeHours: \"Overtime\",\n\t\ttotalHours: \"Total\",\n\t\tnoReportData: \"No data for selected week\",\n\t\taddTimeCard: \"Add Time Card\",\n\t\tmanualEntry: \"Manual Entry\",\n\t\taddManualEntry: \"Add Manual Time Card\",\n\t\tconfirmDelete: \"Are you sure you want to delete this employee?\",\n\t\tovertimeAlert: \"Overtime Alert\",\n\t\tprintReport: \"Print Report\",\n\t\texportCSV: \"Export to CSV\",\n\t\tdetailedReport: \"Detailed Time Card Report\",\n\t\tdate: \"Date\",\n\t\tday: \"Day\",\n\t\tdeleteTimeCard: \"Delete Time Card\",\n\t\tconfirmDeleteTimeCard: \"Are you sure you want to delete this time card? This action cannot be undone.\",\n\t},\n\tes: {\n\t\tappTitle: \"Registro de Tiempo de Empleados\",\n\t\tselectAccount: \"Selecciona tu cuenta para continuar\",\n\t\tselectUser: \"Seleccionar Usuario\",\n\t\tchooseAccount: \"Elige tu cuenta\",\n\t\tmanager: \"Gerente\",\n\t\temployee: \"Empleado\",\n\t\tswitchUser: \"Cambiar Usuario\",\n\t\ttimeTrackingSystem: \"Sistema de Registro de Tiempo\",\n\t\twelcome: \"Bienvenido\",\n\t\tclockInOut: \"Entrada/Salida\",\n\t\tcurrentlyClocked: \"Actualmente Registrado\",\n\t\tsince: \"Desde\",\n\t\telapsedTime: \"Tiempo Transcurrido\",\n\t\tclockOut: \"Registrar Salida\",\n\t\tnotClocked: \"No estÃ¡ registrado actualmente\",\n\t\tclockIn: \"Registrar Entrada\",\n\t\ttimeCardHistory: \"Historial de Tarjetas de Tiempo\",\n\t\trecentRecords: \"Tus registros recientes de entrada/salida\",\n\t\tnoTimeCards: \"No hay tarjetas de tiempo todavÃ­a\",\n\t\tclockInTime: \"Entrada\",\n\t\tclockOutTime: \"Salida\",\n\t\thours: \"Horas\",\n\t\tstatus: \"Estado\",\n\t\tcompleted: \"Completado\",\n\t\tactive: \"Activo\",\n\t\ttotalEmployees: \"Total de Empleados\",\n\t\thoursToday: \"Horas Hoy\",\n\t\thoursThisWeek: \"Horas Esta Semana\",\n\t\tallEmployeeTimeCards: \"Todas las Tarjetas de Tiempo\",\n\t\tviewManageRecords: \"Ver y gestionar todos los registros de empleados\",\n\t\tfilterByEmployee: \"Filtrar por Empleado\",\n\t\tallEmployees: \"Todos los Empleados\",\n\t\tfilterByDate: \"Filtrar por Fecha\",\n\t\tclearFilters: \"Limpiar Filtros\",\n\t\tnoTimeCardsFound: \"No se encontraron tarjetas de tiempo\",\n\t\temployeeName: \"Empleado\",\n\t\tactions: \"Acciones\",\n\t\tedit: \"Editar\",\n\t\teditTimeCard: \"Editar Tarjeta de Tiempo\",\n\t\tcancel: \"Cancelar\",\n\t\tsaveChanges: \"Guardar Cambios\",\n\t\tlocation: \"UbicaciÃ³n\",\n\t\twhereWorked: \"Â¿DÃ³nde trabajaste?\",\n\t\tworkDescription: \"DescripciÃ³n del Trabajo\",\n\t\twhatDid: \"Â¿QuÃ© hiciste hoy?\",\n\t\tlocationPlaceholder: \"ej., Oficina, Remoto, Sitio del Cliente\",\n\t\tdescriptionPlaceholder: \"Describe tus actividades laborales...\",\n\t\tstartLunch: \"Iniciar Almuerzo\",\n\t\tendLunch: \"Terminar Almuerzo\",\n\t\tonLunchBreak: \"En Almuerzo\",\n\t\tlunchBreak: \"Almuerzo\",\n\t\tlunchDuration: \"Almuerzo\",\n\t\tlunchStartTime: \"Inicio Almuerzo\",\n\t\tlunchEndTime: \"Fin Almuerzo\",\n\t\ttimeCards: \"Tarjetas de Tiempo\",\n\t\treports: \"Informes\",\n\t\temployees: \"Empleados\",\n\t\taddEmployee: \"Agregar Empleado\",\n\t\teditEmployee: \"Editar Empleado\",\n\t\tdeleteEmployee: \"Eliminar Empleado\",\n\t\tname: \"Nombre\",\n\t\temail: \"Correo\",\n\t\tphone: \"TelÃ©fono\",\n\t\trole: \"Rol\",\n\t\tdelete: \"Eliminar\",\n\t\tweeklyReport: \"Informe Semanal\",\n\t\tselectWeek: \"Seleccionar Semana\",\n\t\tregularHours: \"Regular\",\n\t\tovertimeHours: \"Tiempo Extra\",\n\t\ttotalHours: \"Total\",\n\t\tnoReportData: \"No hay datos para la semana seleccionada\",\n\t\taddTimeCard: \"Agregar Tarjeta\",\n\t\tmanualEntry: \"Entrada Manual\",\n\t\taddManualEntry: \"Agregar Tarjeta Manual\",\n\t\tconfirmDelete: \"Â¿EstÃ¡ seguro de eliminar este empleado?\",\n\t\tovertimeAlert: \"Alerta de Tiempo Extra\",\n\t\tprintReport: \"Imprimir Informe\",\n\t\texportCSV: \"Exportar a CSV\",\n\t\tdetailedReport: \"Informe Detallado de Tarjetas de Tiempo\",\n\t\tdate: \"Fecha\",\n\t\tday: \"DÃ­a\",\n\t\tdeleteTimeCard: \"Eliminar Tarjeta de Tiempo\",\n\t\tconfirmDeleteTimeCard: \"Â¿EstÃ¡ seguro de eliminar esta tarjeta de tiempo? Esta acciÃ³n no se puede deshacer.\",\n\t}\n};\n\nfunction App() {\n\tconst [currentUser, setCurrentUser] = useState<UserModel | null>(null);\n\tconst [users, setUsers] = useState<UserModel[]>([]);\n\tconst [showUserSelect, setShowUserSelect] = useState(true);\n\tconst [language, setLanguage] = useState<Language>('en');\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadUsers();\n\t}, []);\n\n\tconst loadUsers = async () => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tconst allUsers = await userORM.getAllUser();\n\n\t\t// If no users exist, create demo users\n\t\tif (allUsers.length === 0) {\n\t\t\tconst demoUsers = await userORM.insertUser([\n\t\t\t\t{\n\t\t\t\t\tname: \"John Smith\",\n\t\t\t\t\temail: \"john@example.com\",\n\t\t\t\t\trole: UserRole.Employee,\n\t\t\t\t} as UserModel,\n\t\t\t\t{\n\t\t\t\t\tname: \"Sarah Johnson\",\n\t\t\t\t\temail: \"sarah@example.com\",\n\t\t\t\t\trole: UserRole.Employee,\n\t\t\t\t} as UserModel,\n\t\t\t\t{\n\t\t\t\t\tname: \"Mike Manager\",\n\t\t\t\t\temail: \"mike@example.com\",\n\t\t\t\t\trole: UserRole.Manager,\n\t\t\t\t} as UserModel,\n\t\t\t]);\n\t\t\tsetUsers(demoUsers);\n\t\t} else {\n\t\t\tsetUsers(allUsers);\n\t\t}\n\t};\n\n\tconst handleUserSelect = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\tif (user) {\n\t\t\tsetCurrentUser(user);\n\t\t\tsetShowUserSelect(false);\n\t\t}\n\t};\n\n\tconst handleLogout = () => {\n\t\tsetCurrentUser(null);\n\t\tsetShowUserSelect(true);\n\t};\n\n\tconst toggleLanguage = () => {\n\t\tsetLanguage(prev => prev === 'en' ? 'es' : 'en');\n\t};\n\n\tif (showUserSelect || !currentUser) {\n\t\treturn (\n\t\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4\">\n\t\t\t\t<div className=\"absolute top-4 right-4\">\n\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t{language === 'en' ? 'EspaÃ±ol' : 'English'}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<Card className=\"w-full max-w-md\">\n\t\t\t\t\t<CardHeader>\n\t\t\t\t\t\t<CardTitle className=\"text-2xl\">{t.appTitle}</CardTitle>\n\t\t\t\t\t\t<CardDescription>{t.selectAccount}</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t<Label>{t.selectUser}</Label>\n\t\t\t\t\t\t\t<Select onValueChange={handleUserSelect}>\n\t\t\t\t\t\t\t\t<SelectTrigger className=\"w-full\">\n\t\t\t\t\t\t\t\t\t<SelectValue placeholder={t.chooseAccount} />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={user.id} value={user.id}>\n\t\t\t\t\t\t\t\t\t\t\t{user.name} - {user.role === UserRole.Manager ? t.manager : t.employee}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800\">\n\t\t\t<div className=\"container mx-auto p-6 space-y-6\">\n\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h1 className=\"text-3xl font-bold\">{t.timeTrackingSystem}</h1>\n\t\t\t\t\t\t<p className=\"text-muted-foreground\">\n\t\t\t\t\t\t\t{t.welcome}, {currentUser.name} ({currentUser.role === UserRole.Manager ? t.manager : t.employee})\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t<Button onClick={toggleLanguage} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t\t<Languages className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{language === 'en' ? 'EspaÃ±ol' : 'English'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleLogout} variant=\"outline\">\n\t\t\t\t\t\t\t{t.switchUser}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t{currentUser.role === UserRole.Employee ? (\n\t\t\t\t\t<EmployeeView user={currentUser} language={language} />\n\t\t\t\t) : (\n\t\t\t\t\t<ManagerView user={currentUser} users={users} language={language} onUsersChange={loadUsers} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction EmployeeView({ user, language }: { user: UserModel; language: Language }) {\n\tconst [activeShift, setActiveShift] = useState<TimeCardEntryModel | null>(null);\n\tconst [timeCards, setTimeCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [elapsedTime, setElapsedTime] = useState(0);\n\tconst [location, setLocation] = useState(\"\");\n\tconst [workDescription, setWorkDescription] = useState(\"\");\n\tconst [isOnLunch, setIsOnLunch] = useState(false);\n\tconst [showManualEntry, setShowManualEntry] = useState(false);\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadTimeCards();\n\t}, [user.id]);\n\n\tuseEffect(() => {\n\t\tlet interval: NodeJS.Timeout;\n\t\tif (activeShift && !isOnLunch) {\n\t\t\tinterval = setInterval(() => {\n\t\t\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp) * 1000;\n\t\t\t\tconst elapsed = Date.now() - clockInTime;\n\t\t\t\tsetElapsedTime(elapsed);\n\t\t\t}, 1000);\n\t\t}\n\t\treturn () => clearInterval(interval);\n\t}, [activeShift, isOnLunch]);\n\n\tconst loadTimeCards = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst userTimeCards = await timeCardORM.getTimeCardEntryByUserId(user.id);\n\n\t\t// Sort by clock in time (newest first)\n\t\tconst sorted = userTimeCards.sort((a, b) =>\n\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n\t\t);\n\n\t\tsetTimeCards(sorted);\n\n\t\t// Find active shift (no clock out time)\n\t\tconst active = sorted.find(tc => !tc.clock_out_timestamp);\n\t\tsetActiveShift(active || null);\n\t\tif (active) {\n\t\t\tsetLocation(active.location || \"\");\n\t\t\tsetWorkDescription(active.work_description || \"\");\n\t\t\t// Check if on lunch break\n\t\t\tsetIsOnLunch(!!(active.lunch_start_timestamp && !active.lunch_end_timestamp));\n\t\t} else {\n\t\t\tsetIsOnLunch(false);\n\t\t}\n\t};\n\n\tconst handleClockIn = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tawait timeCardORM.insertTimeCardEntry([{\n\t\t\tuser_id: user.id,\n\t\t\tclock_in_timestamp: now,\n\t\t\tlocation: location || null,\n\t\t\twork_description: workDescription || null,\n\t\t} as TimeCardEntryModel]);\n\n\t\tsetLocation(\"\");\n\t\tsetWorkDescription(\"\");\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleClockOut = async () => {\n\t\tif (!activeShift) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tconst clockInTime = parseInt(activeShift.clock_in_timestamp);\n\t\tconst clockOutTime = parseInt(now);\n\t\tlet totalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t// Deduct lunch time if lunch was taken\n\t\tif (activeShift.lunch_duration_minutes) {\n\t\t\ttotalHours -= activeShift.lunch_duration_minutes / 60;\n\t\t}\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tclock_out_timestamp: now,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: location || activeShift.location,\n\t\t\twork_description: workDescription || activeShift.work_description,\n\t\t});\n\n\t\tsetLocation(\"\");\n\t\tsetWorkDescription(\"\");\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleStartLunch = async () => {\n\t\tif (!activeShift) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tlunch_start_timestamp: now,\n\t\t\tlocation: location || activeShift.location,\n\t\t\twork_description: workDescription || activeShift.work_description,\n\t\t});\n\n\t\tawait loadTimeCards();\n\t};\n\n\tconst handleEndLunch = async () => {\n\t\tif (!activeShift || !activeShift.lunch_start_timestamp) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst now = Math.floor(Date.now() / 1000).toString();\n\n\t\tconst lunchStartTime = parseInt(activeShift.lunch_start_timestamp);\n\t\tconst lunchEndTime = parseInt(now);\n\t\tconst lunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n\n\t\t// Add to existing lunch duration if there was already one\n\t\tconst totalLunchMinutes = (activeShift.lunch_duration_minutes || 0) + lunchDurationMinutes;\n\n\t\tawait timeCardORM.setTimeCardEntryById(activeShift.id, {\n\t\t\t...activeShift,\n\t\t\tlunch_end_timestamp: now,\n\t\t\tlunch_duration_minutes: totalLunchMinutes,\n\t\t});\n\n\t\tawait loadTimeCards();\n\t};\n\n\tconst formatTime = (ms: number) => {\n\t\tconst seconds = Math.floor(ms / 1000);\n\t\tconst hours = Math.floor(seconds / 3600);\n\t\tconst minutes = Math.floor((seconds % 3600) / 60);\n\t\tconst secs = seconds % 60;\n\t\treturn `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatHours = (hours: number | null | undefined) => {\n\t\tif (hours === null || hours === undefined) return \"â€”\";\n\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n\t};\n\n\tconst formatMinutes = (minutes: number | null | undefined) => {\n\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n\t\treturn `${Math.round(minutes)} min`;\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-6\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader className=\"pb-4\">\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<CardTitle className=\"flex items-center gap-2 text-lg md:text-xl\">\n\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 md:w-6 md:h-6\" />\n\t\t\t\t\t\t\t{t.clockInOut}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t\t<Button onClick={() => setShowManualEntry(true)} variant=\"outline\" size=\"sm\" className=\"hidden md:flex\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t{activeShift ? (\n\t\t\t\t\t\t<div className=\"space-y-4 md:space-y-6\">\n\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-4 mb-3\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-orange-700 dark:text-orange-300\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"p-6 bg-green-50 dark:bg-green-900/20 rounded-xl border-2 border-green-300 dark:border-green-700 shadow-sm\">\n\t\t\t\t\t\t\t\t\t<div className=\"flex items-start justify-between gap-4\">\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex items-center gap-3 mb-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"p-2 bg-green-200 dark:bg-green-800 rounded-full\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 text-green-700 dark:text-green-300\" />\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"font-bold text-lg text-green-900 dark:text-green-100\">{t.currentlyClocked}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">\n\t\t\t\t\t\t\t\t\t\t\t\t{t.since} {formatDate(activeShift.clock_in_timestamp)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.location && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ“ {activeShift.location}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tğŸ½ï¸ {formatMinutes(activeShift.lunch_duration_minutes)}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"text-right shrink-0\">\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">\n\t\t\t\t\t\t\t\t\t\t\t\t{formatTime(elapsedTime)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"text-xs text-green-700 dark:text-green-300 mt-1\">{t.elapsedTime}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t{!isOnLunch && (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.location}</Label>\n\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.workDescription}</Label>\n\t\t\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<div className=\"flex flex-col sm:grid sm:grid-cols-2 gap-3\">\n\t\t\t\t\t\t\t\t{isOnLunch ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={handleEndLunch}\n\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"sm:col-span-2 h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t{t.endLunch}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleStartLunch}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold border-2 shadow-sm hover:shadow-md transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Coffee className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.startLunch}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tonClick={handleClockOut}\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<Clock className=\"w-5 h-5 mr-2\" />\n\t\t\t\t\t\t\t\t\t\t\t{t.clockOut}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"space-y-5\">\n\t\t\t\t\t\t\t<div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">\n\t\t\t\t\t\t\t\t<Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />\n\t\t\t\t\t\t\t\t<p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>\n\t\t\t\t\t\t\t\t<p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whereWorked}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t\t\tclassName=\"h-12 text-base\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"space-y-2\">\n\t\t\t\t\t\t\t\t<Label className=\"text-base font-semibold\">{t.whatDid}</Label>\n\t\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\t\trows={3}\n\t\t\t\t\t\t\t\t\tclassName=\"text-base resize-none\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={handleClockIn}\n\t\t\t\t\t\t\t\tsize=\"lg\"\n\t\t\t\t\t\t\t\tclassName=\"w-full h-16 text-xl font-bold shadow-lg hover:shadow-xl transition-all bg-gradient-to-r from-green-600 to-green-500 hover:from-green-700 hover:to-green-600\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Clock className=\"w-6 h-6 mr-3\" />\n\t\t\t\t\t\t\t\t{t.clockIn}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<CardTitle className=\"flex items-center gap-2\">\n\t\t\t\t\t\t<CalendarDays className=\"w-5 h-5\" />\n\t\t\t\t\t\t{t.timeCardHistory}\n\t\t\t\t\t</CardTitle>\n\t\t\t\t\t<CardDescription>{t.recentRecords}</CardDescription>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t{timeCards.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCards}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t{timeCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<ManualEntryDialog\n\t\t\t\topen={showManualEntry}\n\t\t\t\tonClose={() => setShowManualEntry(false)}\n\t\t\t\tuserId={user.id}\n\t\t\t\tonSave={loadTimeCards}\n\t\t\t\tlanguage={language}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nfunction ManagerView({ user, users, language, onUsersChange }: { user: UserModel; users: UserModel[]; language: Language; onUsersChange: () => void }) {\n\tconst [activeTab, setActiveTab] = useState(\"timecards\");\n\n\tconst t = translations[language];\n\n\treturn (\n\t\t<Tabs value={activeTab} onValueChange={setActiveTab}>\n\t\t\t<TabsList className=\"grid w-full grid-cols-3\">\n\t\t\t\t<TabsTrigger value=\"timecards\">\n\t\t\t\t\t<Clock className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.timeCards}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger value=\"reports\">\n\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.reports}\n\t\t\t\t</TabsTrigger>\n\t\t\t\t<TabsTrigger value=\"employees\">\n\t\t\t\t\t<Users className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t{t.employees}\n\t\t\t\t</TabsTrigger>\n\t\t\t</TabsList>\n\n\t\t\t<TabsContent value=\"timecards\" className=\"space-y-4\">\n\t\t\t\t<TimeCardsTab users={users} language={language} />\n\t\t\t</TabsContent>\n\n\t\t\t<TabsContent value=\"reports\" className=\"space-y-4\">\n\t\t\t\t<ReportsTab users={users} language={language} />\n\t\t\t</TabsContent>\n\n\t\t\t<TabsContent value=\"employees\" className=\"space-y-4\">\n\t\t\t\t<EmployeesTab users={users} language={language} onUsersChange={onUsersChange} />\n\t\t\t</TabsContent>\n\t\t</Tabs>\n\t);\n}\n\nfunction TimeCardsTab({ users, language }: { users: UserModel[]; language: Language }) {\n\tconst [allTimeCards, setAllTimeCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [filteredCards, setFilteredCards] = useState<TimeCardEntryModel[]>([]);\n\tconst [selectedEmployee, setSelectedEmployee] = useState<string>(\"all\");\n\tconst [dateFilter, setDateFilter] = useState<string>(\"\");\n\tconst [editingCard, setEditingCard] = useState<TimeCardEntryModel | null>(null);\n\tconst [editClockIn, setEditClockIn] = useState(\"\");\n\tconst [editClockOut, setEditClockOut] = useState(\"\");\n\tconst [editLocation, setEditLocation] = useState(\"\");\n\tconst [editWorkDescription, setEditWorkDescription] = useState(\"\");\n\tconst [editLunchStart, setEditLunchStart] = useState(\"\");\n\tconst [editLunchEnd, setEditLunchEnd] = useState(\"\");\n\tconst [showManualEntry, setShowManualEntry] = useState(false);\n\tconst [manualEntryUserId, setManualEntryUserId] = useState<string>(\"\");\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tloadAllTimeCards();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tapplyFilters();\n\t}, [allTimeCards, selectedEmployee, dateFilter]);\n\n\tconst loadAllTimeCards = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n\n\t\t// Sort by clock in time (newest first)\n\t\tconst sorted = allCards.sort((a, b) =>\n\t\t\tparseInt(b.clock_in_timestamp) - parseInt(a.clock_in_timestamp)\n\t\t);\n\n\t\tsetAllTimeCards(sorted);\n\t};\n\n\tconst applyFilters = () => {\n\t\tlet filtered = [...allTimeCards];\n\n\t\t// Filter by employee\n\t\tif (selectedEmployee !== \"all\") {\n\t\t\tfiltered = filtered.filter(tc => tc.user_id === selectedEmployee);\n\t\t}\n\n\t\t// Filter by date\n\t\tif (dateFilter) {\n\t\t\tconst filterDate = new Date(dateFilter);\n\t\t\tconst filterTimestamp = Math.floor(filterDate.getTime() / 1000);\n\t\t\tconst nextDayTimestamp = filterTimestamp + 86400; // +24 hours\n\n\t\t\tfiltered = filtered.filter(tc => {\n\t\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\t\treturn clockIn >= filterTimestamp && clockIn < nextDayTimestamp;\n\t\t\t});\n\t\t}\n\n\t\tsetFilteredCards(filtered);\n\t};\n\n\tconst getUserName = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\treturn user?.name || \"Unknown\";\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatHours = (hours: number | null | undefined) => {\n\t\tif (hours === null || hours === undefined) return \"â€”\";\n\t\treturn `${hours.toFixed(2)} ${language === 'es' ? 'hrs' : 'hrs'}`;\n\t};\n\n\tconst formatMinutes = (minutes: number | null | undefined) => {\n\t\tif (minutes === null || minutes === undefined) return \"â€”\";\n\t\treturn `${Math.round(minutes)} min`;\n\t};\n\n\tconst calculateTotalHours = (period: 'day' | 'week') => {\n\t\tconst now = Date.now() / 1000;\n\t\tconst periodSeconds = period === 'day' ? 86400 : 604800; // 1 day or 7 days\n\t\tconst startTime = now - periodSeconds;\n\n\t\tconst relevantCards = allTimeCards.filter(tc => {\n\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\treturn clockIn >= startTime && tc.total_hours;\n\t\t});\n\n\t\treturn relevantCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n\t};\n\n\tconst handleEditCard = (card: TimeCardEntryModel) => {\n\t\tsetEditingCard(card);\n\t\tsetEditClockIn(new Date(parseInt(card.clock_in_timestamp) * 1000).toISOString().slice(0, 16));\n\t\tsetEditClockOut(\n\t\t\tcard.clock_out_timestamp\n\t\t\t\t? new Date(parseInt(card.clock_out_timestamp) * 1000).toISOString().slice(0, 16)\n\t\t\t\t: \"\"\n\t\t);\n\t\tsetEditLocation(card.location || \"\");\n\t\tsetEditWorkDescription(card.work_description || \"\");\n\t\tsetEditLunchStart(\n\t\t\tcard.lunch_start_timestamp\n\t\t\t\t? new Date(parseInt(card.lunch_start_timestamp) * 1000).toISOString().slice(0, 16)\n\t\t\t\t: \"\"\n\t\t);\n\t\tsetEditLunchEnd(\n\t\t\tcard.lunch_end_timestamp\n\t\t\t\t? new Date(parseInt(card.lunch_end_timestamp) * 1000).toISOString().slice(0, 16)\n\t\t\t\t: \"\"\n\t\t);\n\t};\n\n\tconst handleSaveEdit = async () => {\n\t\tif (!editingCard) return;\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst clockInTimestamp = Math.floor(new Date(editClockIn).getTime() / 1000).toString();\n\t\tconst clockOutTimestamp = editClockOut\n\t\t\t? Math.floor(new Date(editClockOut).getTime() / 1000).toString()\n\t\t\t: null;\n\t\tconst lunchStartTimestamp = editLunchStart\n\t\t\t? Math.floor(new Date(editLunchStart).getTime() / 1000).toString()\n\t\t\t: null;\n\t\tconst lunchEndTimestamp = editLunchEnd\n\t\t\t? Math.floor(new Date(editLunchEnd).getTime() / 1000).toString()\n\t\t\t: null;\n\n\t\tlet totalHours = null;\n\t\tlet lunchDurationMinutes = null;\n\n\t\t// Calculate lunch duration\n\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n\t\t\tconst lunchStart = parseInt(lunchStartTimestamp);\n\t\t\tconst lunchEnd = parseInt(lunchEndTimestamp);\n\t\t\tlunchDurationMinutes = (lunchEnd - lunchStart) / 60;\n\t\t}\n\n\t\t// Calculate total hours\n\t\tif (clockOutTimestamp) {\n\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time\n\t\t\tif (lunchDurationMinutes) {\n\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n\t\t\t}\n\t\t}\n\n\t\tawait timeCardORM.setTimeCardEntryById(editingCard.id, {\n\t\t\t...editingCard,\n\t\t\tclock_in_timestamp: clockInTimestamp,\n\t\t\tclock_out_timestamp: clockOutTimestamp,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: editLocation || null,\n\t\t\twork_description: editWorkDescription || null,\n\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n\t\t});\n\n\t\tsetEditingCard(null);\n\t\tawait loadAllTimeCards();\n\t};\n\n\tconst handleDeleteTimeCard = async (card: TimeCardEntryModel) => {\n\t\tif (!window.confirm(t.confirmDeleteTimeCard)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tawait timeCardORM.deleteTimeCardEntryById(card.id);\n\t\tawait loadAllTimeCards();\n\t};\n\n\tconst handleAddManualEntry = (userId: string) => {\n\t\tsetManualEntryUserId(userId);\n\t\tsetShowManualEntry(true);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Users className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.totalEmployees}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{users.filter(u => u.role === UserRole.Employee).length}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<Timer className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.hoursToday}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('day').toFixed(2)}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\n\t\t\t\t<Card>\n\t\t\t\t\t<CardHeader className=\"pb-3\">\n\t\t\t\t\t\t<CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n\t\t\t\t\t\t\t<CalendarDays className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t{t.hoursThisWeek}\n\t\t\t\t\t\t</CardTitle>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent>\n\t\t\t\t\t\t<div className=\"text-2xl font-bold\">{calculateTotalHours('week').toFixed(2)}</div>\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t</div>\n\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.allEmployeeTimeCards}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>{t.viewManageRecords}</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button onClick={() => handleAddManualEntry(\"\")} variant=\"outline\" size=\"sm\">\n\t\t\t\t\t\t\t<Plus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addTimeCard}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<div className=\"flex gap-4 flex-wrap\">\n\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n\t\t\t\t\t\t\t<Label>{t.filterByEmployee}</Label>\n\t\t\t\t\t\t\t<Select value={selectedEmployee} onValueChange={setSelectedEmployee}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value=\"all\">{t.allEmployees}</SelectItem>\n\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t{u.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"flex-1 min-w-[200px]\">\n\t\t\t\t\t\t\t<Label>{t.filterByDate}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\t\tvalue={dateFilter}\n\t\t\t\t\t\t\t\tonChange={(e) => setDateFilter(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{(selectedEmployee !== \"all\" || dateFilter) && (\n\t\t\t\t\t\t\t<div className=\"flex items-end\">\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetSelectedEmployee(\"all\");\n\t\t\t\t\t\t\t\t\t\tsetDateFilter(\"\");\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t.clearFilters}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{filteredCards.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noTimeCardsFound}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t{filteredCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs truncate\">{tc.work_description || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatMinutes(tc.lunch_duration_minutes)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatHours(tc.total_hours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge variant=\"secondary\">{t.completed}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : tc.lunch_start_timestamp && !tc.lunch_end_timestamp ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">{t.onLunchBreak}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-green-500\">{t.active}</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleEditCard(tc)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteTimeCard(tc)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"text-red-600 hover:text-red-700 hover:bg-red-50\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Trash2 className=\"w-4 h-4\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Dialog open={!!editingCard} onOpenChange={(open) => !open && setEditingCard(null)}>\n\t\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.editTimeCard}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n\t\t\t\t\t\t\t<Input value={editingCard ? getUserName(editingCard.user_id) : \"\"} disabled />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editClockIn}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockIn(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editClockOut}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditClockOut(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={editLocation}\n\t\t\t\t\t\t\t\tonChange={(e) => setEditLocation(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\t\tvalue={editWorkDescription}\n\t\t\t\t\t\t\t\tonChange={(e) => setEditWorkDescription(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.lunchStartTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editLunchStart}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchStart(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Label>{t.lunchEndTime}</Label>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\t\tvalue={editLunchEnd}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEditLunchEnd(e.target.value)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingCard(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleSaveEdit}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<ManualEntryDialog\n\t\t\t\topen={showManualEntry}\n\t\t\t\tonClose={() => setShowManualEntry(false)}\n\t\t\t\tuserId={manualEntryUserId}\n\t\t\t\tonSave={loadAllTimeCards}\n\t\t\t\tlanguage={language}\n\t\t\t\tusers={users}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nfunction ReportsTab({ users, language }: { users: UserModel[]; language: Language }) {\n\tconst [weekStart, setWeekStart] = useState(\"\");\n\tconst [reportData, setReportData] = useState<{ user: UserModel; regularHours: number; overtimeHours: number; totalHours: number }[]>([]);\n\tconst [detailedTimeCards, setDetailedTimeCards] = useState<TimeCardEntryModel[]>([]);\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\t// Set default to current week\n\t\tconst today = new Date();\n\t\tconst monday = new Date(today);\n\t\tmonday.setDate(today.getDate() - today.getDay() + 1);\n\t\tsetWeekStart(monday.toISOString().slice(0, 10));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (weekStart) {\n\t\t\tloadWeeklyReport();\n\t\t}\n\t}, [weekStart, users]);\n\n\tconst loadWeeklyReport = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\t\tconst allCards = await timeCardORM.getAllTimeCardEntry();\n\n\t\tconst weekStartDate = new Date(weekStart);\n\t\tconst weekStartTimestamp = Math.floor(weekStartDate.getTime() / 1000);\n\t\tconst weekEndTimestamp = weekStartTimestamp + 604800; // 7 days\n\n\t\tconst weekCards = allCards.filter(tc => {\n\t\t\tconst clockIn = parseInt(tc.clock_in_timestamp);\n\t\t\treturn clockIn >= weekStartTimestamp && clockIn < weekEndTimestamp && tc.total_hours;\n\t\t});\n\n\t\t// Store detailed time cards\n\t\tsetDetailedTimeCards(weekCards.sort((a, b) => parseInt(a.clock_in_timestamp) - parseInt(b.clock_in_timestamp)));\n\n\t\tconst employeeHours = users\n\t\t\t.filter(u => u.role === UserRole.Employee)\n\t\t\t.map(user => {\n\t\t\t\tconst userCards = weekCards.filter(tc => tc.user_id === user.id);\n\t\t\t\tconst totalHours = userCards.reduce((sum, tc) => sum + (tc.total_hours || 0), 0);\n\t\t\t\tconst regularHours = Math.min(totalHours, 40);\n\t\t\t\tconst overtimeHours = Math.max(totalHours - 40, 0);\n\n\t\t\t\treturn {\n\t\t\t\t\tuser,\n\t\t\t\t\tregularHours,\n\t\t\t\t\tovertimeHours,\n\t\t\t\t\ttotalHours,\n\t\t\t\t};\n\t\t\t});\n\n\t\tsetReportData(employeeHours);\n\t};\n\n\tconst formatHours = (hours: number) => {\n\t\treturn `${hours.toFixed(2)} hrs`;\n\t};\n\n\tconst formatDate = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst formatDateOnly = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US');\n\t};\n\n\tconst getDayOfWeek = (timestamp: string) => {\n\t\tconst date = new Date(parseInt(timestamp) * 1000);\n\t\treturn date.toLocaleDateString(language === 'es' ? 'es-ES' : 'en-US', { weekday: 'long' });\n\t};\n\n\tconst getUserName = (userId: string) => {\n\t\tconst user = users.find(u => u.id === userId);\n\t\treturn user?.name || \"Unknown\";\n\t};\n\n\tconst handlePrint = () => {\n\t\twindow.print();\n\t};\n\n\tconst handleExportCSV = () => {\n\t\tif (detailedTimeCards.length === 0) return;\n\n\t\t// Create CSV header\n\t\tconst headers = [\n\t\t\tt.employeeName,\n\t\t\tt.date,\n\t\t\tt.day,\n\t\t\tt.clockInTime,\n\t\t\tt.clockOutTime,\n\t\t\tt.location,\n\t\t\tt.workDescription,\n\t\t\tt.lunchDuration,\n\t\t\tt.hours\n\t\t];\n\n\t\t// Create CSV rows\n\t\tconst rows = detailedTimeCards.map(tc => {\n\t\t\tconst userName = getUserName(tc.user_id);\n\t\t\tconst date = formatDateOnly(tc.clock_in_timestamp);\n\t\t\tconst day = getDayOfWeek(tc.clock_in_timestamp);\n\t\t\tconst clockIn = formatDate(tc.clock_in_timestamp);\n\t\t\tconst clockOut = tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\";\n\t\t\tconst location = tc.location || \"â€”\";\n\t\t\tconst workDescription = (tc.work_description || \"â€”\").replace(/\"/g, '\"\"'); // Escape quotes\n\t\t\tconst lunchDuration = tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"â€”\";\n\t\t\tconst hours = tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"â€”\";\n\n\t\t\treturn [\n\t\t\t\t`\"${userName}\"`,\n\t\t\t\t`\"${date}\"`,\n\t\t\t\t`\"${day}\"`,\n\t\t\t\t`\"${clockIn}\"`,\n\t\t\t\t`\"${clockOut}\"`,\n\t\t\t\t`\"${location}\"`,\n\t\t\t\t`\"${workDescription}\"`,\n\t\t\t\t`\"${lunchDuration}\"`,\n\t\t\t\t`\"${hours}\"`\n\t\t\t].join(',');\n\t\t});\n\n\t\t// Combine header and rows\n\t\tconst csv = [headers.join(','), ...rows].join('\\n');\n\n\t\t// Create blob and download\n\t\tconst blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n\t\tconst link = document.createElement('a');\n\t\tconst url = URL.createObjectURL(blob);\n\t\tlink.setAttribute('href', url);\n\t\tlink.setAttribute('download', `weekly-report-${weekStart}.csv`);\n\t\tlink.style.visibility = 'hidden';\n\t\tdocument.body.appendChild(link);\n\t\tlink.click();\n\t\tdocument.body.removeChild(link);\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.weeklyReport}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>Overtime calculated for hours worked beyond 40 hours/week</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"flex gap-2 print:hidden\">\n\t\t\t\t\t\t\t<Button onClick={handleExportCSV} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t\t{t.exportCSV}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={handlePrint} variant=\"outline\" disabled={detailedTimeCards.length === 0}>\n\t\t\t\t\t\t\t\t<FileText className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t\t{t.printReport}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent className=\"space-y-4\">\n\t\t\t\t\t<div className=\"max-w-xs print:hidden\">\n\t\t\t\t\t\t<Label>{t.selectWeek}</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\ttype=\"date\"\n\t\t\t\t\t\t\tvalue={weekStart}\n\t\t\t\t\t\t\tonChange={(e) => setWeekStart(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{reportData.length === 0 ? (\n\t\t\t\t\t\t<p className=\"text-center text-muted-foreground py-8\">{t.noReportData}</p>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* Summary Table */}\n\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.regularHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.overtimeHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.totalHours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.status}</TableHead>\n\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t{reportData.map(({ user, regularHours, overtimeHours, totalHours }) => (\n\t\t\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{formatHours(regularHours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"text-orange-600 font-semibold\">{formatHours(overtimeHours)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tformatHours(0)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-semibold\">{formatHours(totalHours)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{overtimeHours > 0 && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Badge className=\"bg-orange-500\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AlertCircle className=\"w-3 h-3 mr-1\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{t.overtimeAlert}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t{/* Detailed Time Cards Table */}\n\t\t\t\t\t\t\t<div className=\"mt-8\">\n\t\t\t\t\t\t\t\t<h3 className=\"text-lg font-semibold mb-4\">{t.detailedReport}</h3>\n\t\t\t\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.employeeName}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.date}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.day}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockInTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.clockOutTime}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.location}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.workDescription}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.lunchDuration}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t\t<TableHead>{t.hours}</TableHead>\n\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t\t\t\t{detailedTimeCards.map((tc) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<TableRow key={tc.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium whitespace-nowrap\">{getUserName(tc.user_id)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDateOnly(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{getDayOfWeek(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">{formatDate(tc.clock_in_timestamp)}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.clock_out_timestamp ? formatDate(tc.clock_out_timestamp) : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell>{tc.location || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"max-w-xs\">{tc.work_description || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.lunch_duration_minutes ? `${Math.round(tc.lunch_duration_minutes)} min` : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TableCell className=\"whitespace-nowrap\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{tc.total_hours ? `${tc.total_hours.toFixed(2)} hrs` : \"â€”\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\t\t</div>\n\t);\n}\n\nfunction EmployeesTab({ users, language, onUsersChange }: { users: UserModel[]; language: Language; onUsersChange: () => void }) {\n\tconst [showAddEmployee, setShowAddEmployee] = useState(false);\n\tconst [editingEmployee, setEditingEmployee] = useState<UserModel | null>(null);\n\tconst [employeeName, setEmployeeName] = useState(\"\");\n\tconst [employeeEmail, setEmployeeEmail] = useState(\"\");\n\tconst [employeePhone, setEmployeePhone] = useState(\"\");\n\tconst [employeeRole, setEmployeeRole] = useState<UserRole>(UserRole.Employee);\n\tconst [deleteConfirm, setDeleteConfirm] = useState<UserModel | null>(null);\n\n\tconst t = translations[language];\n\n\tconst handleAddEmployee = async () => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.insertUser([{\n\t\t\tname: employeeName,\n\t\t\temail: employeeEmail,\n\t\t\tphone: employeePhone || null,\n\t\t\trole: employeeRole,\n\t\t} as UserModel]);\n\n\t\tsetShowAddEmployee(false);\n\t\tsetEmployeeName(\"\");\n\t\tsetEmployeeEmail(\"\");\n\t\tsetEmployeePhone(\"\");\n\t\tsetEmployeeRole(UserRole.Employee);\n\t\tonUsersChange();\n\t};\n\n\tconst handleEditEmployee = async () => {\n\t\tif (!editingEmployee) return;\n\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.setUserById(editingEmployee.id, {\n\t\t\t...editingEmployee,\n\t\t\tname: employeeName,\n\t\t\temail: employeeEmail,\n\t\t\tphone: employeePhone || null,\n\t\t\trole: employeeRole,\n\t\t});\n\n\t\tsetEditingEmployee(null);\n\t\tsetEmployeeName(\"\");\n\t\tsetEmployeeEmail(\"\");\n\t\tsetEmployeePhone(\"\");\n\t\tsetEmployeeRole(UserRole.Employee);\n\t\tonUsersChange();\n\t};\n\n\tconst handleDeleteEmployee = async (user: UserModel) => {\n\t\tconst userORM = UserORM.getInstance();\n\t\tawait userORM.deleteUserById(user.id);\n\t\tsetDeleteConfirm(null);\n\t\tonUsersChange();\n\t};\n\n\tconst openEditDialog = (user: UserModel) => {\n\t\tsetEditingEmployee(user);\n\t\tsetEmployeeName(user.name);\n\t\tsetEmployeeEmail(user.email);\n\t\tsetEmployeePhone(user.phone || \"\");\n\t\tsetEmployeeRole(user.role);\n\t};\n\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<Card>\n\t\t\t\t<CardHeader>\n\t\t\t\t\t<div className=\"flex justify-between items-center\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<CardTitle>{t.employees}</CardTitle>\n\t\t\t\t\t\t\t<CardDescription>Manage employee accounts</CardDescription>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Button onClick={() => setShowAddEmployee(true)}>\n\t\t\t\t\t\t\t<UserPlus className=\"w-4 h-4 mr-2\" />\n\t\t\t\t\t\t\t{t.addEmployee}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</CardHeader>\n\t\t\t\t<CardContent>\n\t\t\t\t\t<div className=\"overflow-x-auto\">\n\t\t\t\t\t\t<Table>\n\t\t\t\t\t\t\t<TableHeader>\n\t\t\t\t\t\t\t\t<TableRow>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.name}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.email}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.phone}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.role}</TableHead>\n\t\t\t\t\t\t\t\t\t<TableHead>{t.actions}</TableHead>\n\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t</TableHeader>\n\t\t\t\t\t\t\t<TableBody>\n\t\t\t\t\t\t\t\t{users.map((user) => (\n\t\t\t\t\t\t\t\t\t<TableRow key={user.id}>\n\t\t\t\t\t\t\t\t\t\t<TableCell className=\"font-medium\">{user.name}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{user.email}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>{user.phone || \"â€”\"}</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<Badge variant={user.role === UserRole.Manager ? \"default\" : \"secondary\"}>\n\t\t\t\t\t\t\t\t\t\t\t\t{user.role === UserRole.Manager ? t.manager : t.employee}\n\t\t\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t\t<TableCell>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openEditDialog(user)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.edit}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => setDeleteConfirm(user)}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{t.delete}\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</TableCell>\n\t\t\t\t\t\t\t\t\t</TableRow>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</TableBody>\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t</div>\n\t\t\t\t</CardContent>\n\t\t\t</Card>\n\n\t\t\t<Dialog open={showAddEmployee} onOpenChange={setShowAddEmployee}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.addEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.name}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={employeeName}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"John Doe\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.email}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tvalue={employeeEmail}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tvalue={employeePhone}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.role}</Label>\n\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setShowAddEmployee(false)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleAddEmployee} disabled={!employeeName || !employeeEmail}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Dialog open={!!editingEmployee} onOpenChange={(open) => !open && setEditingEmployee(null)}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.editEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.name}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\tvalue={employeeName}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeName(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.email}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\tvalue={employeeEmail}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeeEmail(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.phone}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t\t\tvalue={employeePhone}\n\t\t\t\t\t\t\t\tonChange={(e) => setEmployeePhone(e.target.value)}\n\t\t\t\t\t\t\t\tplaceholder=\"+1 (555) 123-4567\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.role}</Label>\n\t\t\t\t\t\t\t<Select value={employeeRole.toString()} onValueChange={(v) => setEmployeeRole(parseInt(v))}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Employee.toString()}>{t.employee}</SelectItem>\n\t\t\t\t\t\t\t\t\t<SelectItem value={UserRole.Manager.toString()}>{t.manager}</SelectItem>\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setEditingEmployee(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={handleEditEmployee}>\n\t\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\n\t\t\t<Dialog open={!!deleteConfirm} onOpenChange={(open) => !open && setDeleteConfirm(null)}>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<DialogHeader>\n\t\t\t\t\t\t<DialogTitle>{t.deleteEmployee}</DialogTitle>\n\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t<p>{t.confirmDelete}</p>\n\t\t\t\t\t<p className=\"font-semibold\">{deleteConfirm?.name}</p>\n\t\t\t\t\t<DialogFooter>\n\t\t\t\t\t\t<Button variant=\"outline\" onClick={() => setDeleteConfirm(null)}>\n\t\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button variant=\"destructive\" onClick={() => deleteConfirm && handleDeleteEmployee(deleteConfirm)}>\n\t\t\t\t\t\t\t{t.delete}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogFooter>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n\nfunction ManualEntryDialog({\n\topen,\n\tonClose,\n\tuserId,\n\tonSave,\n\tlanguage,\n\tusers\n}: {\n\topen: boolean;\n\tonClose: () => void;\n\tuserId: string;\n\tonSave: () => void;\n\tlanguage: Language;\n\tusers?: UserModel[];\n}) {\n\tconst [selectedUser, setSelectedUser] = useState(userId);\n\tconst [clockIn, setClockIn] = useState(\"\");\n\tconst [clockOut, setClockOut] = useState(\"\");\n\tconst [location, setLocation] = useState(\"\");\n\tconst [workDescription, setWorkDescription] = useState(\"\");\n\tconst [lunchStart, setLunchStart] = useState(\"\");\n\tconst [lunchEnd, setLunchEnd] = useState(\"\");\n\n\tconst t = translations[language];\n\n\tuseEffect(() => {\n\t\tif (open) {\n\t\t\tsetSelectedUser(userId);\n\t\t\t// Set default to today\n\t\t\tconst now = new Date();\n\t\t\tconst today = now.toISOString().slice(0, 10);\n\t\t\tsetClockIn(`${today}T09:00`);\n\t\t\tsetClockOut(`${today}T17:00`);\n\t\t\tsetLocation(\"\");\n\t\t\tsetWorkDescription(\"\");\n\t\t\tsetLunchStart(`${today}T12:00`);\n\t\t\tsetLunchEnd(`${today}T13:00`);\n\t\t}\n\t}, [open, userId]);\n\n\tconst handleSave = async () => {\n\t\tconst timeCardORM = TimeCardEntryORM.getInstance();\n\n\t\tconst clockInTimestamp = Math.floor(new Date(clockIn).getTime() / 1000).toString();\n\t\tconst clockOutTimestamp = clockOut ? Math.floor(new Date(clockOut).getTime() / 1000).toString() : null;\n\t\tconst lunchStartTimestamp = lunchStart ? Math.floor(new Date(lunchStart).getTime() / 1000).toString() : null;\n\t\tconst lunchEndTimestamp = lunchEnd ? Math.floor(new Date(lunchEnd).getTime() / 1000).toString() : null;\n\n\t\tlet totalHours = null;\n\t\tlet lunchDurationMinutes = null;\n\n\t\t// Calculate lunch duration\n\t\tif (lunchStartTimestamp && lunchEndTimestamp) {\n\t\t\tconst lunchStartTime = parseInt(lunchStartTimestamp);\n\t\t\tconst lunchEndTime = parseInt(lunchEndTimestamp);\n\t\t\tlunchDurationMinutes = (lunchEndTime - lunchStartTime) / 60;\n\t\t}\n\n\t\t// Calculate total hours\n\t\tif (clockOutTimestamp) {\n\t\t\tconst clockInTime = parseInt(clockInTimestamp);\n\t\t\tconst clockOutTime = parseInt(clockOutTimestamp);\n\t\t\ttotalHours = (clockOutTime - clockInTime) / 3600;\n\n\t\t\t// Deduct lunch time\n\t\t\tif (lunchDurationMinutes) {\n\t\t\t\ttotalHours -= lunchDurationMinutes / 60;\n\t\t\t}\n\t\t}\n\n\t\tawait timeCardORM.insertTimeCardEntry([{\n\t\t\tuser_id: selectedUser,\n\t\t\tclock_in_timestamp: clockInTimestamp,\n\t\t\tclock_out_timestamp: clockOutTimestamp,\n\t\t\ttotal_hours: totalHours,\n\t\t\tlocation: location || null,\n\t\t\twork_description: workDescription || null,\n\t\t\tlunch_start_timestamp: lunchStartTimestamp,\n\t\t\tlunch_end_timestamp: lunchEndTimestamp,\n\t\t\tlunch_duration_minutes: lunchDurationMinutes,\n\t\t} as TimeCardEntryModel]);\n\n\t\tonSave();\n\t\tonClose();\n\t};\n\n\treturn (\n\t\t<Dialog open={open} onOpenChange={onClose}>\n\t\t\t<DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n\t\t\t\t<DialogHeader>\n\t\t\t\t\t<DialogTitle>{t.addManualEntry}</DialogTitle>\n\t\t\t\t</DialogHeader>\n\t\t\t\t<div className=\"space-y-4\">\n\t\t\t\t\t{users && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.employeeName}</Label>\n\t\t\t\t\t\t\t<Select value={selectedUser} onValueChange={setSelectedUser}>\n\t\t\t\t\t\t\t\t<SelectTrigger>\n\t\t\t\t\t\t\t\t\t<SelectValue />\n\t\t\t\t\t\t\t\t</SelectTrigger>\n\t\t\t\t\t\t\t\t<SelectContent>\n\t\t\t\t\t\t\t\t\t{users.filter(u => u.role === UserRole.Employee).map((u) => (\n\t\t\t\t\t\t\t\t\t\t<SelectItem key={u.id} value={u.id}>\n\t\t\t\t\t\t\t\t\t\t\t{u.name}\n\t\t\t\t\t\t\t\t\t\t</SelectItem>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</SelectContent>\n\t\t\t\t\t\t\t</Select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.clockInTime}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={clockIn}\n\t\t\t\t\t\t\t\tonChange={(e) => setClockIn(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.clockOutTime}</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={clockOut}\n\t\t\t\t\t\t\t\tonChange={(e) => setClockOut(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>{t.location}</Label>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tvalue={location}\n\t\t\t\t\t\t\tonChange={(e) => setLocation(e.target.value)}\n\t\t\t\t\t\t\tplaceholder={t.locationPlaceholder}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>{t.workDescription}</Label>\n\t\t\t\t\t\t<Textarea\n\t\t\t\t\t\t\tvalue={workDescription}\n\t\t\t\t\t\t\tonChange={(e) => setWorkDescription(e.target.value)}\n\t\t\t\t\t\t\tplaceholder={t.descriptionPlaceholder}\n\t\t\t\t\t\t\trows={4}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"grid grid-cols-2 gap-4\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.lunchStartTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={lunchStart}\n\t\t\t\t\t\t\t\tonChange={(e) => setLunchStart(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Label>{t.lunchEndTime} ({language === 'en' ? 'Optional' : 'Opcional'})</Label>\n\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\ttype=\"datetime-local\"\n\t\t\t\t\t\t\t\tvalue={lunchEnd}\n\t\t\t\t\t\t\t\tonChange={(e) => setLunchEnd(e.target.value)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<DialogFooter>\n\t\t\t\t\t<Button variant=\"outline\" onClick={onClose}>\n\t\t\t\t\t\t{t.cancel}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleSave} disabled={!selectedUser || !clockIn}>\n\t\t\t\t\t\t{t.saveChanges}\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogFooter>\n\t\t\t</DialogContent>\n\t\t</Dialog>\n\t);\n}\n","structuredPatch":[{"oldStart":489,"oldLines":16,"newStart":489,"newLines":17,"lines":["             </Button>","           </div>","         </CardHeader>","-        <CardContent className=\"space-y-4 md:space-y-6\">","+        <CardContent className=\"space-y-5 md:space-y-6\">","           {activeShift ? (","-            <div className=\"space-y-4 md:space-y-6\">","+            <div className=\"space-y-5 md:space-y-6\">","+              {/* Status Display */}","               {isOnLunch ? (","                 <div className=\"p-6 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-2 border-orange-300 dark:border-orange-700 shadow-sm\">","                   <div className=\"flex items-center gap-4 mb-3\">","                     <div className=\"p-3 bg-orange-200 dark:bg-orange-800 rounded-full\">","                       <Coffee className=\"w-8 h-8 text-orange-700 dark:text-orange-300\" />","                     </div>","-                    <div>","+                    <div className=\"flex-1\">","                       <p className=\"font-bold text-lg text-orange-900 dark:text-orange-100\">{t.onLunchBreak}</p>","                       <p className=\"text-sm text-orange-700 dark:text-orange-300\">","                         {t.since} {activeShift.lunch_start_timestamp && formatDate(activeShift.lunch_start_timestamp)}"]},{"oldStart":519,"oldLines":16,"newStart":520,"newLines":6,"lines":["                       <p className=\"text-sm text-green-700 dark:text-green-300 ml-11\">","                         {t.since} {formatDate(activeShift.clock_in_timestamp)}","                       </p>","-                      {activeShift.location && (","-                        <p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">","-                          ğŸ“ {activeShift.location}","-                        </p>","-                      )}","-                      {activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && (","-                        <p className=\"text-sm text-green-700 dark:text-green-300 ml-11 mt-1\">","-                          ğŸ½ï¸ {formatMinutes(activeShift.lunch_duration_minutes)}","-                        </p>","-                      )}","                     </div>","                     <div className=\"text-right shrink-0\">","                       <p className=\"text-3xl md:text-4xl font-mono font-bold text-green-900 dark:text-green-100 tabular-nums\">"]},{"oldStart":540,"oldLines":37,"newStart":531,"newLines":42,"lines":["                 </div>","               )}"," ","-              {!isOnLunch && (","-                <>","-                  <div className=\"space-y-2\">","-                    <Label className=\"text-base font-semibold\">{t.location}</Label>","-                    <Input","-                      value={location}","-                      onChange={(e) => setLocation(e.target.value)}","-                      placeholder={t.locationPlaceholder}","-                      className=\"h-12 text-base\"","-                    />","-                  </div>","+              {/* Work Location */}","+              <div className=\"space-y-2\">","+                <Label className=\"text-base font-semibold flex items-center gap-2\">","+                  ğŸ“ {t.location}","+                </Label>","+                <Input","+                  value={location}","+                  onChange={(e) => setLocation(e.target.value)}","+                  placeholder={t.locationPlaceholder}","+                  className=\"h-12 text-base\"","+                  disabled={isOnLunch}","+                />","+              </div>"," ","-                  <div className=\"space-y-2\">","-                    <Label className=\"text-base font-semibold\">{t.workDescription}</Label>","-                    <Textarea","-                      value={workDescription}","-                      onChange={(e) => setWorkDescription(e.target.value)}","-                      placeholder={t.descriptionPlaceholder}","-                      rows={3}","-                      className=\"text-base resize-none\"","-                    />","-                  </div>","-                </>","-              )}","+              {/* Work Description */}","+              <div className=\"space-y-2\">","+                <Label className=\"text-base font-semibold flex items-center gap-2\">","+                  ğŸ“ {t.workDescription}","+                </Label>","+                <Textarea","+                  value={workDescription}","+                  onChange={(e) => setWorkDescription(e.target.value)}","+                  placeholder={t.descriptionPlaceholder}","+                  rows={4}","+                  className=\"text-base resize-none\"","+                  disabled={isOnLunch}","+                />","+              </div>"," ","-              <div className=\"flex flex-col sm:grid sm:grid-cols-2 gap-3\">","+              {/* Action Buttons */}","+              <div className=\"pt-2 space-y-3\">","                 {isOnLunch ? (","                   <Button","                     onClick={handleEndLunch}","                     size=\"lg\"","-                    className=\"sm:col-span-2 h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"","+                    className=\"w-full h-16 text-lg font-semibold shadow-md hover:shadow-lg transition-all bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600\"","                   >","                     <Coffee className=\"w-5 h-5 mr-2\" />","                     {t.endLunch}"]},{"oldStart":581,"oldLines":16,"newStart":577,"newLines":16,"lines":["                       onClick={handleStartLunch}","                       variant=\"outline\"","                       size=\"lg\"","-                      className=\"h-14 text-lg font-semibold border-2 shadow-sm hover:shadow-md transition-shadow\"","+                      className=\"w-full h-14 text-lg font-semibold border-2 border-orange-300 text-orange-700 hover:bg-orange-50 dark:border-orange-700 dark:text-orange-400 dark:hover:bg-orange-950 shadow-sm hover:shadow-md transition-all\"","                     >","                       <Coffee className=\"w-5 h-5 mr-2\" />","-                      {t.startLunch}","+                      {t.startLunch} ({language === 'en' ? 'Optional' : 'Opcional'})","                     </Button>","                     <Button","                       onClick={handleClockOut}","                       variant=\"destructive\"","                       size=\"lg\"","-                      className=\"h-14 text-lg font-semibold shadow-md hover:shadow-lg transition-shadow\"","+                      className=\"w-full h-16 text-lg font-bold shadow-md hover:shadow-lg transition-all\"","                     >","                       <Clock className=\"w-5 h-5 mr-2\" />","                       {t.clockOut}"]},{"oldStart":598,"oldLines":17,"newStart":594,"newLines":31,"lines":["                   </>","                 )}","               </div>","+","+              {/* Lunch Summary (if taken) */}","+              {activeShift.lunch_duration_minutes && activeShift.lunch_duration_minutes > 0 && !isOnLunch && (","+                <div className=\"p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700\">","+                  <p className=\"text-sm text-muted-foreground flex items-center gap-2\">","+                    <Coffee className=\"w-4 h-4\" />","+                    {t.lunchDuration}: {formatMinutes(activeShift.lunch_duration_minutes)}","+                  </p>","+                </div>","+              )}","             </div>","           ) : (","             <div className=\"space-y-5\">","+              {/* Not Clocked In Status */}","               <div className=\"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-950 dark:to-indigo-950 rounded-xl border-2 border-blue-200 dark:border-blue-800 text-center shadow-sm\">","                 <Clock className=\"w-16 h-16 mx-auto mb-3 text-blue-500 dark:text-blue-400 opacity-50\" />","                 <p className=\"text-lg font-semibold text-blue-900 dark:text-blue-100\">{t.notClocked}</p>","-                <p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Tap the button below to start your shift</p>","+                <p className=\"text-sm text-blue-600 dark:text-blue-300 mt-1\">Complete the form below to clock in</p>","               </div>"," ","+              {/* Work Location */}","               <div className=\"space-y-2\">","-                <Label className=\"text-base font-semibold\">{t.whereWorked}</Label>","+                <Label className=\"text-base font-semibold flex items-center gap-2\">","+                  ğŸ“ {t.location}","+                </Label>","                 <Input","                   value={location}","                   onChange={(e) => setLocation(e.target.value)}"]},{"oldStart":617,"oldLines":17,"newStart":627,"newLines":21,"lines":["                 />","               </div>"," ","+              {/* Work Description */}","               <div className=\"space-y-2\">","-                <Label className=\"text-base font-semibold\">{t.whatDid}</Label>","+                <Label className=\"text-base font-semibold flex items-center gap-2\">","+                  ğŸ“ {t.workDescription}","+                </Label>","                 <Textarea","                   value={workDescription}","                   onChange={(e) => setWorkDescription(e.target.value)}","                   placeholder={t.descriptionPlaceholder}","-                  rows={3}","+                  rows={4}","                   className=\"text-base resize-none\"","                 />","               </div>"," ","+              {/* Clock In Button */}","               <Button","                 onClick={handleClockIn}","                 size=\"lg\""]}],"userModified":false,"replaceAll":false}}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_012ESj5oYyEU56uNiAmpapv8","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me validate the changes:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7770,"cache_read_input_tokens":48424,"cache_creation":{"ephemeral_5m_input_tokens":7770,"ephemeral_1h_input_tokens":0},"output_tokens":1},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"da9425db-8c51-4360-ae9d-bde501725507"}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_012ESj5oYyEU56uNiAmpapv8","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_vrtx_01CTxBhURpsDC6uo2LfxCxfZ","name":"Bash","input":{"command":"npm run check:safe","description":"Validate TypeScript and ESLint after layout changes"}}],"stop_reason":"tool_use","stop_sequence":null,"usage":{"input_tokens":3,"cache_creation_input_tokens":7770,"cache_read_input_tokens":48424,"cache_creation":{"ephemeral_5m_input_tokens":7770,"ephemeral_1h_input_tokens":0},"output_tokens":91},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"3934755f-d759-4b0c-a999-ee12451803f9"}
{"type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_vrtx_01CTxBhURpsDC6uo2LfxCxfZ","type":"tool_result","content":"> check:safe\n> timeout 20 npm run check || (echo 'Check timed out after 20 seconds' && exit 1)\n\n\n> check\n> tsgo --noEmit && npm run lint:radix -- --fix && npm run format\n\n\n> lint:radix\n> grep -l -r '<SelectItem' src | xargs eslint --config config/eslint/eslint.radix.config.js --fix\n\n\n> format\n> biome check --write --unsafe\n\nChecked 6 files in 56ms. No fixes applied.","is_error":false}]},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"458adf5a-9dba-449b-b54c-30b8aa380c2d","tool_use_result":{"stdout":"> check:safe\n> timeout 20 npm run check || (echo 'Check timed out after 20 seconds' && exit 1)\n\n\n> check\n> tsgo --noEmit && npm run lint:radix -- --fix && npm run format\n\n\n> lint:radix\n> grep -l -r '<SelectItem' src | xargs eslint --config config/eslint/eslint.radix.config.js --fix\n\n\n> format\n> biome check --write --unsafe\n\nChecked 6 files in 56ms. No fixes applied.","stderr":"","interrupted":false,"isImage":false}}
{"type":"assistant","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_vrtx_013HnyKG8gcw7zTyLZ2QvB3U","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! All validation checks passed. I've successfully restructured the employee time card layout with the following improvements:\n\n## âœ… Employee Time Card Layout - Restructured\n\n**All changes validated successfully** - No TypeScript or ESLint errors.\n\n### New Layout Flow (Exactly as requested):\n\n**When NOT clocked in:**\n1. **Status Display** - Shows \"Not currently clocked in\" with clear messaging\n2. **ğŸ“ Work Location** - Input field (available before clocking in)\n3. **ğŸ“ Describe Your Work** - Textarea field (available before clocking in)\n4. **Clock In Button** - Large green gradient button to start shift\n\n**When clocked in (Active Shift):**\n1. **Status Display** - Shows elapsed time and clock-in time\n2. **ğŸ“ Work Location** - Editable field (can update throughout shift, disabled during lunch)\n3. **ğŸ“ Describe Your Work** - Editable textarea (can update throughout shift, disabled during lunch)\n4. **Start Lunch (Optional)** - Orange outline button clearly marked as optional\n5. **Clock Out** - Red destructive button to end shift\n6. **Lunch Summary** - Shows total lunch time if taken (appears after ending lunch)\n\n**When on lunch break:**\n1. **Status Display** - Orange card showing \"On Lunch Break\"\n2. **ğŸ“ Work Location** - Disabled (cannot edit during lunch)\n3. **ğŸ“ Describe Your Work** - Disabled (cannot edit during lunch)\n4. **End Lunch Button** - Large orange gradient button to end break\n\n### Key Improvements Made:\n\n1. **Clear Visual Hierarchy**: Status â†’ Location â†’ Description â†’ Actions (in that order)\n2. **Consistent Layout**: Work location and description fields are always visible in the same position\n3. **Optional Labels**: \"Start Lunch\" button clearly shows \"(Optional)\" / \"(Opcional)\"\n4. **Full-Width Buttons**: All action buttons are now full-width for better mobile UX\n5. **Icon Indicators**: ğŸ“ for location, ğŸ“ for work description for quick visual scanning\n6. **Disabled States**: Fields are disabled during lunch break to prevent accidental edits\n7. **Lunch Summary**: Shows lunch duration taken in a separate card after ending lunch\n8. **Larger Textarea**: Increased work description to 4 rows for better usability\n9. **Better Spacing**: Consistent 5-6 unit spacing between sections\n\nThe layout now follows a logical top-to-bottom flow that matches the actual workflow: Clock In â†’ (Optional) Start Lunch â†’ (Optional) End Lunch â†’ Clock Out, with work location and description always accessible for updates throughout the shift."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":229,"cache_read_input_tokens":56194,"cache_creation":{"ephemeral_5m_input_tokens":229,"ephemeral_1h_input_tokens":0},"output_tokens":621},"context_management":null},"parent_tool_use_id":null,"session_id":"752928d6-a510-485a-bbfe-46da4a277f96","uuid":"cc13b628-3834-4cfa-8d82-ea40872c8dd5"}
{"type":"result","subtype":"success","is_error":false,"duration_ms":93387,"duration_api_ms":90864,"num_turns":4,"result":"Perfect! All validation checks passed. I've successfully restructured the employee time card layout with the following improvements:\n\n## âœ… Employee Time Card Layout - Restructured\n\n**All changes validated successfully** - No TypeScript or ESLint errors.\n\n### New Layout Flow (Exactly as requested):\n\n**When NOT clocked in:**\n1. **Status Display** - Shows \"Not currently clocked in\" with clear messaging\n2. **ğŸ“ Work Location** - Input field (available before clocking in)\n3. **ğŸ“ Describe Your Work** - Textarea field (available before clocking in)\n4. **Clock In Button** - Large green gradient button to start shift\n\n**When clocked in (Active Shift):**\n1. **Status Display** - Shows elapsed time and clock-in time\n2. **ğŸ“ Work Location** - Editable field (can update throughout shift, disabled during lunch)\n3. **ğŸ“ Describe Your Work** - Editable textarea (can update throughout shift, disabled during lunch)\n4. **Start Lunch (Optional)** - Orange outline button clearly marked as optional\n5. **Clock Out** - Red destructive button to end shift\n6. **Lunch Summary** - Shows total lunch time if taken (appears after ending lunch)\n\n**When on lunch break:**\n1. **Status Display** - Orange card showing \"On Lunch Break\"\n2. **ğŸ“ Work Location** - Disabled (cannot edit during lunch)\n3. **ğŸ“ Describe Your Work** - Disabled (cannot edit during lunch)\n4. **End Lunch Button** - Large orange gradient button to end break\n\n### Key Improvements Made:\n\n1. **Clear Visual Hierarchy**: Status â†’ Location â†’ Description â†’ Actions (in that order)\n2. **Consistent Layout**: Work location and description fields are always visible in the same position\n3. **Optional Labels**: \"Start Lunch\" button clearly shows \"(Optional)\" / \"(Opcional)\"\n4. **Full-Width Buttons**: All action buttons are now full-width for better mobile UX\n5. **Icon Indicators**: ï¿½ï¿½ for location, ğŸ“ for work description for quick visual scanning\n6. **Disabled States**: Fields are disabled during lunch break to prevent accidental edits\n7. **Lunch Summary**: Shows lunch duration taken in a separate card after ending lunch\n8. **Larger Textarea**: Increased work description to 4 rows for better usability\n9. **Better Spacing**: Consistent 5-6 unit spacing between sections\n\nThe layout now follows a logical top-to-bottom flow that matches the actual workflow: Clock In â†’ (Optional) Start Lunch â†’ (Optional) End Lunch â†’ Clock Out, with work location and description always accessible for updates throughout the shift.","session_id":"752928d6-a510-485a-bbfe-46da4a277f96","total_cost_usd":0.28454745,"usage":{"input_tokens":10,"cache_creation_input_tokens":40113,"cache_read_input_tokens":142693,"output_tokens":5465,"server_tool_use":{"web_search_requests":0,"web_fetch_requests":0},"service_tier":"standard","cache_creation":{"ephemeral_1h_input_tokens":0,"ephemeral_5m_input_tokens":40113}},"modelUsage":{"claude-haiku-4-5-20251001":{"inputTokens":3369,"outputTokens":246,"cacheReadInputTokens":0,"cacheCreationInputTokens":0,"webSearchRequests":0,"costUSD":0.004599,"contextWindow":200000},"claude-sonnet-4-5":{"inputTokens":10,"outputTokens":5465,"cacheReadInputTokens":142693,"cacheCreationInputTokens":40113,"webSearchRequests":0,"costUSD":0.27523664999999997,"contextWindow":200000},"claude-sonnet-4-5-20250929":{"inputTokens":2,"outputTokens":269,"cacheReadInputTokens":2236,"cacheCreationInputTokens":0,"webSearchRequests":0,"costUSD":0.0047117999999999995,"contextWindow":200000}},"permission_denials":[],"uuid":"52cb90a1-f6a9-4e4b-ace3-d3acb33626fd"}
